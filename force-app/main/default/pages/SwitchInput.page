<apex:page id="idPage" docType="html-5.0" standardController="Opportunity" extensions="SwitchInputCtl,SwitchRemoteAction" action="{!init}" cache="false" title="Switch Input">

  <script src="/soap/ajax/44.0/connection.js" type="text/javascript"></script>
  <script src="/soap/ajax/44.0/apex.js" type="text/javascript"></script>

  <apex:includeScript value="/support/console/44.0/integration.js" />
  <style>

    :root {
      --main-height: 0px;
      --submenu-height: 0px;
    }
    
    .wrapper {
      resize: both;
    }

    .container {
      display: flex;
    }

    .main {
      /*width: 80%;*/
    }

    .main-header {}

    .section-panel {
      display: flex;
      padding: 10px;
      background-color: #fff;
      border-radius: 3px;
    }

    .summarpanel {
      display: flex;
    }

    .center-column {}

    .main-contents {
      width: 100%;
      margin-top: 10px;
      height: var(--main-height);
      overflow-y:scroll;
    }

    .kibo {
      display: flex;
      width: 100%;
    }

    .ryokin {
      display: flex;
      width: 100%;
    }

    .kiboshiharaihoho {
      width: 100%;
      border-radius: 3px;
    }

    .shiryosofu {
      display: flex;
      width: 100%;
    }

    .side {
      width: 100%;
      /*height: 775px;*/
      overflow-y: auto;
      padding: 0 0 0 10px;
    }

    html body.sfdcBody {
      background: rgba(176, 196, 223, 1.0);
      padding: 10px 10px 0 10px;
      font-size: 80%;
      font-family: 'Salesforce Sans',Arial,sans-serif;
    }

    div {
      font-family: 'Salesforce Sans',Arial,sans-serif;
    }

    th {
      text-align: right;
      font-family: 'Salesforce Sans',Arial,sans-serif;
    }

    td {
      padding: 0 10px 0 0;
      font-family: 'Salesforce Sans',Arial,sans-serif;
    }

    .contactHistoryLabel {
      padding-right: 5px;
      text-align: right;
      font-weight: bold;
      font-family: 'Salesforce Sans',Arial,sans-serif;
    }

    .square_btn1 {
      display: inline-block;
      padding: 0.1em 0 0 0;
      text-decoration: none;
      color: white;
      border: 1px solid rgb(221, 219, 218);
      background: rgba(27, 82, 151, 1.0);
      border-radius: 3px;
      transition: .4s;
      text-align: center;
    }

    .square_btn1:hover {
      background: white;
      color: rgba(27, 82, 151, 1.0);
    }

    .square_btn1.active {
      background-color: #ccc;
      color: rgba(27, 82, 151, 1.0);
    }

    .square_btn1>span:last-of-type,
    .square_btn1.active>span:first-of-type {
      display: none;
    }

    .square_btn1.active>span:last-of-type {
      display: inline;
    }

    .square_btn2 {
      display: inline-block;
      padding: 0.1em 0 0 0;
      text-decoration: none;
      color: white;
      border: 1px solid rgb(221, 219, 218);
      background: rgba(27, 82, 151, 1.0);
      border-radius: 3px;
      transition: .4s;
      text-align: center;
    }

    .square_btn2:hover {
      background: white;
      color: rgba(27, 82, 151, 1.0);
    }

    .square_btn2.active {
      background-color: #ccc;
      color: rgba(27, 82, 151, 1.0);
    }

    .square_btn2>span:last-of-type,
    .square_btn2.active>span:first-of-type {
      display: none;
    }

    .square_btn2.active>span:last-of-type {
      display: inline;
    }

    .square_btn3 {
      display: inline-block;
      padding: 0.1em 0 0 0;
      text-decoration: none;
      color: white;
      border: 1px solid rgb(221, 219, 218);
      background: rgba(27, 82, 151, 1.0);
      border-radius: 3px;
      transition: .4s;
      text-align: center;
    }

    .square_btn3:hover {
      background: white;
      color: rgba(27, 82, 151, 1.0);
    }

    .square_btn3.active {
      background-color: #ccc;
      color: rgba(27, 82, 151, 1.0);
    }

    .square_btn3>span:last-of-type,
    .square_btn3.active>span:first-of-type {
      display: none;
    }

    .square_btn3.active>span:last-of-type {
      display: inline;
    }

    .ryunyuNyuden_btn {
      display: inline-block;
      padding: 0.1em 0 0 0;
      text-decoration: none;
      color: white;
      border: 1px solid rgb(221, 219, 218);
      background: rgba(27, 82, 151, 1.0);
      border-radius: 3px;
      transition: .4s;
      text-align: center;
    }

    .ryunyuNyuden_btn:hover {
      background: white;
      color: rgba(27, 82, 151, 1.0);
    }

    .ryunyuNyuden_btn.active {
      background-color: #ccc;
      color: rgba(27, 82, 151, 1.0);
    }

    .ryunyuNyuden_btn>span:last-of-type,
    .ryunyuNyuden_btn.active>span:first-of-type {
      display: none;
    }

    .ryunyuNyuden_btn.active>span:last-of-type {
      display: inline;
    }

    .row {
      margin-top: 5px;
    }

    .buttonstyle {
      width: 100px;
    }

    .buttonstyle3 {
      width: 40px;
      /*height: 20px;*/
    }

    .buttonstyle4 {
      width: 75px;
    }

    .tabs {
      margin-top: 50px;
      /*padding-bottom: 40px;*/
      background-color: #fff;
      width: 100%;
      /*padding: 5px;*/
      margin: 0 auto;
    }
    /*タブのスタイル*/

    .tab_item {
      width: calc(100%/4);
      height: 30px;
      border-bottom: 3px solid rgba(0, 112, 210, 0.1);
      background-color: #d9d9d9;
      line-height: 30px;
      font-size: 11px;
      text-align: center;
      color: #565656;
      display: block;
      float: left;
      text-align: center;
      font-weight: bold;
      transition: all 0.2s ease;
    }

    .tab_item:hover {
      opacity: 0.75;
    }
    /*ラジオボタンを全て消す*/

    input[name="tab_item"] {
      display: none;
    }
    /*タブ切り替えの中身のスタイル*/

    .tab_content {
      display: none;
      padding: 5px;
      clear: both;
      /*height: 447px;*/
      overflow-y: auto;
    }

    .tabs input:checked+.tab_item {
      background-color: rgba(0, 112, 210, 0.1);
      color: #000;
    }

    .titleDetaile {
      color: rgb(0, 95, 178);
    }

    .onakunariCheck {
      background-color: pink;
    }

    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    .clshidArea {
      position: absolute;
      padding: 5px;
      color: #000;
      border-radius: 10px;
      -moz-border-radius: 10px;
      -webkit-border-radius: 5px;
      background: #FFFFFF;
      border:1px solid #000;
      display:none;
    }
    table.kensakukekka {
      border-collapse: collapse;
      border: 0;
      overflow: scroll;
    }
    table.kensakukekka th {
      border: 1px solid #222;
      border-style: dotted;
    }
    table.kensakukekka td {
      border: 1px solid #222;
      border-style: dotted;
      padding-right: 4px;
      white-space: nowrap;
    }
    table.sofujoList {
      border-collapse: collapse;
      border: 0;
      overflow: scroll;
    }
    table.sofujoList th {
      border: 1px solid #222;
      border-style: dotted;
    }
    table.sofujoList td {
      border: 1px solid #222;
      border-style: dotted;
      padding-right: 4px;
      white-space: nowrap;
    }
    thead.sofujoList_scrollHead,tbody.sofujoList_scrollBody{
        display:block;
    }
    tbody.sofujoList_scrollBody{
        overflow:auto;
        width: 1213px;
        height: 70px;
    }
    .saijoTeianList_name{
        width: 300px;
    }
    .titlePanelPink {
    color: hotpink;
    }

    .titlePanelGreen {
        color: darkgreen;
    }

    .bgGreen {
      background-color: #beedbe;
        padding: 10px;
        border: #DDDBDA solid 1px;
        border-radius: .25rem;
    }

    .bgPink {
      background-color: #ffe6ea;
        padding: 10px;
        border: #DDDBDA solid 1px;
        border-radius: .25rem;
    }

    .item_label_1 {
        padding-right: 5px;
        margin-top: 2px;
        margin-bottom: 2px;
        text-align: right;
        font-weight: bold;
    }
    .item_value_1 {
        padding-top: 3px;
    }

    .sfdcoutputText {
        width: 80px;
        text-align: right;
        font-weight: bold;
        white-space: nowrap;
        vertical-align: top;
        border-collapse: separate;
        border-spacing: 2px;
        font-family: 'Salesforce Sans',Arial,sans-serif;
        margin-left: 15px;
    }

    span.dateFormat {display: none;}

    .contactHistoryTabs {
      display: flex;
      flex-wrap: wrap
    }
    .tab-wrap:after {
      content: '';
      width: 100%;
      height: 3px;
      background: #364e96;;
      display: block;
      order: -1;
    }
    .tab-label {
      color: #565656;
      background: LightGray;
      text-shadow: 0 -1px 0 rgba(0,0,0,.2);
      white-space: nowrap;
      text-align: center;
      padding: 10px .5em;
      order: -1;
      position: relative;
      z-index: 1;
      cursor: pointer;
      border-radius: 5px 5px 0 0;
      flex: 1;
    }
    .tab-label:not(:last-of-type) {
      margin-right: 5px;
    }
    .tab-content {
      width: 100%;
      height: 0;
      overflow: auto;
      opacity: 0;
    }
    /* アクティブなタブ */
    .tab-switch:checked+.tab-label {
      font-weight: bold;
      color: White;
      background: #364e96;;
    }
    .tab-switch:checked+.tab-label+.tab-content {
      height: 100%;
      padding: 15px;
      opacity: 1;
      transition: .5s opacity;
      box-shadow: 0 0 3px rgba(0,0,0,.2);
      background: White;
    }
    .tab-othermenu-label {
      color: #565656;
      background: LightGray;
      text-shadow: 0 -1px 0 rgba(0,0,0,.2);
      white-space: nowrap;
      text-align: center;
      padding: 10px .5em;
      order: -1;
      position: relative;
      z-index: 1;
      cursor: pointer;
      border-radius: 5px 5px 0 0;
      flex: 1;
    }
    .tab-othermenu-label:not(:last-of-type) {
      margin-right: 5px;
    }
    .tab-othermenu-content {
      width: 100%;
      height: 0px;
      overflow: hidden;
      opacity: 0;
    }
    /* アクティブなタブ */
    .tab-othermenu-switch:checked+.tab-othermenu-label {
      font-weight: bold;
      color: White;
      background: #364e96;;
    }
    .tab-othermenu-switch:checked+.tab-othermenu-label+.tab-othermenu-content {
      overflow-y: scroll;
      height: var(--submenu-height);
      padding: 15px;
      opacity: 1;
      transition: .5s opacity;
      box-shadow: 0 0 3px rgba(0,0,0,.2);
      background: White;
      display:;
    }
    /* ラジオボタン非表示 */
    .tab-switch {
      display: none;
    }
    .tab-othermenu-switch {
      display: none;
    }

    summary {
		 color: #364e96;
		}

    fieldset {
      padding: 0px;
    }

    .contactHistoryJuhasshinTable td {
      width: 63px;
    }
    .contactHistoryTabs textarea {
      width: 95%;
    }
    table.templeteList {
      border-collapse: collapse;
      border: 0;
      overflow: scroll;
      width: 348px;
    }
    table.templeteList th {
      border: 1px solid #222;
      border-style: dotted;
    }
    table.templeteList td {
      border: 1px solid #222;
      border-style: dotted;
      padding-right: 4px;
      white-space: nowrap;
    }
    thead.templeteList_scrollHead,tbody.templeteList_scrollBody{
        display:block;
    }
    tbody.templeteList_scrollBody{
        overflow:auto;
        width: 348px;
        height: 111px;
    }
  </style>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/libphonenumber-js/1.1.10/libphonenumber-js.min.js"></script>
  <script src="myapp.js"></script>
  <script type="text/javascript" charset="utf-8">
    sforce.connection.sessionId='{!GETSESSIONID()}';

    window.sfdcPage.appendToOnloadQueue(
      function() {
        try{
          
          if ('{!onloadFlg}' == 'true') {
            if (window.confirm('一時保存されたデータがあります。Salesforceデータを反映しますか？')) {
              onloadSetOpportunityValueJs();
            }
          }

          chkShiharaiHoho(document.getElementById('idPage:idForm:idKiboShiharaiHoho1'));
          chkTaiouKanouRiyu();
          openGoanchisakiJusho();
          changeKonnyusaki();
          dspKyogoTashaSonota();
          chkJizenJunbiSheetGoteishutsuShudan();
          contactHistoryInitialProcessing();
          setAlert();
          setTabIndex();
          displaySize();
          onloadDefaultValueJsFunc();
        }
        catch(e){
          alert(e);
        }
      });

      function displaySize(){
        var elementMainContents = document.getElementById('idMainContents');
        var rectMainContents = elementMainContents.getBoundingClientRect();
        var hMainContents = $(window).height() - rectMainContents.top - 10;
        document.documentElement.style.setProperty('--main-height', hMainContents + 'px');

        var elementSideContents = document.getElementById('idContactHistoryListTab');
        var rectSideContents = elementSideContents.getBoundingClientRect();
        var hSideContents = $(window).height() - rectSideContents.top - 40;
        document.documentElement.style.setProperty('--submenu-height', hSideContents + 'px');
      }

      function setAlert(){
        setAlert1();
        setAlert2();
        setAlert3();
        setAlert4();
        setAlert5();
        setAlert6();
        setAlert8();
        setUmieCrossSellArert();
        setAnketoSofuHohoAlert();
        setJizenJunbiSheetJryobiAlert();
        setMerumagaKyodakuAlert();
        setHikaiinShikigoAnketoAlert();
      }

      function setTabIndex(){
        document.getElementById('idPage:idForm:idToiawaseKiinsha').tabIndex = 10;
        document.getElementById('idPage:idForm:idSodanshaSeiKana1').tabIndex = 20;
        document.getElementById('idPage:idForm:idSodanshaMeiKana1').tabIndex = 30;
        document.getElementById('idPage:idForm:idSodanshaSei1').tabIndex = 40;
        document.getElementById('idPage:idForm:idSodanshaMei1').tabIndex = 50;
        document.getElementById('idPage:idForm:idSodanshaSeibetsu').tabIndex = 60;
        document.getElementById('idPage:idForm:idMobilePhone').tabIndex = 70;
        document.getElementById('idPage:idForm:idPhone').tabIndex = 80;
        document.getElementById('idPage:idForm:idSodanshaYusenDenwaKubun').tabIndex = 90;
        document.getElementById('idPage:idForm:idMail1').tabIndex = 100;
        document.getElementById('idPage:idForm:idSodanshaPostalCode1').tabIndex = 110;
        document.getElementById('idPage:idForm:idSodanshaPostalCode1SerchBtn').tabIndex = 120;
        document.getElementById('idPage:idForm:idSodanshaState1').tabIndex = 130;
        document.getElementById('idPage:idForm:idSodanshaCity1').tabIndex = 140;
        document.getElementById('idPage:idForm:idSodanshaStreet1').tabIndex = 150;
        document.getElementById('idPage:idForm:idTaishoshaKyojuKeitai').tabIndex = 160;
        document.getElementById('idPage:idForm:idTaishoushaJokyo').tabIndex = 170;
        document.getElementById('idPage:idForm:idTaishoshaYomeiKikan').tabIndex = 180;
        document.getElementById('idPage:idForm:idZokugaraSodanshaNitottenoTaishosha1').tabIndex = 190;
        document.getElementById('idPage:idForm:idTaishoshaKyojuKeitaiGenzai').tabIndex = 200;
        document.getElementById('idPage:idForm:idTaishoushaJokyoGenzai').tabIndex = 210;
        document.getElementById('idPage:idForm:idTaishoshaYomeiKikanGenzai').tabIndex = 220;
        document.getElementById('idRirekiButton').tabIndex = 230;
        document.getElementById('idTaishoshaA').tabIndex = 240;
        document.getElementById('idPage:idForm:idTaishoshaSeiKana').tabIndex = 250;
        document.getElementById('idPage:idForm:idTaishoshaMeiKana').tabIndex = 260;
        document.getElementById('idPage:idForm:idTaishoshaSei').tabIndex = 270;
        document.getElementById('idPage:idForm:idTaishoshaMei').tabIndex = 280;
        document.getElementById('idPage:idForm:idTaishoshaSeibetsu').tabIndex = 290;
        document.getElementById('idPage:idForm:idNengoValue').tabIndex = 300;
        document.getElementById('idPage:idForm:idWarekiNen').tabIndex = 310;
        document.getElementById('idPage:idForm:idWarekiTsuki').tabIndex = 320;
        document.getElementById('idPage:idForm:idWarekiHi').tabIndex = 330;
        document.getElementById('idPage:idForm:idBotsunengappiSeireki').tabIndex = 340;
        document.getElementById('idPage:idForm:idTaishoshaPostalCode').tabIndex = 350;
        document.getElementById('idPage:idForm:idTaishoshaPostalCodeSerchBtn').tabIndex = 360;
        document.getElementById('idPage:idForm:idTaishoshaState').tabIndex = 370;
        document.getElementById('idPage:idForm:idTaishoshaCity').tabIndex = 380;
        document.getElementById('idPage:idForm:idTaishoshaStreet').tabIndex = 390;
        document.getElementById('idPage:idForm:idOmukaeSakiName1').tabIndex = 400;
        document.getElementById('idGoogleMap1').tabIndex = 410;
        document.getElementById('idPage:idForm:idOmukaeSakiJusho1').tabIndex = 420;
        document.getElementById('idSodanshaJushoBtn1').tabIndex = 430;
        document.getElementById('idTaishoshaJushoBtn1').tabIndex = 440;
        document.getElementById('idPage:idForm:idKiboKeishiki').tabIndex = 450;
        // document.getElementById('idPage:idForm:idKiboPlan').tabIndex = 460;
        // document.getElementById('idPage:idForm:idKiboKingaku').tabIndex = 470;
        document.getElementById('idPage:idForm:idKiboGoanchisaki').tabIndex = 480;
        document.getElementById('idPage:idForm:idGoanchiMenkaiKiboUmu').tabIndex = 490;
        document.getElementById('idPage:idForm:idGoanchisakiJusho').tabIndex = 500;
        document.getElementById('idSodanshaJushoBtn2').tabIndex = 510;
        document.getElementById('idTaishoshaJushoBtn2').tabIndex = 520;
        document.getElementById('idPage:idForm:idSanretsushaShinzokuFrom').tabIndex = 530;
        document.getElementById('idPage:idForm:idSanretsushaShinzokuTo').tabIndex = 540;
        document.getElementById('idPage:idForm:idSanretsushaShinzokuigaiFrom').tabIndex = 550;
        document.getElementById('idPage:idForm:idSanretsushaShinzokuigaiTo').tabIndex = 560;
        document.getElementById('idPage:idForm:idBodaijinoUmu').tabIndex = 570;
        document.getElementById('idPage:idForm:idHakaUmuKubun').tabIndex = 580;
        document.getElementById('idPage:idForm:idSyushi').tabIndex = 590;
        document.getElementById('idPage:idForm:idSyuha').tabIndex = 600;
        document.getElementById('idPage:idForm:idMonkArrangements').tabIndex = 610;
        document.getElementById('idPage:idForm:idBodaijiGoiZumi').tabIndex = 620;
        document.getElementById('idPage:idForm:idKaimyoKibo').tabIndex = 630;
        document.getElementById('idPage:idForm:idKaimyoHomyo').tabIndex = 640;
        document.getElementById('idPage:idForm:idKiboChiiki1').tabIndex = 650;
        document.getElementById('idPage:idForm:idKiboChiiki1_lkwgt').tabIndex = 660;
        document.getElementById('idAddAreaButton2').tabIndex = 670;
        document.getElementById('idSaijoKensaku1Btn').tabIndex = 680;
        document.getElementById('idPage:idForm:idKiboChiiki2').tabIndex = 690;
        document.getElementById('idPage:idForm:idKiboChiiki2_lkwgt').tabIndex = 700;
        document.getElementById('idAddAreaButton3').tabIndex = 710;
        document.getElementById('idSaijoKensaku2Btn').tabIndex = 720;
        document.getElementById('idPage:idForm:idKiboChiiki3').tabIndex = 730;
        document.getElementById('idPage:idForm:idKiboChiiki3_lkwgt').tabIndex = 740;
        document.getElementById('idAddAreaButton4').tabIndex = 750;
        document.getElementById('idSaijoKensaku3Btn').tabIndex = 760;
        document.getElementById('idPage:idForm:idKiboChiiki4').tabIndex = 770;
        document.getElementById('idPage:idForm:idKiboChiiki4_lkwgt').tabIndex = 780;
        document.getElementById('idSaijoKensaku4Btn').tabIndex = 790;
        document.getElementById('idTaishoshaJuminhyoBtn').tabIndex = 800;
        document.getElementById('idPage:idForm:idTaishoshaJuminhyoChiiki').tabIndex = 810;
        document.getElementById('idPage:idForm:idTaishoshaJuminhyoChiiki_lkwgt').tabIndex = 820;
        document.getElementById('idTaishoshaJuminhyoSaijoKensakuBtn').tabIndex = 830;
        document.getElementById('idMoshuJuminhyoBtn').tabIndex = 840;
        document.getElementById('idPage:idForm:idMoshuJuminhyoChiiki').tabIndex = 850;
        document.getElementById('idPage:idForm:idMoshuJuminhyoChiiki_lkwgt').tabIndex = 860;
        document.getElementById('idMoshuJuminhyoSaijoKensakuBtn').tabIndex = 870;
        document.getElementById('idPage:idForm:idZokugaraSodanshaNitottenoTaishosha2').tabIndex = 880;
        document.getElementById('idPage:idForm:idKetteikensha').tabIndex = 890;
        document.getElementById('idPage:idForm:idBenefitOneId').tabIndex = 900;
        document.getElementById('idPage:idForm:idBenefitOneName').tabIndex = 910;
        document.getElementById('idPage:idForm:idPostalClubKaiinBango').tabIndex = 920;
        document.getElementById('idPage:idForm:idKiboShiharaiHoho1').tabIndex = 930;
        document.getElementById('idPage:idForm:idShiharaiHohoMikakuteiRiyu1').tabIndex = 940;
        document.getElementById('idPage:idForm:idGoannaizumiRyuijiko').tabIndex = 950;
        document.getElementById('idPage:idForm:idOfferingJokyo').tabIndex = 960;
        document.getElementById('idPage:idForm:idAnchiRyokin2hakuOr3haku').tabIndex = 970;
        document.getElementById('idPage:idForm:idShikijoShiyoryo2man5senOr5man').tabIndex = 980;
        document.getElementById('idPage:idForm:idKasojoShiyoryo1man5sen').tabIndex = 990;
        document.getElementById('idPage:idForm:idHansoKyori50km').tabIndex = 1000;
        document.getElementById('idPage:idForm:idHansoKaisu2kaiOr3kai').tabIndex = 1010;
        document.getElementById('idPage:idForm:idMemberSeidoGoannaiJokyo').tabIndex = 1110;
        document.getElementById('idPage:idForm:idSodanshaMemberTourokuZumi').tabIndex = 1120;
        document.getElementById('idOnakunariA').tabIndex = 1130;
        document.getElementById('idPage:idForm:idKiboShiharaiHoho2').tabIndex = 1140;
        document.getElementById('idPage:idForm:idShiharaiHohoMikakuteiRiyu2').tabIndex = 1150;
        document.getElementById('idPage:idForm:idGoannaizumiRyuijiko2').tabIndex = 1160;
        document.getElementById('idPage:idForm:idOmukaeSakiName2').tabIndex = 1170;
        document.getElementById('idGoogleMap2').tabIndex = 1180;
        document.getElementById('idPage:idForm:idOmukaeSakiJusho2').tabIndex = 1190;
        document.getElementById('idSodanshaJushoBtn3').tabIndex = 1200;
        document.getElementById('idTaishoshaJushoBtn3').tabIndex = 1210;
        document.getElementById('idPage:idForm:idKiboGoanchisaki2').tabIndex = 1220;
        document.getElementById('idPage:idForm:idGoanchisakiJusho2').tabIndex = 1230;
        document.getElementById('idSodanshaJushoBtn4').tabIndex = 1240;
        document.getElementById('idTaishoshaJushoBtn4').tabIndex = 1250;
        document.getElementById('idPage:idForm:idSimpleYasugoKeiyaku').tabIndex = 1260;
        document.getElementById('idPage:idForm:idSimpleYasugoKeiyaku_lkwgt').tabIndex = 1270;
        document.getElementById('idPage:idForm:idShohin').tabIndex = 1280;
        document.getElementById('idPage:idForm:idShohin_lkwgt').tabIndex = 1290;
        document.getElementById('idPage:idForm:idTaiouKanouRiyu').tabIndex = 1300;
        document.getElementById('idPage:idForm:idSokyakushoKisaiJiko').tabIndex = 1310;
        document.getElementById('idPage:idForm:idKeisatsuAnken').tabIndex = 1320;
        document.getElementById('idPage:idForm:idSosaiFujo').tabIndex = 1330;
        document.getElementById('idPage:idForm:idTashaAnchi').tabIndex = 1340;
        document.getElementById('idPage:idForm:idTaijiAnken').tabIndex = 1350;
        document.getElementById('idPage:idForm:idJuyoRenrakuJiko').tabIndex = 1360;
        //document.getElementById('idPage:idForm:idFreeText').tabIndex = 1370;
        document.getElementById('idSaveBtn').tabIndex = 1380;
      }

      function onloadDefaultValueJsFunc(){
        onloadDefaultValueJs();
      }

    function setAlert1() {
      var alertMsg1 = '';
      var alertMsg2 = '';
      if(document.getElementById('idCampaignSogiyoBouquetFlg').value == 'true'){
        alertMsg1 = '葬儀用ブーケ(SS)対象のお客様です。';
      }
      if (document.getElementById('idPage:idForm:idAllianceId_lkold').value.indexOf('ベネフィット') === 0){
        document.getElementById('idBenefitOneIdTr').style.display = '';
        document.getElementById('idPostalClubIdTr').style.display = 'none';
      }
      else if(document.getElementById('idPage:idForm:idAllianceId_lkold').value.indexOf('ポスタルくらぶ') === 0){
        document.getElementById('idBenefitOneIdTr').style.display = 'none';
        document.getElementById('idPostalClubIdTr').style.display = '';
      }
      else{
        document.getElementById('idBenefitOneIdTr').style.display = 'none';
        document.getElementById('idPostalClubIdTr').style.display = 'none';
      }

      if(document.getElementById('idPage:idForm:idAllianceId').value != ''){
        alertMsg2 = document.getElementById('idPage:idForm:idAllianceId_lkold').value + 'のお客様です。';
        var keiyakuId = document.getElementById('idPage:idForm:idAllianceId_lkid').value;
        if(keiyakuId != '' && keiyakuId != '000000000000000'){
          var result = sforce.connection.query("SELECT Id, SokyakujicyuitenAlliance__c FROM Keiyaku__c where Id='" + keiyakuId + "'"); 
          var records = result.getArray("records");
          for (var i=0; i<records.length; i++) {
            document.getElementById('idSokyakujicyuitenAlliance').innerText = records[i].SokyakujicyuitenAlliance__c;
            break;
          }
        }
      }
      else{
        document.getElementById('idSokyakujicyuitenAlliance').innerText = '';
      }

      document.getElementById('idAlert1').innerText = alertMsg1 + alertMsg2;
    }

    function setAlert2() {
      var sanretsushaShinzokuFrom = document.getElementById('idPage:idForm:idSanretsushaShinzokuFrom').value;
      var sanretsushaShinzokuTo = document.getElementById('idPage:idForm:idSanretsushaShinzokuTo').value;
      if ((sanretsushaShinzokuFrom != '' && !sanretsushaShinzokuFrom.match(/^([1-9]\d*|0)$/)) ||
        (sanretsushaShinzokuTo != '' && !sanretsushaShinzokuTo.match(/^([1-9]\d*|0)$/))) {
        document.getElementById('idAlert2').innerText = '「参列者 親族」は半角正数で入力してください';
      } else if (document.getElementById('idPage:idForm:idKiboKeishiki').value == '火葬式' && (sanretsushaShinzokuFrom > 15 || sanretsushaShinzokuTo > 15)) {
        document.getElementById('idAlert2').innerText = '親族が15名以上のため、火葬式以外推奨です';
      } else if (document.getElementById('idPage:idForm:idKiboKeishiki').value == '火葬式' &&
        (document.getElementById('idPage:idForm:idSanretsushaShinzokuigaiFrom').value != '' ||
          document.getElementById('idPage:idForm:idSanretsushaShinzokuigaiTo').value != '')) {
        document.getElementById('idAlert2').innerText = '親族以外の参列者がいるため、火葬式以外推奨です';
      } else {
        document.getElementById('idAlert2').innerText = '';
      }
    }

    function setAlert3() {
      if ((document.getElementById('idPage:idForm:idKiboKeishiki').value == '火葬式' || document.getElementById('idPage:idForm:idKiboKeishiki').value == '一日葬') &&
        document.getElementById('idPage:idForm:idBodaijinoUmu').value == '有') {
        document.getElementById('idAlert3').innerText = '一日葬（火葬式）開催について、菩提寺の承諾を得てください';
      } else if ((document.getElementById('idPage:idForm:idKiboKeishiki').value == '火葬式' || document.getElementById('idPage:idForm:idKiboKeishiki').value == '一日葬') &&
        document.getElementById('idPage:idForm:idBodaijinoUmu').value == '要確認') {
        document.getElementById('idAlert3').innerText = '菩提寺有無を要確認！！有の場合、一日葬（火葬式）開催について、菩提寺の承諾を得てください';
      } else if (document.getElementById('idPage:idForm:idBodaijinoUmu').value == '無' && document.getElementById('idPage:idForm:idHakaUmuKubun').value == '有') {
        document.getElementById('idAlert3').innerText = 'お墓が寺院敷地内の場合、菩提寺がある可能性が高いです';
      } else {
        document.getElementById('idAlert3').innerText = '';
      }
    }

    function setAlert4() {
      if (document.getElementById('idPage:idForm:idMonkArrangements').value == '有' &&
        document.getElementById('idPage:idForm:idBodaijinoUmu').value == '有') {
        document.getElementById('idAlert4').innerText = '僧侶手配について菩提寺の承諾を得てください';
      } else if (document.getElementById('idPage:idForm:idMonkArrangements').value == '有' &&
        document.getElementById('idPage:idForm:idBodaijinoUmu').value == '要確認') {
        document.getElementById('idAlert4').innerText = '菩提寺有無を要確認！！有の場合、僧侶手配について菩提寺の承諾を得てください';
      } else {
        document.getElementById('idAlert4').innerText = '';
      }
    }

    function chkShikugun(obj){
      if (obj.value == '東京都千代田区' ||
          obj.value == '東京都中央区' ||
          obj.value == '東京都港区' ||
          obj.value == '東京都新宿区' ||
          obj.value == '東京都文京区' ||
          obj.value == '東京都台東区' ||
          obj.value == '東京都墨田区' ||
          obj.value == '東京都江東区' ||
          obj.value == '東京都品川区' ||
          obj.value == '東京都目黒区' ||
          obj.value == '東京都大田区' ||
          obj.value == '東京都世田谷区' ||
          obj.value == '東京都渋谷区' ||
          obj.value == '東京都中野区' ||
          obj.value == '東京都杉並区' ||
          obj.value == '東京都豊島区' ||
          obj.value == '東京都北区' ||
          obj.value == '東京都荒川区' ||
          obj.value == '東京都板橋区' ||
          obj.value == '東京都練馬区' ||
          obj.value == '東京都足立区' ||
          obj.value == '東京都葛飾区' ||
          obj.value == '東京都江戸川区' ||
          obj.value == '東京都武蔵野市' ||
          obj.value == '東京都三鷹市' ||
          obj.value == '東京都調布市' ||
          obj.value == '東京都小金井市' ||
          obj.value == '東京都小平市' ||
          obj.value == '東京都東村山市' ||
          obj.value == '東京都国分寺市' ||
          obj.value == '東京都狛江市' ||
          obj.value == '東京都東大和市' ||
          obj.value == '東京都清瀬市' ||
          obj.value == '東京都東久留米市' ||
          obj.value == '東京都西東京市' ||
          obj.value == '埼玉県草加市' ||
          obj.value == '埼玉県八潮市' ||
          obj.value == '埼玉県蕨市' ||
          obj.value == '埼玉県戸田市' ||
          obj.value == '埼玉県和光市' ||
          obj.value == '埼玉県朝霞市' ||
          obj.value == '埼玉県新座市' ||
          obj.value == '埼玉県志木市' ||
          obj.value == '神奈川県鎌倉市' ||
          obj.value == '神奈川県逗子市' ||
          obj.value == '神奈川県三浦郡葉山町') {
        return true;
      }
      else{
        return false;
      }
    }

    function setAlert5() {
      if (chkShikugun(document.getElementById('idPage:idForm:idKiboChiiki1'))) {
        document.getElementById('idAlert5').innerText = '火葬料金として6万円の追加費用がかかる地域です';
      } else {
        document.getElementById('idAlert5').innerText = '';
      }
    }

    function setAlert6() {
      if ((document.getElementById('idPage:idForm:idKiboChiiki1').value != '' && document.getElementById('idPage:idForm:idTaishoshaJuminhyoChiiki').value != '' &&
          document.getElementById('idPage:idForm:idKiboChiiki1').value != document.getElementById('idPage:idForm:idTaishoshaJuminhyoChiiki').value && 
          document.getElementById('idPage:idForm:idKiboChiiki1').value != document.getElementById('idPage:idForm:idMoshuJuminhyoChiiki').value) ||
        (document.getElementById('idPage:idForm:idKiboChiiki1').value != '' && document.getElementById('idPage:idForm:idMoshuJuminhyoChiiki').value != '' &&
          document.getElementById('idPage:idForm:idKiboChiiki1').value != document.getElementById('idPage:idForm:idMoshuJuminhyoChiiki').value && 
          document.getElementById('idPage:idForm:idKiboChiiki1').value != document.getElementById('idPage:idForm:idTaishoshaJuminhyoChiiki').value)) {
        document.getElementById('idAlert6').innerText = '希望地域が住民票と異なります';
      } else {
        document.getElementById('idAlert6').innerText = '';
      }
    }

    function setAlert8(){
      document.getElementById('idAlert8').innerText = '';
      var checkIdSimpleYasugoKeiyakuLkid = document.getElementById('idPage:idForm:idSimpleYasugoKeiyaku_lkid').value;
      if(checkIdSimpleYasugoKeiyakuLkid != '' && checkIdSimpleYasugoKeiyakuLkid != '000000000000000'){
        var result = sforce.connection.query("SELECT Id, Teikeisaki__r.CanPtWebSokyakuExp__c FROM Keiyaku__c where Id='" + checkIdSimpleYasugoKeiyakuLkid + "'"); 
        var records = result.getArray("records");
        for (var i=0; i<records.length; i++) {
          var ptWebSokyakuFlg = records[i].Teikeisaki__r.CanPtWebSokyakuExp__c;
          if(ptWebSokyakuFlg == 'true'){
            document.getElementById('idAlert8').innerText = 'パートナーWeb送客可能葬儀社です';
          }
        }
      }
    }

    function setAnketoSofuHohoAlert(){

      var msg = '';
      document.getElementById('idAnketoSofuHohoAlert').innerText = '';
      var mPhoneNo = document.getElementById('idPage:idForm:idMobilePhone').value;

      if(document.getElementById('idPage:idForm:idAnketoSodanshaSMS').checked){
        if(mPhoneNo == ''){
          msg += '・携帯電話が未入力です';
        }
        else {
          mPhoneNo = mPhoneNo.replace(/-/g, '');
          if(!mPhoneNo.match(/^0[7-9]0[0-9]{8}$/)){
            msg += '・携帯電話は11桁( - 除く)で、SMS送信可能(070、080、090)な番号を登録してください';
          }
        }
      }

      if(document.getElementById('idPage:idForm:idAnketoSodanshaEmail').checked && 
          document.getElementById('idPage:idForm:idMail1').value == ''){
        if(msg != ''){
          msg += '\r\n';
        }
        msg += '・Mailが未入力です';
      }

      document.getElementById('idAnketoSofuHohoAlert').innerText = msg;
    }

    function setJizenJunbiSheetJryobiAlert(){
      var msg = '';
      if(document.getElementById('idPage:idForm:idJizenJunbiSheetJuryobi').value != '' && 
          !document.getElementById('idPage:idForm:idSodanshaMemberTourokuZumi').checked){
        msg = '【受領日】は【会員区分】が "よりそう会員" の場合に入力可能です。';
      }

      document.getElementById('idJizenJunbiSheetJryobiAlert').innerText = msg;
    }

    function setUmieCrossSellArert(){
      var txtAlert10 = ''
      if(document.getElementById('idPage:idForm:idHakaUmuKubun').value == '無'){
        txtAlert10 = '永代供養・海洋散骨提案対象（墓なし）';
      }
      document.getElementById('idAlert10').innerText = txtAlert10;
    }

    function setMerumagaKyodakuAlert(){
      var txtAlert = ''
      if(document.getElementById('idPage:idForm:idSodanshaMemberTourokuZumi').checked && 
        !document.getElementById('idPage:idForm:idTel_Sogifollow_SmsPermission').checked){
        txtAlert = 'お客様に電話流入葬儀フォローSMS許諾を確認してください。';
      }
      document.getElementById('idMerumagaKyodakuAlert').innerText = txtAlert;
    }

    function setHikaiinShikigoAnketoAlert(){
      var txtAlert = ''
      if(!document.getElementById('idPage:idForm:idSodanshaMemberTourokuZumi').checked){
        txtAlert = '非会員は案内できません';
      }
      document.getElementById('idHikaiinShikigoAnketoAlert').innerText = txtAlert;
    }

    function talkscript(talkscriptKey) {
      document.getElementById("idTalkTRdo").checked = true;
      setTalkScript(talkscriptKey);
    }

    function openSaijokensaku(refId) {
      if(window.event.keyCode == 13){
        openSaijokensakuClick(refId);
      }
    }

    function openSaijokensakuClick(refId){
      var areaId = document.getElementById('idPage:idForm:' + refId + '_lkid').value;
      var areaName = document.getElementById('idPage:idForm:' + refId).value;
      var kaiinannai = 'true';
      var jizenAnketoDate = document.getElementById('idPage:idForm:idJizenJunbiSheetJuryobi').value;
      if (jizenAnketoDate != null && jizenAnketoDate != '') kaiinannai = 'false';
      if (areaId != '' && areaId != '000000000000000') {
        srcUp('/apex/FuneralCompany?p1=' + areaId + '&p2=' + areaName + '&oppId=' + '{!oppId}' + '&kaiinannai=' + kaiinannai);
      }
      else{
        alert('「エリア」はマスタから選択してください');
      }
    }

    function openSaijokensakuShiryoSofuClick(){
      var areaId = document.getElementById('idPage:idForm:idKiboChiiki1_lkid').value;
      var areaName = document.getElementById('idPage:idForm:idKiboChiiki1').value;
      if (areaId == '000000000000000') areaId = '';
      
      var kaiinannai = 'true';
      var jizenAnketoDate = document.getElementById('idPage:idForm:idJizenJunbiSheetJuryobi').value;
      if (jizenAnketoDate != null && jizenAnketoDate != '') kaiinannai = 'false';
      srcUp('/apex/FuneralCompany?p1=' + areaId + '&p2=' + areaName + '&oppId=' + '{!oppId}' + '&kaiinannai=' + kaiinannai);
    }

    function clearAreaId(refId){
      if(document.getElementById(refId + 'HiddenLkid').value == document.getElementById('idPage:idForm:' + refId + '_lkid').value && 
          document.getElementById(refId + 'HiddenName').value != document.getElementById('idPage:idForm:' + refId).value){
        document.getElementById(refId + 'HiddenLkid').value = '';
        document.getElementById('idPage:idForm:' + refId + '_lkid').value = '';
      }
    }

    function clearKetteiSogishaId(){
      if(document.getElementById('idSimpleYasugoKeiyakuHiddenLkid').value == document.getElementById('idPage:idForm:idSimpleYasugoKeiyaku_lkid').value && 
          document.getElementById('idSimpleYasugoKeiyakuHiddenName').value != document.getElementById('idPage:idForm:idSimpleYasugoKeiyaku').value){
        document.getElementById('idSimpleYasugoKeiyakuHiddenLkid').value = '';
        document.getElementById('idPage:idForm:idSimpleYasugoKeiyaku_lkid').value = '';
        document.getElementById('idAlert8').innerText = '';
      }
    }

    function clearKiboChiiki(refId){
      var areaId = document.getElementById('idPage:idForm:' + refId + '_lkid').value;
      var areaName = document.getElementById('idPage:idForm:' + refId).value;
      document.getElementById(refId + 'HiddenLkid').value = areaId;
      document.getElementById(refId + 'HiddenName').value = areaName;
    }

    function openSelectValue(){
      if(window.event.keyCode == 13){
        return true;
      }
    }

    function addArea(areaIndex) {
      document.getElementById('idAddAreaButton' + areaIndex).style.display = 'none';
      document.getElementById('idAddAreaTr' + areaIndex).style.display = '';
    }

    function setArea(juminhyoArea) {
      var kiboAreaLkid = document.getElementById('idPage:idForm:idKiboChiiki1_lkid').value;
      if (kiboAreaLkid == '' || kiboAreaLkid == '000000000000000') {
        document.getElementById('idPage:idForm:' + juminhyoArea + '_lkid').value = '';
        document.getElementById('idPage:idForm:' + juminhyoArea).value = '';
      } else {
        var kiboAreaName = document.getElementById('idPage:idForm:idKiboChiiki1').value;
        document.getElementById('idPage:idForm:' + juminhyoArea + '_lkid').value = kiboAreaLkid;
        document.getElementById('idPage:idForm:' + juminhyoArea).value = kiboAreaName;
      }
    }

    function setAreaEnter(val){
      if(window.event.keyCode == 13){
        setArea(val);
      }
    }

    function sycValue(syc, val) {
      document.getElementById('idPage:idForm:' + syc).value = val.value;
    }

    function sycValue2(val, val2) {
      var sel = document.getElementById('idPage:idForm:' + val).options;
      var sel2 = document.getElementById('idPage:idForm:' + val2).options;
      for(var i=0; i<sel.length; i++){
        sel2[i].selected = sel[i].selected;
      }
    }

    function setOmukaesakiJusho(pPostal, pState, pCity, pStreet) {
      var omukaesakiJusho = document.getElementById('idPage:idForm:' + pPostal).value +
        document.getElementById('idPage:idForm:' + pState).value +
        document.getElementById('idPage:idForm:' + pCity).value +
        document.getElementById('idPage:idForm:' + pStreet).value;
        document.getElementById('idPage:idForm:idOmukaeSakiJusho1').value = omukaesakiJusho;
        document.getElementById('idPage:idForm:idOmukaeSakiJusho2').value = omukaesakiJusho;
    }

    function setGoanchisakiJusho(pPostal, pState, pCity, pStreet) {
      var goanchisakiJusho = document.getElementById('idPage:idForm:' + pPostal).value +
        document.getElementById('idPage:idForm:' + pState).value +
        document.getElementById('idPage:idForm:' + pCity).value +
        document.getElementById('idPage:idForm:' + pStreet).value;
        document.getElementById('idPage:idForm:idGoanchisakiJusho').value = goanchisakiJusho;
        document.getElementById('idPage:idForm:idGoanchisakiJusho2').value = goanchisakiJusho;
    }

    function setSofusakiJusho(pSei, pMei, pPostal, pState, pCity, pStreet, pMail, pPhone) {
        var atenaTemp = '';
        if(document.getElementById('idPage:idForm:' + pSei).value != null) atenaTemp += document.getElementById('idPage:idForm:' + pSei).value;
        if(document.getElementById('idPage:idForm:' + pMei).value != null) atenaTemp += ' ' + document.getElementById('idPage:idForm:' + pMei).value;
        document.getElementById('idPage:idForm:idAtena').value = atenaTemp;
        document.getElementById('idPage:idForm:idPostalCode5').value = document.getElementById('idPage:idForm:' + pPostal).value;
        document.getElementById('idPage:idForm:idState5').value = document.getElementById('idPage:idForm:' + pState).value;
        document.getElementById('idPage:idForm:idCity5').value = document.getElementById('idPage:idForm:' + pCity).value;
        document.getElementById('idPage:idForm:idStreet5').value = document.getElementById('idPage:idForm:' + pStreet).value;
        document.getElementById('idPage:idForm:idSofuShiryoMail').value = document.getElementById('idPage:idForm:' + pMail).value;
        document.getElementById('idPage:idForm:idSofuShiryoFax').value = document.getElementById('idPage:idForm:' + pPhone).value;
    }

    function setOnakunariColor(val, errflg){
      if(document.getElementById('idPage:idForm:' + val).value == null || document.getElementById('idPage:idForm:' + val).value == ''){
        document.getElementById('idPage:idForm:' + val).style.backgroundColor = 'pink';
        return true;
      }
      else{
        document.getElementById('idPage:idForm:' + val).style.backgroundColor = 'yellow';
        return errflg;
      }
    }

    function checkOnakunari() {
      var errflg = false;
      errflg = setOnakunariColor('idSodanshaSeiKana1', errflg);
      if ((document.getElementById('idPage:idForm:idMobilePhone').value != null && document.getElementById('idPage:idForm:idMobilePhone').value != '') || 
          (document.getElementById('idPage:idForm:idPhone').value != null && document.getElementById('idPage:idForm:idPhone').value != '')) {
        document.getElementById('idPage:idForm:idMobilePhone').style.backgroundColor = 'yellow';
        document.getElementById('idPage:idForm:idPhone').style.backgroundColor = 'yellow';
      }
      else{
        document.getElementById('idPage:idForm:idMobilePhone').style.backgroundColor = 'pink';
        document.getElementById('idPage:idForm:idPhone').style.backgroundColor = 'pink';
        errflg = true;
      }
      errflg = setOnakunariColor('idTaishoshaSeiKana', errflg);
      errflg = setOnakunariColor('idKiboKeishiki', errflg);

      if (document.getElementById('idPage:idForm:idMonkArrangements').value == '未提案') {
        document.getElementById('idPage:idForm:idMonkArrangements').style.backgroundColor = 'pink';
      }
      errflg = setOnakunariColor('idKiboGoanchisaki', errflg);
      errflg = setOnakunariColor('idKiboGoanchisaki2', errflg);
      errflg = setOnakunariColor('idBodaijinoUmu', errflg);
      errflg = setOnakunariColor('idKiboChiiki1', errflg);
      errflg = setOnakunariColor('idZokugaraSodanshaNitottenoTaishosha1', errflg);
      errflg = setOnakunariColor('idZokugaraSodanshaNitottenoTaishosha2', errflg);
      errflg = setOnakunariColor('idTaishoshaJuminhyoChiiki', errflg);
      errflg = setOnakunariColor('idKiboShiharaiHoho1', errflg);
      errflg = setOnakunariColor('idKiboShiharaiHoho2', errflg);
      errflg = setOnakunariColor('idOmukaeSakiName1', errflg);
      errflg = setOnakunariColor('idOmukaeSakiName2', errflg);
      errflg = setOnakunariColor('idOmukaeSakiJusho1', errflg);
      errflg = setOnakunariColor('idOmukaeSakiJusho2', errflg);
      if (document.getElementById('idPage:idForm:idShikigoAnketo').value == '' || document.getElementById('idPage:idForm:idShikigoAnketo').value == '未提案'){
        document.getElementById('idPage:idForm:idShikigoAnketo').style.backgroundColor = 'red';
        errflg = true;
      }

      if (errflg) {
        alert('未入力項目があります');
      }
      else {
        alert('未入力項目はありません');
      }

    }

    function taishoshaJuminhyoClearColor(){
      if(document.getElementById('idPage:idForm:idTaishoshaJuminhyoChiiki').value != null && document.getElementById('idPage:idForm:idTaishoshaJuminhyoChiiki').value != ''){
        document.getElementById('idPage:idForm:idTaishoshaJuminhyoChiiki').style.backgroundColor = '#fff';
      }
    }

    function clearOnakunari(id) {
      var el = document.getElementById('idPage:idForm:' + id);
      if (el.value != null && el.value != '') {
        el.style.backgroundColor = '#fff';
      }
    }

    function clearOnakunariSodansha() {
      var sodansha1 = document.getElementById('idPage:idForm:idSodanshaSeiKana1').value;
      if (sodansha1 != null && sodansha1 != '') {
        document.getElementById('idPage:idForm:idSodanshaSeiKana1').style.backgroundColor = '#fff';
      }
    }

    function clearOnakunariPhone() {
      var mbPhone = document.getElementById('idPage:idForm:idMobilePhone').value;
      var phone = document.getElementById('idPage:idForm:idPhone').value;
      if ((mbPhone != null && mbPhone != '') || (phone != null && phone != '')) {
        document.getElementById('idPage:idForm:idMobilePhone').style.backgroundColor = '#fff';
        document.getElementById('idPage:idForm:idPhone').style.backgroundColor = '#fff';
      }
    }

    function clearKihoshiharaiHoho() {
      var kihoshiharaiHoho1 = document.getElementById('idPage:idForm:idKiboShiharaiHoho1').value;
      var kihoshiharaiHoho2 = document.getElementById('idPage:idForm:idKiboShiharaiHoho2').value;
      if ((kihoshiharaiHoho1 != null && kihoshiharaiHoho1 != '') || (kihoshiharaiHoho2 != null && kihoshiharaiHoho2 != '')) {
        document.getElementById('idPage:idForm:idKiboShiharaiHoho1').style.backgroundColor = '#fff';
        document.getElementById('idPage:idForm:idKiboShiharaiHoho2').style.backgroundColor = '#fff';
      }
    }

    function clearOmukaesakiName() {
      var omukaeSakiName1 = document.getElementById('idPage:idForm:idOmukaeSakiName1').value;
      var omukaeSakiName2 = document.getElementById('idPage:idForm:idOmukaeSakiName2').value;
      if ((omukaeSakiName1 != null && omukaeSakiName1 != '') || (omukaeSakiName2 != null && omukaeSakiName2 != '')) {
        document.getElementById('idPage:idForm:idOmukaeSakiName1').style.backgroundColor = '#fff';
        document.getElementById('idPage:idForm:idOmukaeSakiName2').style.backgroundColor = '#fff';
      }
    }

    function clearOmukaesakiJusho() {
      var omukaeSakiJusho1 = document.getElementById('idPage:idForm:idOmukaeSakiJusho1').value;
      var omukaeSakiJusho2 = document.getElementById('idPage:idForm:idOmukaeSakiJusho2').value;
      if ((omukaeSakiJusho1 != null && omukaeSakiJusho1 != '') || (omukaeSakiJusho2 != null && omukaeSakiJusho2 != '')) {
        document.getElementById('idPage:idForm:idOmukaeSakiJusho1').style.backgroundColor = '#fff';
        document.getElementById('idPage:idForm:idOmukaeSakiJusho2').style.backgroundColor = '#fff';
      }
    }

    function setSodanshaAddress(pPostal){
      if(window.event.keyCode == 13){
        sodanshaPostalCodeCheck(pPostal);
      }
    }

    function sodanshaPostalCodeCheck(pPostal) {
      var val = document.getElementById('idPage:idForm:' + pPostal).value;
      if (postalCodeCheck(val)) {
        SwitchRemoteAction.getJSONByPostCD(
          val,
          function(result, event) {
            if (result.message == '') {
              document.getElementById('idPage:idForm:idSodanshaState1').value = result.address1;
              document.getElementById('idPage:idForm:idSodanshaCity1').value = result.address2;
              document.getElementById('idPage:idForm:idSodanshaStreet1').value = result.address3;
            } else {
              alert(result.message);
            }
          }, {
            escape: true
          }
        );
      }
    }

    function shiryoSofuPostalCodeCheck(pPostal, pState, pCity, pStreet) {
      var val = document.getElementById('idPage:idForm:' + pPostal).value;
      if (postalCodeCheck(val)) {
        SwitchRemoteAction.getJSONByPostCD(
          val,
          function(result, event) {
            if (result.message == '') {
              document.getElementById('idPage:idForm:' + pState).value = result.address1;
              document.getElementById('idPage:idForm:' + pCity).value = result.address2;
              document.getElementById('idPage:idForm:' + pStreet).value = result.address3;
            } else {
              alert(result.message);
            }
          }, {
            escape: true
          }
        );
      }
    }

    function setTaishoshaAddress(){
      if(window.event.keyCode == 13){
        taishoshaPostalCodeCheck();
      }
    }

    function taishoshaPostalCodeCheck() {
      var val = document.getElementById('idPage:idForm:idTaishoshaPostalCode').value;
      if (postalCodeCheck(val)) {
        SwitchRemoteAction.getJSONByPostCD(
          val,
          function(result, event) {
            if (result.message == '') {
              document.getElementById('idPage:idForm:idTaishoshaState').value = result.address1;
              document.getElementById('idPage:idForm:idTaishoshaCity').value = result.address2;
              document.getElementById('idPage:idForm:idTaishoshaStreet').value = result.address3;
            } else {
              alert(result.message);
            }
          }, {
            escape: true
          }
        );
      }
    }

    function postalCodeCheck(val) {
      if (val == '' || !val.match(/^\d{3}-?\d{4}$/)) {
        alert('半角数字 XXX-XXXX か XXXXXXX の形式で入力してください');
        return false;
      }
      return true;
    }

    function mailCheck(val) {
      if (val == '' || !val.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)) {
        return false;
      }
      return true;
    }

    function telNumberCheck() {
      if (document.getElementById('idPage:idForm:idMobilePhone').value != '') {
        document.getElementById('idPage:idForm:idSodanshaYusenDenwaKubun').value = '携帯電話';
      } else if (document.getElementById('idPage:idForm:idPhone').value != '') {
        document.getElementById('idPage:idForm:idSodanshaYusenDenwaKubun').value = '固定電話';
      }
    }

    function checkSogishaKaden() {
      if (document.getElementById('idPage:idForm:idSogishaKadenKeiyaku').value == '') {
        alert('「葬儀社」を設定してください');
        return false;
      }
      if (document.getElementById('idPage:idForm:idTaioFukaRiyu').value == '') {
        alert('「対応不可理由」を設定してください');
        return false;
      } else if (document.getElementById('idPage:idForm:idTaioFukaRiyu').value == 'その他' &&
        document.getElementById('idPage:idForm:idTaioFukaRiyuSonota').value == '') {
        alert('「対応不可理由」が"その他"の場合は「対応不可理由その他」を入力してください');
        return false;
      }
      checkSogishaKadenJs();
    }

    function displayCalendarDate(val) {
      DatePicker.pickDate(true, 'idPage:idForm:' + val, false);
      var vScrollDistance = document.getElementById('idPage:idForm:' + val).getBoundingClientRect();
      document.getElementById('datePicker').style.top = vScrollDistance.top + 19 + 'px';
    }

    function checkInputItem(val) {

      showLoadingDialog();

      var checkIdMobilePhone = document.getElementById('idPage:idForm:idMobilePhone').value;
      if (checkIdMobilePhone != '' && !libphonenumber.isValidNumber(checkIdMobilePhone, 'JP')) {
        alert('「携帯電話」は正しい形式で入力してください');
        hideLoadingDialog();
        return false;
      }

      var checkIdPhone = document.getElementById('idPage:idForm:idPhone').value;
      if (checkIdPhone != '' && !libphonenumber.isValidNumber(checkIdPhone, 'JP')) {
        alert('「固定電話」は正しい形式で入力してください');
        hideLoadingDialog();
        return false;
      }

      var checkIdMail = document.getElementById('idPage:idForm:idMail1').value;
      if (checkIdMail != '' && !mailCheck(checkIdMail)) {
        alert('「メールアドレス」は正しい形式で入力してください');
        hideLoadingDialog();
        return false;
      }

      var checkIdWarekiNen = document.getElementById('idPage:idForm:idWarekiNen').value;
      var checkIdWarekiTsuki = document.getElementById('idPage:idForm:idWarekiTsuki').value;
      var checkIdWarekiHi = document.getElementById('idPage:idForm:idWarekiHi').value;
      if ((checkIdWarekiNen != '' && checkIdWarekiNen.match(/[^0-9]+/)) ||
        (checkIdWarekiTsuki != '' && checkIdWarekiTsuki.match(/[^0-9]+/)) ||
        (checkIdWarekiHi != '' && checkIdWarekiHi.match(/[^0-9]+/))) {
        alert('「生年月日」は半角数字で入力してください');
        hideLoadingDialog();
        return false;
      }

      var checkIdBotsunengappiSeireki = document.getElementById('idPage:idForm:idBotsunengappiSeireki').value;
      if (checkIdBotsunengappiSeireki != '' && !checkIdBotsunengappiSeireki.match(/^\d{4}\/\d{1,2}\/\d{1,2}$/)) {
        alert('「没年月日」は yyyy/MM/dd の形式で入力してください');
        hideLoadingDialog();
        return false;
      }

      var checkIdTaishoshaPostalCode = document.getElementById('idPage:idForm:idTaishoshaPostalCode').value;
      if (checkIdTaishoshaPostalCode != '' && !checkIdTaishoshaPostalCode.match(/^\d{3}-?\d{4}$/)) {
        alert('「(対象者)郵便番号」は XXX-XXXX の形式で入力してください');
        hideLoadingDialog();
        return false;
      }

      var checkIdTaishoshaState = document.getElementById('idPage:idForm:idTaishoshaState').value;
      if(checkState(checkIdTaishoshaState)){
        alert('「(対象者)都道府県」は不正な値です');
        hideLoadingDialog();
        return false;
      }

      var checkIdSanretsushaShinzokuFrom = document.getElementById('idPage:idForm:idSanretsushaShinzokuFrom').value;
      var checkIdSanretsushaShinzokuTo = document.getElementById('idPage:idForm:idSanretsushaShinzokuTo').value;
      var checkIdSanretsushaShinzokuigaiFrom = document.getElementById('idPage:idForm:idSanretsushaShinzokuigaiFrom').value;
      var checkIdSanretsushaShinzokuigaiTo = document.getElementById('idPage:idForm:idSanretsushaShinzokuigaiTo').value;
      if ((checkIdSanretsushaShinzokuFrom != '' && checkIdSanretsushaShinzokuFrom.match(/[^0-9]+/)) ||
        (checkIdSanretsushaShinzokuTo != '' && checkIdSanretsushaShinzokuTo.match(/[^0-9]+/)) ||
        (checkIdSanretsushaShinzokuigaiFrom != '' && checkIdSanretsushaShinzokuigaiFrom.match(/[^0-9]+/)) ||
        (checkIdSanretsushaShinzokuigaiTo != '' && checkIdSanretsushaShinzokuigaiTo.match(/[^0-9]+/))) {
        alert('「参列者」は半角数字で入力してください');
        hideLoadingDialog();
        return false;
      }

      var checkIdMonkArrangements = document.getElementById('idPage:idForm:idMonkArrangements').value;
      if(checkIdMonkArrangements == ''){
        alert('「僧侶手配希望」を入力してください');
        hideLoadingDialog();
        return false;
      }

      var checkIdKiboChiiki1Lkid = document.getElementById('idPage:idForm:idKiboChiiki1_lkid').value;
      var checkIdKiboChiiki1 = document.getElementById('idPage:idForm:idKiboChiiki1').value;
      var checkIdKiboChiiki2Lkid = document.getElementById('idPage:idForm:idKiboChiiki2_lkid').value;
      var checkIdKiboChiiki2 = document.getElementById('idPage:idForm:idKiboChiiki2').value;
      var checkIdKiboChiiki3Lkid = document.getElementById('idPage:idForm:idKiboChiiki3_lkid').value;
      var checkIdKiboChiiki3 = document.getElementById('idPage:idForm:idKiboChiiki3').value;
      var checkIdKiboChiiki4Lkid = document.getElementById('idPage:idForm:idKiboChiiki4_lkid').value;
      var checkIdKiboChiiki4 = document.getElementById('idPage:idForm:idKiboChiiki4').value;
      if((checkIdKiboChiiki1 != '' && (checkIdKiboChiiki1Lkid == '000000000000000' || checkIdKiboChiiki1Lkid == '')) || 
          (checkIdKiboChiiki2 != '' && (checkIdKiboChiiki2Lkid == '000000000000000' || checkIdKiboChiiki2Lkid == '')) || 
          (checkIdKiboChiiki3 != '' && (checkIdKiboChiiki3Lkid == '000000000000000' || checkIdKiboChiiki3Lkid == '')) || 
          (checkIdKiboChiiki4 != '' && (checkIdKiboChiiki4Lkid == '000000000000000' || checkIdKiboChiiki4Lkid == ''))){
        alert('「エリア」はマスタから選択してください');
        hideLoadingDialog();
        return false;
      }

      var checkIdTaishoshaJuminhyoChiikiLkid = document.getElementById('idPage:idForm:idTaishoshaJuminhyoChiiki_lkid').value;
      var checkIdTaishoshaJuminhyoChiiki = document.getElementById('idPage:idForm:idTaishoshaJuminhyoChiiki').value;
      var checkIdMoshuJuminhyoChiikiLkid = document.getElementById('idPage:idForm:idMoshuJuminhyoChiiki_lkid').value;
      var checkIdMoshuJuminhyoChiiki = document.getElementById('idPage:idForm:idMoshuJuminhyoChiiki').value;
      if((checkIdTaishoshaJuminhyoChiiki != '' && (checkIdTaishoshaJuminhyoChiikiLkid == '000000000000000' || checkIdTaishoshaJuminhyoChiikiLkid == '')) || 
          (checkIdMoshuJuminhyoChiiki != '' && (checkIdMoshuJuminhyoChiikiLkid == '000000000000000' || checkIdMoshuJuminhyoChiikiLkid == ''))){
        alert('「エリア」はマスタから選択してください');
        hideLoadingDialog();
        return false;
      }

      var checkIdSodanshaPostalCode = document.getElementById('idPage:idForm:idSodanshaPostalCode1').value;
      if (checkIdSodanshaPostalCode != '' && !checkIdSodanshaPostalCode.match(/^\d{3}-?\d{4}$/)) {
        alert('「(資料送付)郵便番号」は XXX-XXXX の形式で入力してください');
        hideLoadingDialog();
        return false;
      }

      var checkIdSodanshaState = document.getElementById('idPage:idForm:idSodanshaState1').value;
      if(checkState(checkIdSodanshaState)){
        alert('「(資料送付)都道府県」は不正な値です');
        hideLoadingDialog();
        return false;
      }

      if(document.getElementById('idPage:idForm:idJizenJunbiSheetJuryobi').value != '' && 
          !document.getElementById('idPage:idForm:idSodanshaMemberTourokuZumi').checked){
        alert('「事前アンケート受領日」は【メンバー区分】が "よりそう会員" の場合に入力可能です');
        hideLoadingDialog();
        return false;
      }

      var checkIdSimpleYasugoKeiyakuLkid = document.getElementById('idPage:idForm:idSimpleYasugoKeiyaku_lkid').value;
      var checkIdSimpleYasugoKeiyaku = document.getElementById('idPage:idForm:idSimpleYasugoKeiyaku').value;
      if(checkIdSimpleYasugoKeiyaku != '' && (checkIdSimpleYasugoKeiyakuLkid == '000000000000000' || checkIdSimpleYasugoKeiyakuLkid == '')){
        alert('「決定葬儀社名」はマスタから選択してください');
        hideLoadingDialog();
        return false;
      }

      var checkIdShohinLkid = document.getElementById('idPage:idForm:idShohin_lkid').value;
      var checkIdShohin = document.getElementById('idPage:idForm:idShohin').value;
      if(checkIdShohin != '' && (checkIdShohinLkid == '000000000000000' || checkIdShohinLkid == '')){
        alert('「商品」はマスタから選択してください');
        hideLoadingDialog();
        return false;
      }

      var teianObjList = document.getElementById('idCrossSellingTeianTable');
      var vfIndex = 0;
      for (var i = 1; i < teianObjList.rows.length; i++) {
        var crossSellingSakiShodanId = document.getElementById('idPage:idForm:idCrossSellingTeianList:' + vfIndex + ':idHiddenCrossSellingSakiShodanId').value;
        if(crossSellingSakiShodanId != ''){
          if(teianObjList.rows[i].cells[1].children[0].value == '' || 
              document.getElementById('idPage:idForm:idCrossSellingTeianList:' + vfIndex + ':idTeianShaRef').value == '' || 
              document.getElementById('idPage:idForm:idCrossSellingTeianList:' + vfIndex + ':idTeianbi').value == '' || 
              teianObjList.rows[i].cells[4].children[0].value == ''){
            alert('クロスセル先の商談が作成されている場合は\r\n「提案商品」、「提案者」、「提案日」、「提案結果」を空欄にできません');

            hideLoadingDialog();
            return false;
          }
        }
        else{
          if(
             (teianObjList.rows[i].cells[1].children[0].value != '' || 
              document.getElementById('idPage:idForm:idCrossSellingTeianList:' + vfIndex + ':idTeianShaRef').value != '' || 
              document.getElementById('idPage:idForm:idCrossSellingTeianList:' + vfIndex + ':idTeianbi').value != '' || 
              teianObjList.rows[i].cells[4].children[0].value != '') && 
             (teianObjList.rows[i].cells[1].children[0].value == '' || 
              document.getElementById('idPage:idForm:idCrossSellingTeianList:' + vfIndex + ':idTeianShaRef').value == '' || 
              document.getElementById('idPage:idForm:idCrossSellingTeianList:' + vfIndex + ':idTeianbi').value == '' || 
              teianObjList.rows[i].cells[4].children[0].value == '')
            ){
            alert('「提案商品」、「提案者」、「提案日」、「提案結果」の何れかを入力した場合は全て入力してください');

            hideLoadingDialog();
            return false;
          }
        }
        
        var crossSellTeianbi = document.getElementById('idPage:idForm:idCrossSellingTeianList:' + vfIndex + ':idTeianbi').value;
        if(crossSellTeianbi != '' && !crossSellTeianbi.match(/^[0-9]{4}\/[0-9]{1,2}\/[0-9]{1,2}$/)){
          alert('提案日は「YYYY/MM/DD」の形式で入力してください');
          hideLoadingDialog();
          return false;
        }

        vfIndex++;
      }

      var jizenJunbiSheetGoteishutsuShudan = document.getElementById('idPage:idForm:idJizenJunbiSheetGoteishutsuShudan').value;
      var jizenJunbiSheetDairiNyuryokuTantosha = document.getElementById('idPage:idForm:idJizenJunbiSheetDairiNyuryokuTantosha').value;
      if(jizenJunbiSheetGoteishutsuShudan == '代理入力' && jizenJunbiSheetDairiNyuryokuTantosha == ''){
        alert('「ご提出手段」が"代理入力"の場合は「代理入力者」を設定してください');
        hideLoadingDialog();
        return false;
      }


      if (val == '1') {
        temporarilySaveJs();
      } else {
        saveJs();
      }

    }

    function changeLabelColor(pid, val){
      if(val.checked){
        document.getElementById('idPage:idForm:' + pid).style.color = 'black';
      }
      else{
        document.getElementById('idPage:idForm:' + pid).style.color = 'red';
      }
    }

    function changeLabelColor2(pid, val){
      if(val.checked){
        document.getElementById('idPage:idForm:' + pid).style.color = 'red';
      }
      else{
        document.getElementById('idPage:idForm:' + pid).style.color = 'black';
      }
    }

    function enterActive(val){
      if( window.event.keyCode == 13 ){
        var textarea = val;

        var sentence = textarea.value;
        var len      = sentence.length;
        var pos      = textarea.selectionStart;

        var before   = sentence.substr(0, pos);
        var word     = '\r\n';
        var after    = sentence.substr(pos, len);

        sentence = before + word + after;

        textarea.value = sentence;
        textarea.setSelectionRange(pos + 1, pos + 1);
      }
    }

    document.onkeypress = enter;
    function enter(){
      if( window.event.keyCode == 13 ){
        return false;
      }
    }

    function checkState(cState){
      if(cState == '' || 
          cState == '北海道' || 
          cState == '青森県' || 
          cState == '岩手県' || 
          cState == '宮城県' || 
          cState == '秋田県' || 
          cState == '山形県' || 
          cState == '福島県' || 
          cState == '茨城県' || 
          cState == '栃木県' || 
          cState == '群馬県' || 
          cState == '埼玉県' || 
          cState == '千葉県' || 
          cState == '東京都' || 
          cState == '神奈川県' || 
          cState == '新潟県' || 
          cState == '富山県' || 
          cState == '石川県' || 
          cState == '福井県' || 
          cState == '山梨県' || 
          cState == '長野県' || 
          cState == '岐阜県' || 
          cState == '静岡県' || 
          cState == '愛知県' || 
          cState == '三重県' || 
          cState == '滋賀県' || 
          cState == '京都府' || 
          cState == '大阪府' || 
          cState == '兵庫県' || 
          cState == '奈良県' || 
          cState == '和歌山県' || 
          cState == '鳥取県' || 
          cState == '島根県' || 
          cState == '岡山県' || 
          cState == '広島県' || 
          cState == '山口県' || 
          cState == '徳島県' || 
          cState == '香川県' || 
          cState == '愛媛県' || 
          cState == '高知県' || 
          cState == '福岡県' || 
          cState == '佐賀県' || 
          cState == '長崎県' || 
          cState == '熊本県' || 
          cState == '大分県' || 
          cState == '宮崎県' || 
          cState == '鹿児島県' || 
          cState == '沖縄県'){
        return false;
      }
      else{
        return true;
      }
    }

    function openGoogleMap(val){
      var jusho = document.getElementById('idPage:idForm:' + val).value;
      window.open('https://www.google.co.jp/maps/place/' + jusho, 'Google Map');
    }

    function openGoanchisakiJusho(){
      var goanchisaki = document.getElementById('idPage:idForm:idKiboGoanchisaki').value;
      var dis = ''
      if(goanchisaki != '自宅' && goanchisaki != 'その他'){
        dis = 'none';
      }
      document.getElementById('idTHGoanchisakiJushoLabel').style.display = dis;
      document.getElementById('idTDGoanchisakiJushoValue').style.display = dis;
      document.getElementById('idTHGoanchisakiJushoLabel2_1').style.display = dis;
      document.getElementById('idTDGoanchisakiJushoValue2_1').style.display = dis;
      document.getElementById('idTHGoanchisakiJushoLabel2_2').style.display = dis;
      document.getElementById('idTDGoanchisakiJushoValue2_2').style.display = dis;
    }

    function chkShiharaiHoho(obj){
      var val = obj.value;
      if(val == '未確定'){
        document.getElementById("idShiharaiHohoMikakuteiRiyu1Tr").style.display = '';
        document.getElementById("idShiharaiHohoMikakuteiRiyu2Tr").style.display = 'flex';
      }
      else{
        document.getElementById("idShiharaiHohoMikakuteiRiyu1Tr").style.display = 'none';
        document.getElementById("idShiharaiHohoMikakuteiRiyu2Tr").style.display = 'none';
      }
    }

    function chkTaiouKanouRiyu(){
      var val = document.getElementById('idPage:idForm:idTaiouKanouRiyu').value;
      if(val == '対応可能（対応優先）'){
        document.getElementById("idTaioYusenRiyuShosaiLabel").style.display = '';
        document.getElementById("idTaioYusenRiyuShosaiValue").style.display = '';
      }
      else{
        document.getElementById("idTaioYusenRiyuShosaiLabel").style.display = 'none';
        document.getElementById("idTaioYusenRiyuShosaiValue").style.display = 'none';
      }
    }

      var time_limit=500; //制限時間
      var timer_id = null;

      $(document).on('keydown',function(e){
        if(e.keyCode != 9){
          if(this.activeElement.id.indexOf(':idKonnyusakiSogishaText') > 0) {
            clearTimeout(timer_id);
            timer_id=setTimeout(timer_func_konnyusakiSogisha(), time_limit);
          }
          else if(this.activeElement.id.indexOf(':idKonnyusakiKasobaText') > 0) {
            clearTimeout(timer_id);
            timer_id=setTimeout(timer_func_konnyusakiKasoba(), time_limit);
          }
          else if(this.activeElement.id.indexOf(':idKonnyusakiSaijoText') > 0) {
            clearTimeout(timer_id);
            timer_id=setTimeout(timer_func_konnyusakiSaijo(), time_limit);
          }
        }
      });

      function timer_func_konnyusakiSogisha(){
        document.getElementById('idPage:idForm:idHidKonnyusakiSogishaId').value = '';
        var prm01 = document.getElementById('idPage:idForm:idKonnyusakiSogishaText').value;
        if(prm01.length > 1) {
          SwitchRemoteAction.rmtActGetKonnyusakiSogisha(
            prm01,
            function(result, event) {
              if (result == null || result == '') {
                document.getElementById('hidKonnyusakiSogishaText').style.display = 'none';
                return false;
              }
              else{
                clearTimeout(timer_id);
                timer_id=null;

                var targetElement = document.getElementById('idPage:idForm:idKonnyusakiSogishaText');
                var clientRect = targetElement.getBoundingClientRect();
                var x = clientRect.left;
                var y = clientRect.top + 19;

                var tmp01 = result.length;
                var div_element = document.createElement("div")
                var tmpstr = '<div>';
                if(Number(tmp01) > 0) {
                  for (i=0; i<tmp01;i++) {
                    tmpstr += '<div onclick=\"fncSetItemsKonnyusakiSogisha(\'' + result[i].Id + '\',\'' + result[i].Teikeisaki__r.Name + '\');return false;\" onmouseover=\"this.style.backgroundColor=\'#e3f3ff\'\" onMouseOut=\"this.style.backgroundColor=\'#FFFFFF\'\">';
                    tmpstr +=  result[i].Teikeisaki__r.Name;
                     if(result[i].Teikeisaki__r.NameShogo__c != undefined) { tmpstr += '　(' + result[i].Teikeisaki__r.NameShogo__c + ')'; }
                     if(result[i].Teikeisaki__r.BillingState != undefined) { tmpstr += '　(' + result[i].Teikeisaki__r.BillingState + ')'; }
                    tmpstr += '</div>';
                  }
                }
                tmpstr += '</div>';
                div_element.innerHTML = tmpstr;

                var parent_obj = document.getElementById('hidKonnyusakiSogishaText');
                while (parent_obj.hasChildNodes()) { parent_obj.removeChild(parent_obj.firstChild); }
                parent_obj.appendChild(div_element);
                document.getElementById('hidKonnyusakiSogishaText').style.display = 'block';
                document.getElementById('hidKonnyusakiSogishaText').style.top = y + 'px';
                document.getElementById('hidKonnyusakiSogishaText').style.left = x + 'px';

                return false;
              }
            },
            {
              escape: true
            }
          );
        } else {
          document.getElementById('hidKonnyusakiSogishaText').style.display = 'none';
        }
      }

      function timer_func_konnyusakiKasoba(){
        document.getElementById('idPage:idForm:idHidKonnyusakiKasobaId').value = '';
        var prm01 = document.getElementById('idPage:idForm:idKonnyusakiKasobaText').value;
        if(prm01.length > 1) {
          SwitchRemoteAction.rmtActGetKonnyusakiKasoba(
            prm01,
            function(result, event) {
              if (result == null || result == '') {
                document.getElementById('hidKonnyusakiKasobaText').style.display = 'none';
                return false;
              }
              else{
                clearTimeout(timer_id);
                timer_id=null;

                var targetElement = document.getElementById('idPage:idForm:idKonnyusakiKasobaText');
                var clientRect = targetElement.getBoundingClientRect();
                var x = clientRect.left;
                var y = clientRect.top + 19;

                var tmp01 = result.length;
                var div_element = document.createElement("div")
                var tmpstr = '<div>';
                if(Number(tmp01) > 0) {
                  for (i=0; i<tmp01;i++) {
                    tmpstr += '<div onclick=\"fncSetItemsKonnyusakiKasoba(\'' + result[i].Id + '\',\'' + result[i].Name + '\');return false;\" onmouseover=\"this.style.backgroundColor=\'#e3f3ff\'\" onMouseOut=\"this.style.backgroundColor=\'#FFFFFF\'\">';
                    tmpstr +=  result[i].Name + ' ';
                     if(result[i].State__c != undefined) { tmpstr += '(' + result[i].State__c + ')'; }
                    tmpstr += '</div>';
                  }
                }
                tmpstr += '</div>';
                div_element.innerHTML = tmpstr;

                var parent_obj = document.getElementById('hidKonnyusakiKasobaText');
                while (parent_obj.hasChildNodes()) { parent_obj.removeChild(parent_obj.firstChild); }
                parent_obj.appendChild(div_element);
                document.getElementById('hidKonnyusakiKasobaText').style.display = 'block';
                document.getElementById('hidKonnyusakiKasobaText').style.top = y + 'px';
                document.getElementById('hidKonnyusakiKasobaText').style.left = x + 'px';

                return false;
              }
            },
            {
              escape: true
            }
          );
        } else {
          document.getElementById('hidKonnyusakiKasobaText').style.display = 'none';
        }
      }

      function timer_func_konnyusakiSaijo(){
        document.getElementById('idPage:idForm:idHidKonnyusakiSaijoId').value = '';
        var prm01 = document.getElementById('idPage:idForm:idKonnyusakiSaijoText').value;
        if(prm01.length > 1) {
          SwitchRemoteAction.rmtActGetKonnyusakiSaijo(
            prm01,
            function(result, event) {
              if (result == null || result == '') {
                document.getElementById('hidKonnyusakiSaijoText').style.display = 'none';
                return false;
              }
              else{
                clearTimeout(timer_id);
                timer_id=null;

                var targetElement = document.getElementById('idPage:idForm:idKonnyusakiSaijoText');
                var clientRect = targetElement.getBoundingClientRect();
                var x = clientRect.left;
                var y = clientRect.top + 19;

                var tmp01 = result.length;
                var div_element = document.createElement("div")
                var tmpstr = '<div>';
                if(Number(tmp01) > 0) {
                  for (i=0; i<tmp01;i++) {
                    tmpstr += '<div onclick=\"fncSetItemsKonnyusakiSaijo(\'' + result[i].Id + '\',\'' + result[i].Name + '\');return false;\" onmouseover=\"this.style.backgroundColor=\'#e3f3ff\'\" onMouseOut=\"this.style.backgroundColor=\'#FFFFFF\'\">';
                    tmpstr +=  result[i].Name;
                     if(result[i].SeishikiSaijoMei__c != undefined) { tmpstr += '　(' + result[i].SeishikiSaijoMei__c + ')'; }
                     if(result[i].ShikugunRef__r.TodoufukenNameExp__c != undefined) { tmpstr += '　(' + result[i].ShikugunRef__r.TodoufukenNameExp__c + ')'; }
                    tmpstr += '</div>';
                  }
                }
                tmpstr += '</div>';
                div_element.innerHTML = tmpstr;

                var parent_obj = document.getElementById('hidKonnyusakiSaijoText');
                while (parent_obj.hasChildNodes()) { parent_obj.removeChild(parent_obj.firstChild); }
                parent_obj.appendChild(div_element);
                document.getElementById('hidKonnyusakiSaijoText').style.display = 'block';
                document.getElementById('hidKonnyusakiSaijoText').style.top = y + 'px';
                document.getElementById('hidKonnyusakiSaijoText').style.left = x + 'px';

                return false;
              }
            },
            {
              escape: true
            }
          );
        } else {
          document.getElementById('hidKonnyusakiSaijoText').style.display = 'none';
        }
      }

      function fncSetItems(pParam01,pParam02,prmIndex,shisetsuKubun) {
        document.getElementById(prmIndex).value = pParam02;
        document.getElementById('hidArea' + shisetsuKubun + pParam01).style.display = 'none';
      }

      function fncSetItemsKonnyusakiSogisha(pId, pName) {
        document.getElementById('idPage:idForm:idHidKonnyusakiSogishaId').value = pId;
        document.getElementById('idPage:idForm:idHidKonnyusakiSogishaName').value = pName;
        document.getElementById('idPage:idForm:idKonnyusakiSogishaText').value = pName;
        document.getElementById('hidKonnyusakiSogishaText').style.display = 'none';
        setKonnyusakiSogishaLink();
      }

      function fncSetItemsKonnyusakiKasoba(pId, pName) {
        document.getElementById('idPage:idForm:idHidKonnyusakiKasobaId').value = pId;
        document.getElementById('idPage:idForm:idHidKonnyusakiKasobaName').value = pName;
        document.getElementById('idPage:idForm:idKonnyusakiKasobaText').value = pName;
        document.getElementById('hidKonnyusakiKasobaText').style.display = 'none';
        setKonnyusakiKasobaLink();
      }

      function fncSetItemsKonnyusakiSaijo(pId, pName) {
        document.getElementById('idPage:idForm:idHidKonnyusakiSaijoId').value = pId;
        document.getElementById('idPage:idForm:idHidKonnyusakiSaijoName').value = pName;
        document.getElementById('idPage:idForm:idKonnyusakiSaijoText').value = pName;
        document.getElementById('hidKonnyusakiSaijoText').style.display = 'none';
        setKonnyusakiSaijoLink();
      }

      function delShisetsuSuggest(){
        setTimeout(delShisetsuSuggestMain, 500);
      }

      function delShisetsuSuggestMain(){
        var elements = document.getElementsByClassName('clshidArea');
        for(i=0;i<elements.length;i++){
          elements[i].style.display = 'none';
        }
      }

      function setKonnyusakiSogishaLink(){
        var toiawaseNaiyo = document.getElementById('idPage:idForm:idToiawaseNaiyo').value;
        var konnyusaki = document.getElementById('idPage:idForm:idKonnyusaki').value;
        var konnyusakiSogishaId = document.getElementById('idPage:idForm:idHidKonnyusakiSogishaId').value;
        var konnyusakiSogishaName = document.getElementById('idPage:idForm:idKonnyusakiSogishaText').value;
        var tashaSodanJokyo = document.getElementById('idPage:idForm:idTashaSodanJokyo').value;
        checkTeikeiJokyoSogishaJs(toiawaseNaiyo, konnyusaki, konnyusakiSogishaId, konnyusakiSogishaName, tashaSodanJokyo);
      }

      function setKonnyusakiKasobaLink(){
        var toiawaseNaiyo = document.getElementById('idPage:idForm:idToiawaseNaiyo').value;
        var konnyusaki = document.getElementById('idPage:idForm:idKonnyusaki').value;
        var konnyusakiKasobaId = document.getElementById('idPage:idForm:idHidKonnyusakiKasobaId').value;
        var konnyusakiKasobaName = document.getElementById('idPage:idForm:idKonnyusakiKasobaText').value;
        var tashaSodanJokyo = document.getElementById('idPage:idForm:idTashaSodanJokyo').value;
        checkTeikeiJokyoKasobaJs(toiawaseNaiyo, konnyusaki, konnyusakiKasobaId, konnyusakiKasobaName, tashaSodanJokyo);
      }

      function setKonnyusakiSaijoLink(){
        var toiawaseNaiyo = document.getElementById('idPage:idForm:idToiawaseNaiyo').value;
        var konnyusaki = document.getElementById('idPage:idForm:idKonnyusaki').value;
        var konnyusakiSaijoId = document.getElementById('idPage:idForm:idHidKonnyusakiSaijoId').value;
        var konnyusakiSaijoName = document.getElementById('idPage:idForm:idKonnyusakiSaijoText').value;
        var tashaSodanJokyo = document.getElementById('idPage:idForm:idTashaSodanJokyo').value;
        checkTeikeiJokyoSaijoJs(toiawaseNaiyo, konnyusaki, konnyusakiSaijoId, konnyusakiSaijoName, tashaSodanJokyo);
      }

      function openCrossSellingTeian(objId){
        srcUp('/' + objId);
      }

      function openCrossSellingSakiShodan(objId){
        srcUp('/' + objId);
      }

      function addCrossSellingTeian(objIndex){
        addCrossSellingTeianJs(objIndex);
      }

      function delCrossSellingTeian(objIndex, objValue){
        if(objValue == ''){
          delCrossSellingTeianJs(objIndex);
        }
        else{
          alert('クロスセル先の商談が作成されているため削除できません');
        }
      }

      function setAnketoSofuHoho(){
        var anketoSofuHoho = document.getElementById('idPage:idForm:idShikigoAnketo').value;
        if(anketoSofuHoho == '同意済'){
          document.getElementById('idPage:idForm:idAnketoSodanshaSMS').checked = true;
          document.getElementById('idPage:idForm:idAnketoSodanshaEmail').checked = true;
        }
        else{
          document.getElementById('idPage:idForm:idAnketoSodanshaSMS').checked = false;
          document.getElementById('idPage:idForm:idAnketoSodanshaEmail').checked = false;
        }

        setAnketoSofuHohoAlert();
      }

      function changeKonnyusaki(){
        var konnyusaki = document.getElementById('idPage:idForm:idKonnyusaki').value;
        var konnyusakiDataId = '';
        var konnyusakiDataTeikeiJokyo = '';

        if(konnyusaki == '葬儀社'){
          document.getElementById('idKonyusakiSogishaTr').style.display = '';
          document.getElementById('idKonyusakiKasobaTr').style.display = 'none';
          document.getElementById('idKonyusakiSaijoTr').style.display = 'none';
          document.getElementById('idKonyusakiKyogoTashaTr').style.display = 'none';
          konnyusakiDataId = document.getElementById('idPage:idForm:idHidKonnyusakiSogishaId').value;
          konnyusakiDataTeikeiJokyo = document.getElementById('idPage:idForm:idSogishaTeikeiJokyo').innerText;
        }
        else if(konnyusaki == '火葬場'){
          document.getElementById('idKonyusakiSogishaTr').style.display = 'none';
          document.getElementById('idKonyusakiKasobaTr').style.display = '';
          document.getElementById('idKonyusakiSaijoTr').style.display = 'none';
          document.getElementById('idKonyusakiKyogoTashaTr').style.display = 'none';
        }
        else if(konnyusaki == '斎場'){
          document.getElementById('idKonyusakiSogishaTr').style.display = 'none';
          document.getElementById('idKonyusakiKasobaTr').style.display = 'none';
          document.getElementById('idKonyusakiSaijoTr').style.display = '';
          document.getElementById('idKonyusakiKyogoTashaTr').style.display = 'none';
          konnyusakiDataId = document.getElementById('idPage:idForm:idHidKonnyusakiSaijoId').value;
          konnyusakiDataTeikeiJokyo = document.getElementById('idPage:idForm:idSaijoTeikeiJokyo').innerText;
        }
        else if(konnyusaki == '競合他社'){
          document.getElementById('idKonyusakiSogishaTr').style.display = 'none';
          document.getElementById('idKonyusakiKasobaTr').style.display = 'none';
          document.getElementById('idKonyusakiSaijoTr').style.display = 'none';
          document.getElementById('idKonyusakiKyogoTashaTr').style.display = '';
        }
        else{
          document.getElementById('idKonyusakiSogishaTr').style.display = 'none';
          document.getElementById('idKonyusakiKasobaTr').style.display = 'none';
          document.getElementById('idKonyusakiSaijoTr').style.display = 'none';
          document.getElementById('idKonyusakiKyogoTashaTr').style.display = 'none';
        }

        setAnkenShubetsu(konnyusakiDataId, konnyusakiDataTeikeiJokyo);
      }

      function openKonnyusaki(pId){
        var dataId = document.getElementById('idPage:idForm:' + pId).value;
        srcUp('/' + dataId);
      }

      function setAnkenShubetsu(konnyusakiDataId, konnyusakiDataTeikeiJokyo){
        var toiawaseNaiyo = document.getElementById('idPage:idForm:idToiawaseNaiyo').value;
        var konnyusaki = document.getElementById('idPage:idForm:idKonnyusaki').value;
        var tashaSodanJokyo = document.getElementById('idPage:idForm:idTashaSodanJokyo').value;
        setAnkenShubetsuJs(toiawaseNaiyo, konnyusaki, konnyusakiDataId, konnyusakiDataTeikeiJokyo, tashaSodanJokyo);
      }

      function dspSaijoBtn(){
        var ankenShubetsu = document.getElementById('idPage:idForm:idAnkenShubetsu').innerText;
        if(ankenShubetsu == '有効' || ankenShubetsu == '準有効' || ankenShubetsu == '不明'){
          document.getElementById('idPage:idForm:idSaijoToiawaseBtn').disabled = true;
          document.getElementById('idPage:idForm:idSaijoToiawaseBtn').style.background = '#e9e9e9';
          document.getElementById('idPage:idForm:idSaijoToiawaseBtn').style.color = 'gray';
          
          document.getElementById('idIchijiHozonBtn').disabled = false;
          document.getElementById('idIchijiHozonBtn').style.background = '#e8673e';
          document.getElementById('idIchijiHozonBtn').style.color = 'white';

          document.getElementById('idSaveBtn').disabled = false;
          document.getElementById('idSaveBtn').style.background = '#e8673e';
          document.getElementById('idSaveBtn').style.color = 'white';
        }
        else{
          document.getElementById('idPage:idForm:idSaijoToiawaseBtn').disabled = false;
          document.getElementById('idPage:idForm:idSaijoToiawaseBtn').style.background = '#9acd32';
          document.getElementById('idPage:idForm:idSaijoToiawaseBtn').style.color = 'white';

          document.getElementById('idIchijiHozonBtn').disabled = true;
          document.getElementById('idIchijiHozonBtn').style.background = '#e9e9e9';
          document.getElementById('idIchijiHozonBtn').style.color = 'gray';

          document.getElementById('idSaveBtn').disabled = true;
          document.getElementById('idSaveBtn').style.background = '#e9e9e9';
          document.getElementById('idSaveBtn').style.color = 'gray';
        }
      }

      function dspKyogoTashaSonota(){
        var kyogoTasha = document.getElementById('idPage:idForm:idKonnyusakiKyogoTasha').value;
        if(kyogoTasha == 'その他ネット系葬儀サービス'){
          document.getElementById('idKyogotashaSonotaTh').style.display = '';
          document.getElementById('idKyogotashaSonotaTd').style.display = '';
        }
        else{
          document.getElementById('idKyogotashaSonotaTh').style.display = 'none';
          document.getElementById('idKyogotashaSonotaTd').style.display = 'none';
        }
      }

      function chkJizenJunbiSheetGoteishutsuShudan(){
        var jizenJunbiSheetGoteishutsuShudan = document.getElementById('idPage:idForm:idJizenJunbiSheetGoteishutsuShudan').value;
        if(jizenJunbiSheetGoteishutsuShudan == '代理入力'){
          document.getElementById('idJizenJunbiSheetDairiNyuryokuTantoshaTh').style.display = '';
          document.getElementById('idJizenJunbiSheetDairiNyuryokuTantoshaTd').style.display = '';
        }
        else{
          document.getElementById('idJizenJunbiSheetDairiNyuryokuTantoshaTh').style.display = 'none';
          document.getElementById('idJizenJunbiSheetDairiNyuryokuTantoshaTd').style.display = 'none';
        }
      }

      function chkContactHistory(){
        var contactShubetsu = document.getElementById('idPage:idForm:idChContactShubetsu').value;
        if(contactShubetsu == null || contactShubetsu == '' || contactShubetsu == 'お客様') { document.getElementById('contactHistoryTabCustmer').checked = true; }
        else { document.getElementById('contactHistoryTabSogisha').checked = true; }
      }

      function referShiryoSofu(val, sltIndex){
        var sogiShiryoSofuFlg = document.getElementById('idPage:idForm:idHdnInputSogiShiryoSofuFlg').value;
        if(sogiShiryoSofuFlg == 'false' || window.confirm('保存されていないデータは破棄されます。よろしいですか？')){
            showLoadingDialog();
            chgBgColorShiryoSofu(sltIndex);
            referShiryoSofuJs(val);
        }
      }

      function chgBgColorShiryoSofu(sltIndex){
            var maxi = document.getElementById('idSogiShiryoSofuWrapListTable').rows.length - 1;
            for (var i=0; i < maxi; i++) {
                if(i == sltIndex) document.getElementById('idSogiShiryoSofuWrapDataTr' + i).style.backgroundColor = '#ffe9aa';
                else document.getElementById('idSogiShiryoSofuWrapDataTr' + i).style.backgroundColor = '#FFFFFF';
            }
        }

      function copyShiryoSofu(val){
        var sogiShiryoSofuFlg = document.getElementById('idPage:idForm:idHdnInputSogiShiryoSofuFlg').value;
        if(sogiShiryoSofuFlg == 'false' || window.confirm('保存されていないデータは破棄されます。よろしいですか？')){
            showLoadingDialog();
            copyShiryoSofuJs(val);
        }
      }

      function displayShiryoSofuMailBtn(){
        document.getElementById('idShiryoSofuMailPreviewBtn').disabled = !document.getElementById('idPage:idForm:idHdnInputSogiShiryoSofuFlg').value || document.getElementById('idPage:idForm:idSofuJokyo').value != "印刷待ち" || document.getElementById('idPage:idForm:idSofuShubetsu').value != "メール";
        document.getElementById('idShiryoSofuMailPreviewBtn').style.background = !document.getElementById('idPage:idForm:idHdnInputSogiShiryoSofuFlg').value || document.getElementById('idPage:idForm:idSofuJokyo').value != "印刷待ち" || document.getElementById('idPage:idForm:idSofuShubetsu').value != "メール" ? '#e9e9e9' : '#e8673e';
        document.getElementById('idShiryoSofuMailPreviewBtn').style.color = !document.getElementById('idPage:idForm:idHdnInputSogiShiryoSofuFlg').value || document.getElementById('idPage:idForm:idSofuJokyo').value != "印刷待ち" || document.getElementById('idPage:idForm:idSofuShubetsu').value != "メール" ? 'gray' : 'white';
        document.getElementById('idShiryoSofuSendMailBtn').disabled = document.getElementById('idPage:idForm:idHdnPdfSakuseiJokyo').value != '作成済' || document.getElementById('idPage:idForm:idSofuJokyo').value != "印刷待ち" || document.getElementById('idPage:idForm:idSofuShubetsu').value != "メール";
        document.getElementById('idShiryoSofuSendMailBtn').style.background = document.getElementById('idPage:idForm:idHdnPdfSakuseiJokyo').value != '作成済' || document.getElementById('idPage:idForm:idSofuJokyo').value != "印刷待ち" || document.getElementById('idPage:idForm:idSofuShubetsu').value != "メール" ? '#e9e9e9' : '#e8673e';
        document.getElementById('idShiryoSofuSendMailBtn').style.color = document.getElementById('idPage:idForm:idHdnPdfSakuseiJokyo').value != '作成済' || document.getElementById('idPage:idForm:idSofuJokyo').value != "印刷待ち" || document.getElementById('idPage:idForm:idSofuShubetsu').value != "メール" ? 'gray' : 'white';
      }

      function displayAteSaki(){
        var sofuShubetsu = document.getElementById('idPage:idForm:idSofuShubetsu').value;
        if(sofuShubetsu == '郵便'){
            document.getElementById('idSofuShubetsuYusoDiv').style.display = '';
            document.getElementById('idSofuShubetsuEmailDiv').style.display = 'none';
            document.getElementById('idSofuShubetsuFaxDiv').style.display = 'none';
        }
        else if(sofuShubetsu == 'メール'){
            document.getElementById('idSofuShubetsuYusoDiv').style.display = 'none';
            document.getElementById('idSofuShubetsuEmailDiv').style.display = '';
            document.getElementById('idSofuShubetsuFaxDiv').style.display = 'none';
        }
        else if(sofuShubetsu == 'FAX'){
            document.getElementById('idSofuShubetsuYusoDiv').style.display = 'none';
            document.getElementById('idSofuShubetsuEmailDiv').style.display = 'none';
            document.getElementById('idSofuShubetsuFaxDiv').style.display = '';
        }
        else{
            document.getElementById('idSofuShubetsuYusoDiv').style.display = 'none';
            document.getElementById('idSofuShubetsuEmailDiv').style.display = 'none';
            document.getElementById('idSofuShubetsuFaxDiv').style.display = 'none';
        }

        document.getElementById('idTaishoshaJushoBtn5').disabled = !document.getElementById('idPage:idForm:idHdnInputSogiShiryoSofuFlg').value || document.getElementById('idPage:idForm:idSofuJokyo').value != "資料作成中" || document.getElementById('idPage:idForm:idSofuShubetsu').value != "郵便";
        document.getElementById('idTaishoshaJushoBtn5').style.background = !document.getElementById('idPage:idForm:idHdnInputSogiShiryoSofuFlg').value || document.getElementById('idPage:idForm:idSofuJokyo').value != "資料作成中" || document.getElementById('idPage:idForm:idSofuShubetsu').value != "郵便" ? '#e9e9e9' : '#e8e8e9';
        document.getElementById('idTaishoshaJushoBtn5').style.color = !document.getElementById('idPage:idForm:idHdnInputSogiShiryoSofuFlg').value || document.getElementById('idPage:idForm:idSofuJokyo').value != "資料作成中" || document.getElementById('idPage:idForm:idSofuShubetsu').value != "郵便" ? 'gray' : 'black';
    }

    function saveSogiShiryoSofu(){

        showLoadingDialog();

        var mail = document.getElementById('idPage:idForm:idSofuShiryoMail').value;
        if(mail != '' && mail.length > 80) {
            alert('メールアドレスの桁数が80桁を超えています');
            hideLoadingDialog();
            return false;
        }
        if (mail != '' && !mail.match(/^((?:(?:(?:(?:(?:(?:[\x20\x09])+)?(?:\((?:(?:(?:[\x20\x09])+)?(?:[\x09\x20-\x28\x2a-\x7e]))*(?:(?:[\x20\x09])+)?\)))*(?:(?:(?:(?:[\x20\x09])+)?(?:\((?:(?:(?:[\x20\x09])+)?(?:[\x09\x20-\x28\x2a-\x7e]))*(?:(?:[\x20\x09])+)?\)))|(?:(?:[\x20\x09])+)))?(?:(?:[A-Za-z0-9!#\$\%&amp;'*+\-/=?\^_`{|}~])+(?:[A-Za-z0-9!#\$\%&amp;'*+\-/=?\^_`{|}~\.])*)(?:(?:(?:[A-Za-z0-9!#\$\%&amp;'*+\-/=?\^_`{|}~])+(?:[A-Za-z0-9!#\$\%&amp;'*+\-/=?\^_`{|}~\.])*)|(?:\((?:(?:(?:[\x20\x09])+)?(?:[\x09\x20-\x28\x2a-\x7e]))*(?:(?:[\x20\x09])+)?\)))*)|(?:(?:(?:(?:(?:[\x20\x09])+)?(?:\((?:(?:(?:[\x20\x09])+)?(?:[\x09\x20-\x28\x2a-\x7e]))*(?:(?:[\x20\x09])+)?\)))*(?:(?:(?:(?:[\x20\x09])+)?(?:\((?:(?:(?:[\x20\x09])+)?(?:[\x09\x20-\x28\x2a-\x7e]))*(?:(?:[\x20\x09])+)?\)))|(?:(?:[\x20\x09])+)))?"(?:(?:\((?:(?:(?:[\x20\x09])+)?(?:[\x09\x20-\x28\x2a-\x7e]))*(?:(?:[\x20\x09])+)?\))|(?:[A-Za-z0-9!#\$\%&amp;'*+\-/=?\^_`{|}~\.]))*"(?:\((?:(?:(?:[\x20\x09])+)?(?:[\x09\x20-\x28\x2a-\x7e]))*(?:(?:[\x20\x09])+)?\))*))\@(?:(?:\((?:(?:(?:[\x20\x09])+)?(?:[\x09\x20-\x28\x2a-\x7e]))*(?:(?:[\x20\x09])+)?\))*(?:(?:[A-Za-z0-9!#\$\%&amp;'*+/=?\^_`{|}~])+(?:\-+(?:[A-Za-z0-9!#\$\%&amp;'*+/=?\^_`{|}~])+)*(?:\.(?:[A-Za-z0-9!#\$\%&amp;'*+/=?\^_`{|}~])+(?:\-+(?:[A-Za-z0-9!#\$\%&amp;'*+/=?\^_`{|}~])+)*)+)(?:(?:(?:(?:[\x20\x09])+)?(?:\((?:(?:(?:[\x20\x09])+)?(?:[\x09\x20-\x28\x2a-\x7e]))*(?:(?:[\x20\x09])+)?\)))*(?:(?:(?:(?:[\x20\x09])+)?(?:\((?:(?:(?:[\x20\x09])+)?(?:[\x09\x20-\x28\x2a-\x7e]))*(?:(?:[\x20\x09])+)?\)))|(?:(?:[\x20\x09])+)))?))$/)) {
            alert('メールアドレスの入力が不正です');
            hideLoadingDialog();
            return false;
        }

        var sofuJokyo = document.getElementById('idPage:idForm:idSofuJokyo').value;
        if(sofuJokyo == '印刷待ち'){

            var sofuShubetsu = document.getElementById('idPage:idForm:idSofuShubetsu').value;
            if(sofuShubetsu == '') {
                alert('【送付種別】を設定してください');
                hideLoadingDialog();
                return false;
            }

            var atena = document.getElementById('idPage:idForm:idAtena').value;
            if(atena == '') {
                alert('【宛名】を入力してください');
                hideLoadingDialog();
                return false;
            }

            var pamphletYohi = document.getElementById('idPage:idForm:idPamphletYohi').value;
            var insatsubutsuIchiranVal = '';
            var insatsubutsuIchiranOpt = document.getElementById('idPage:idForm:idInsatsubutsuIchiran').options;
            for(var i = 0; i < insatsubutsuIchiranOpt.length; i++){
                if(insatsubutsuIchiranOpt[i].selected) insatsubutsuIchiranVal += insatsubutsuIchiranOpt[i].value + ';';
            }; 

            if(sofuShubetsu == '郵便'){
                var yubinShubetsu = document.getElementById('idPage:idForm:idYusoShubetsu').value;
                if(yubinShubetsu == '') {
                    alert('【送付種別】を設定してください');
                    hideLoadingDialog();
                return false;
                }

                var postalCode = document.getElementById('idPage:idForm:idPostalCode5').value;
                var state = document.getElementById('idPage:idForm:idState5').value;
                var city = document.getElementById('idPage:idForm:idCity5').value;
                var street = document.getElementById('idPage:idForm:idStreet5').value;
                if(postalCode == '' || state == '' || city == '' || street == '') {
                    alert('住所を入力してください');
                    hideLoadingDialog();
                    return false;
                }
                
                if(insatsubutsuIchiranVal.indexOf('送付状') == -1) {
                    alert('郵送する場合は【印刷物一覧】から送付状を設定してください');
                    hideLoadingDialog();
                    return false;
                }

                if(yubinShubetsu.indexOf('信書') == -1 && insatsubutsuIchiranVal.indexOf('提案書') != -1) {
                    alert('提案書を郵送する場合は【送付種別】に信書か速達信書を設定してください');
                    hideLoadingDialog();
                    return false;
                }

                var taSofubutsu1 = document.getElementById('idPage:idForm:idTaSofubutsu1').value;
                var taSofubutsu2 = document.getElementById('idPage:idForm:idTaSofubutsu2').value;
                var taSofubutsu3 = document.getElementById('idPage:idForm:idTaSofubutsu3').value;
                var hikitsugiJiko = document.getElementById('idPage:idForm:idHikitsugiJiko').value;
                if((taSofubutsu1 != '' || taSofubutsu2 != '' || taSofubutsu3 != '') && hikitsugiJiko == '') {
                    alert('他送付物がある場合は引継事項を入力してください');
                    hideLoadingDialog();
                    return false;
                }
            }
            if(sofuShubetsu == 'メール'){
                if(mail == '') {
                    alert('メールを入力してください');
                    hideLoadingDialog();
                    return false;
                }
                var template = document.getElementById('idPage:idForm:idShiryoSofuTemplate').value;
                if(template == '') {
                    alert('テンプレートを入力してください');
                    hideLoadingDialog();
                    return false;
                }
                var kiboChiki1 = document.getElementById('idPage:idForm:idKiboChiiki1_lkid').value;
                if(template == '施行可能葬儀社なし' && (kiboChiki1 == '' || kiboChiki1 == '000000000000000')) {
                    alert('施行可能葬儀社なしを選択する場合は【希望地域1】を設定してください');
                    hideLoadingDialog();
                    return false;
                }
            }
            if(sofuShubetsu == 'FAX'){
                var fax = document.getElementById('idPage:idForm:idSofuShiryoFax').value;
                if(fax == '') {
                    alert('FAXを入力してください');
                    hideLoadingDialog();
                    return false;
                }

                if(pamphletYohi == '要') {
                    alert('FAXの場合はパンフレットを送信できません');
                    hideLoadingDialog();
                    return false;
                }
            }

            if(pamphletYohi != '要' && insatsubutsuIchiranVal == '') {
                alert('【パンフレット】か【印刷物一覧】から送付物を設定してください');
                hideLoadingDialog();
                return false;
            }

            var sodanshaMemberTourokuZumi = document.getElementById('idPage:idForm:idSodanshaMemberTourokuZumi').checked;
            if(insatsubutsuIchiranVal.indexOf('会員案内') != -1 && !sodanshaMemberTourokuZumi) {
                alert('会員案内を送付する場合は【相談者メンバー登録】をチェックしてください');
                hideLoadingDialog();
                return false;
            }

            var sodanshaMemberTourokuZumi = document.getElementById('idPage:idForm:idSogiSofuShiryoTeianshoNum').value;
            if(insatsubutsuIchiranVal.indexOf('提案書') != -1 && sodanshaMemberTourokuZumi == 0) {
                alert('提案書が作成されていません');
                hideLoadingDialog();
                return false;
            }

            if(insatsubutsuIchiranVal.indexOf('提案書') < 0 && sodanshaMemberTourokuZumi > 0) {
                alert('提案書が作成されていますが【印刷物一覧】に提案書が選択されていません');
                hideLoadingDialog();
                return false;
            }
            

            var hosokuSetsumei = document.getElementById('idPage:idForm:idHosokuSetsumei').value;
            if(insatsubutsuIchiranVal.indexOf('送付状') == -1 && hosokuSetsumei != '') {
                alert('【補足説明】を入力した場合は【印刷物一覧】から送付状が設定してください');
                hideLoadingDialog();
                return false;
            }

            var kasobaTeianListTable = document.getElementById('idKasobaTeianListTable');
            var kasobaFlg = false;
            var kasobaShutokenFlg = false;
            for (var i = 0; i < kasobaTeianListTable.rows.length - 1; i++) {
                if(document.getElementById('idPage:idForm:idKasobaTeianList:' + i + ':idKasobaTeianName').innerText != '') kasobaFlg = true;
                if(document.getElementById('idPage:idForm:idKasobaTeianList:' + i + ':idShutokenIchibuChiki').value == 'true') kasobaShutokenFlg = true;
            }
            if(insatsubutsuIchiranVal.indexOf('斎場資料') != -1 && !kasobaFlg) {
                alert('斎場資料を送付する場合は火葬場を設定してください');
                hideLoadingDialog();
                return false;
            }

            if(insatsubutsuIchiranVal.indexOf('首都圏案内文') < 0 && kasobaShutokenFlg) {
                alert('首都圏一部地域の火葬場が選択されているため\n首都圏案内文を選択してください');
                hideLoadingDialog();
                return false;
            }
        }

        return true;
    }

    function getTeianList(){

        showLoadingDialog();
        getTeianListJs();
    }

    function chkCreateShiryoSofu(){
        var sogiShiryoSofuFlg = document.getElementById('idPage:idForm:idHdnInputSogiShiryoSofuFlg').value;
        if(sogiShiryoSofuFlg == 'false' || window.confirm('保存されていないデータは破棄されます。よろしいですか？')){
            showLoadingDialog();
            createShiryoSofuJs();
        }
    }

    function chkSogiShiryoSofuSetting(){
        var sogiShiryoSofuFlg = document.getElementById('idPage:idForm:idHdnInputSogiShiryoSofuFlg').value;
        if(sogiShiryoSofuFlg == 'false' || window.confirm('保存されていないデータは破棄されます。よろしいですか？')){
            showLoadingDialog();
            sogiShiryoSofuSettingJs();
        }
    }

    function chkOutPutShiryoSofu(objId, shubetsu, sltIndex, sofuJokyo){
        chgBgColorShiryoSofu(sltIndex);

        if(shubetsu == 'FAX' && sofuJokyo == '印刷待ち'){
            var sogiShiryoSofuFlg = document.getElementById('idPage:idForm:idHdnInputSogiShiryoSofuFlg').value;
            if(sogiShiryoSofuFlg == 'false' || window.confirm('送付状況を更新するため保存されていないデータは破棄されます。よろしいですか？')){
                showLoadingDialog();
                faxPdfOutputJs(objId);

                document.getElementById('idPage:idForm:idSogiShiryoSofuWrapList:' + sltIndex + ':idOutPutShirosofuLink').click();
            }
        }
        else{
            document.getElementById('idPage:idForm:idSogiShiryoSofuWrapList:' + sltIndex + ':idOutPutShirosofuLink').click();
        }
    }

    function confirmShiryoSofuMailSend(){
        if(window.confirm('メールを送信します。よろしいですか？')){
            showLoadingDialog();
            sendMailSogiShiryoSofuJs();
        }
    }

    function confirmShiryoSofuDelete(){
        if(window.confirm('資料送付データを削除します。よろしいですか？')){
            showLoadingDialog();
            delSogiShiryoSofuJs();
        }
    }

    function shiryoSofuMailPreview(){
        var template = document.getElementById('idPage:idForm:idShiryoSofuTemplate').value;
        var atena = document.getElementById('idPage:idForm:idAtena').value;
        var mailaddress = document.getElementById('idPage:idForm:idSofuShiryoMail').value;
        var pdfUrl = document.getElementById('idPage:idForm:idSofuShiryoURL').value;
        var passWord = document.getElementById('idPage:idForm:idSofuShiryoPassWord').innerText;
        var kiboarea = document.getElementById('idPage:idForm:idKiboChiiki1').value;
        window.open('/apex/SwitchMailPreview?template=' + template + '&atena=' + atena + '&mailaddress=' + mailaddress + '&pdfUrl=' + pdfUrl + '&passWord=' + passWord + '&kiboarea=' + kiboarea, 'window', 'width=700,height=1100,menubar=0,scrollbars=0,toolbar=0,location=0,status=0'); 
    }

    function chkTeianshoSakuseiJokenKoshin(){

      var shiryoSofuMemberWaribiki = '{!shiryoSofuMemberWaribiki}';
      if(shiryoSofuMemberWaribiki == '' && document.getElementById('idPage:idForm:idSodanshaMemberTourokuZumi').checked) {
        shiryoSofuMemberWaribiki = 'よりそう会員';          
      }

      var shiryoSofuButsuguNashi = '無';
      if(document.getElementById('idPage:idForm:idButsuguNashiKibo').value == '仏具なし'){
        shiryoSofuButsuguNashi = 'あり'
      }

      var shiryoSofuJizenJunbiSheet = '無';
      if('{!shiryoSofuJizenJizenSheetWaribiki}' == 'true' || document.getElementById('idPage:idForm:idJizenJunbiSheetGoannaiJokyo').value == '受領'){
        shiryoSofuJizenJunbiSheet = 'あり'
      }

      var shiryoSofuShikigoSurvey = '無';
      if(document.getElementById('idPage:idForm:idShikigoAnketo').value == '同意済'){
        shiryoSofuShikigoSurvey = 'あり'
      }

      var shiryoSofuAlliance = '無';
      var strAlliance = document.getElementById('idPage:idForm:idAllianceId').value;
      if(strAlliance.indexOf('ベネフィット') != -1) shiryoSofuAlliance = 'ベネフィット';
      else if(strAlliance.indexOf('カカクコム') != -1) shiryoSofuAlliance = '価格コム';

      var msg = '下記の内容で提案書一括作成条件を更新します。よろしいですか？' + '\n' + 
                '\n' + 
                '希望エリア ・・・・・・・' + document.getElementById('idPage:idForm:idKiboChiiki1').value + '\n' + 
                '僧侶手配希望・・・・' + document.getElementById('idPage:idForm:idMonkArrangements').value + '\n' + 
                '戒名希望・・・・・・・・' + document.getElementById('idPage:idForm:idKaimyoKibo').value + '\n' + 
                'メンバー割引・・・・・・' + shiryoSofuMemberWaribiki + '\n' + 
                '仏具なし割・・・・・・' + shiryoSofuButsuguNashi + '\n' + 
                '事前アンケート割 ・' + shiryoSofuJizenJunbiSheet + '\n' + 
                '式後アンケート割 ・・' + shiryoSofuShikigoSurvey + '\n' + 
                'アライアンス割 ・・・・' + shiryoSofuAlliance;

      if(confirm(msg)){
        showLoadingDialog();
        teianshoSakuseiJokenKoshinJs();
      }
    }

    function setSogiKPI(syc){
      if((syc == 'idTaishoshaKyojuKeitai') || (syc == 'idTaishoushaJokyo') || (syc == 'idTaishoshaYomeiKikan')){
        setSogiKPIJs();
      }else{
        setSogiKPIGenzaiJs();
      }
    }

    function openRireki(){
      var URLdata = document.getElementById('idPage:idForm:idHdnReportURL').value;
      if(!URLdata){
          alert('葬儀KPI項目更新レポートがありません。システム管理者に葬儀KPI項目更新レポートの復旧依頼をしてください');
      }else{
          srcUp(URLdata);
      }
    }

    function ResetJokyo(){
      if(document.getElementById('idPage:idForm:idHdnTaishoushaJokyoKeteiFlg').value == 'true'){
          if (window.confirm('対象者居住形態（現在）、対象者状態（現在）、余命期間（現在）の項目情報を初期状態にリセットして、よろしいでしょうか？')) {
              ResetJokyoJs();
          }
      }else{
          if (window.confirm('対象者居住形態（初回）、対象者状態（初回）、余命期間（初回）の項目情報を初期状態にリセットして、よろしいでしょうか？')) {
              ResetJokyoJs();
          }
      }
    }

    function contactHistoryInitialProcessing(){
      chkContactHistory();
      chgCstJuhasshinJokyo();
      chgCstKadenShubetsu();
      chgCstTaiosha();
      chgCstTaioshaJokyo();
      chgCstShiboShindansho();
      chgCstOmukaeJikan();
      clkCstJizenSurveyDairiNyuryokuTeian();
      chgSogishaTaiosha();
      chgSogiPanfuSofuIrai();
      chgSogishaMitsumorishoSaisoku();
    }
    
    function mitsumoriKeisanhyoOpen() {
        sforce.console.getEnclosingPrimaryTabId(openSubtab);
    }
    
    var openSubtab = function openSubtab(result) {
        var primaryTabId = result.id;
        sforce.console.openSubtab(primaryTabId , '/apex/SogiMitsumoriKeisanhyo?oppid=' + '{!oppId}', true, '見積計算表', null, openSuccess);
    };
    
    var openSuccess = function openSuccess(result) {
        if (result.success == true) {
            //alert('subtab successfully opened');
        } else {
            //alert('subtab cannot be opened');
        }
    };

  </script>
  <c:loadingDialog title="Getting Contacts" />
  <apex:form id="idForm" html-autocomplete="off">
    <apex:pageMessages id="idPageMessages"/>
    <apex:actionFunction name="setTalkScript" action="{!setTalkScript}" reRender="idPageMessages,idTalkScriptContent">
      <apex:param assignTo="{!talkscriptKey}" name="talkscriptKey" value="" /> </apex:actionFunction>
    <apex:actionFunction name="onloadDefaultValueJs" oncomplete="document.getElementById('idPage:idForm:idToiawaseKiinsha').focus();" />
    <apex:actionFunction name="onloadSetOpportunityValueJs" action="{!onloadSetOpportunityValue}" oncomplete="openGoanchisakiJusho();contactHistoryInitialProcessing();setAlert();setTabIndex();displaySize();onloadDefaultValueJsFunc();chkShiharaiHoho(document.getElementById('idPage:idForm:idKiboShiharaiHoho1'));chkTaiouKanouRiyu();" reRender="idForm" />
    

    <apex:actionFunction name="checkSogishaKadenJs" action="{!createSogishaKaden}" reRender="idPageMessages,idSogishaKaden,idContactTab" />
    <apex:actionFunction name="temporarilySaveJs" action="{!temporarilySave}" reRender="idPageMessages,idHozonMsg,idSodanshaPanel,idTaishoshaPanel2,idCrossSellingTeianPanel" oncomplete="hideLoadingDialog();" />
    <apex:actionFunction name="saveJs" action="{!save}" reRender="idForm" oncomplete="hideLoadingDialog();"/>

    <apex:actionFunction name="addCrossSellingTeianJs" action="{!addCrossSellingTeian}" reRender="idCrossSellingTeianPanel">
      <apex:param assignTo="{!ojbAddCrossSellingTeianIndex}" name="ojbAddCrossSellingTeianIndex" value="" /> </apex:actionFunction>
    <apex:actionFunction name="delCrossSellingTeianJs" action="{!delCrossSellingTeian}" reRender="idCrossSellingTeianPanel">
      <apex:param assignTo="{!ojbDelCrossSellingTeianIndex}" name="ojbDelCrossSellingTeianIndex" value="" /> </apex:actionFunction>
    <apex:actionFunction name="checkTeikeiJokyoSogishaJs" action="{!checkTeikeiJokyoSogisha}" reRender="idSogishaTeikeiJokyo,idKonnyusakiSogishaPanel,idAnkenShubetsu,idHToiawaseJogaiKubun" oncomplete="dspSaijoBtn();">
      <apex:param assignTo="{!pToiawasenaiyo}" name="pToiawasenaiyo" value="" />
      <apex:param assignTo="{!pKonnyusaki}" name="pKonnyusaki" value="" />
      <apex:param assignTo="{!pKonnyusakiSogishaId}" name="pKonnyusakiSogishaId" value="" />
      <apex:param assignTo="{!pKonnyusakiSogishaName}" name="pKonnyusakiSogishaName" value="" />
      <apex:param assignTo="{!pTashaSodanJokyo}" name="pTashaSodanJokyo" value="" />
    </apex:actionFunction>
    <apex:actionFunction name="checkTeikeiJokyoKasobaJs" action="{!checkTeikeiJokyoKasoba}" reRender="idKonnyusakiKasobaPanel,idAnkenShubetsu,idHToiawaseJogaiKubun" oncomplete="dspSaijoBtn();">
      <apex:param assignTo="{!pToiawasenaiyo}" name="pToiawasenaiyo" value="" />
      <apex:param assignTo="{!pKonnyusaki}" name="pKonnyusaki" value="" />
      <apex:param assignTo="{!pKonnyusakiKasobaId}" name="pKonnyusakiKasobaId" value="" />
      <apex:param assignTo="{!pKonnyusakiKasobaName}" name="pKonnyusakiKasobaName" value="" /> 
      <apex:param assignTo="{!pTashaSodanJokyo}" name="pTashaSodanJokyo" value="" />
    </apex:actionFunction>
    <apex:actionFunction name="checkTeikeiJokyoSaijoJs" action="{!checkTeikeiJokyoSaijo}" reRender="idSaijoTeikeiJokyo,idKonnyusakiSaijoPanel,idAnkenShubetsu,idHToiawaseJogaiKubun" oncomplete="dspSaijoBtn();">
      <apex:param assignTo="{!pToiawasenaiyo}" name="pToiawasenaiyo" value="" />
      <apex:param assignTo="{!pKonnyusaki}" name="pKonnyusaki" value="" />
      <apex:param assignTo="{!pKonnyusakiSaijoId}" name="pKonnyusakiSaijoId" value="" />
      <apex:param assignTo="{!pKonnyusakiSaijoName}" name="pKonnyusakiSaijoName" value="" />
      <apex:param assignTo="{!pTashaSodanJokyo}" name="pTashaSodanJokyo" value="" />
    </apex:actionFunction>
    <apex:actionFunction name="setAnkenShubetsuJs" action="{!setAnkenShubetsu}" reRender="idAnkenShubetsu,idHToiawaseJogaiKubun" oncomplete="dspSaijoBtn();">
      <apex:param assignTo="{!pToiawase}" name="pToiawase" value="" />
      <apex:param assignTo="{!pKonnyusaki}" name="pKonnyusaki" value="" />
      <apex:param assignTo="{!pKonnyusakiId}" name="pKonnyusakiId" value="" />
      <apex:param assignTo="{!pKonnyusakiJokyo}" name="pKonnyusakiJokyo" value="" /> 
      <apex:param assignTo="{!pTashaSodanJokyo}" name="pTashaSodanJokyo" value="" />
    </apex:actionFunction>
    <apex:actionFunction name="referShiryoSofuJs" action="{!referShiryoSofu}" reRender="idInputSogiShiryoSofuWrapPanel" oncomplete="displayAteSaki();displayShiryoSofuMailBtn();hideLoadingDialog();" >
      <apex:param assignTo="{!pShiryoSofuId}" name="pShiryoSofuId" value="" />
    </apex:actionFunction>
    <apex:actionFunction name="copyShiryoSofuJs" action="{!copyShiryoSofu}" reRender="idSogiShiryoSofuWrapListPanel,idInputSogiShiryoSofuWrapPanel" oncomplete="displayAteSaki();hideLoadingDialog();" >
      <apex:param assignTo="{!pShiryoSofuId}" name="pShiryoSofuId" value="" />
    </apex:actionFunction>
    <apex:actionFunction name="saveSogiShiryoSofuJs" action="{!saveSogiShiryoSofu}" reRender="idSogiShiryoSofuWrapListPanel,idInputSogiShiryoSofuWrapPanel" oncomplete="displayAteSaki();hideLoadingDialog();" />
    <apex:actionFunction name="sendMailSogiShiryoSofuJs" action="{!sendMailSogiShiryoSofu}" reRender="idSogiShiryoSofuWrapListPanel,idInputSogiShiryoSofuWrapPanel" oncomplete="hideLoadingDialog();" />
    <apex:actionFunction name="delSogiShiryoSofuJs" action="{!delSogiShiryoSofu}" reRender="idSogiShiryoSofuWrapListPanel,idInputSogiShiryoSofuWrapPanel" oncomplete="hideLoadingDialog();" />
    <apex:actionFunction name="getTeianListJs" action="{!getTeianList}" reRender="idTeianListPanel" oncomplete="hideLoadingDialog();" />
    <apex:actionFunction name="createShiryoSofuJs" action="{!createShiryoSofu}" reRender="idSogiShiryoSofuWrapListPanel,idInputSogiShiryoSofuWrapPanel" oncomplete="hideLoadingDialog();" />
    <apex:actionFunction name="sogiShiryoSofuSettingJs" action="{!sogiShiryoSofuSetting}" reRender="idSogiShiryoSofuWrapListPanel,idInputSogiShiryoSofuWrapPanel" oncomplete="hideLoadingDialog();" />
    <apex:actionFunction name="faxPdfOutputJs" action="{!faxPdfOutput}" reRender="idSogiShiryoSofuWrapListPanel,idInputSogiShiryoSofuWrapPanel" oncomplete="hideLoadingDialog();" >
        <apex:param assignTo="{!pShiryoSofuId}" name="pShiryoSofuId" value="" />
    </apex:actionFunction>
    <apex:actionFunction name="teianshoSakuseiJokenKoshinJs" action="{!teianshoSakuseiJokenKoshin}" reRender="idSogiShiryoSofuWrapListPanel,idInputSogiShiryoSofuWrapPanel" oncomplete="hideLoadingDialog();" />
    <apex:actionFunction name="setSogiKPIJs" action="{!setSogiKPI}" reRender="idTaishoushaJokyoPanel,idKpiPanel" >
    </apex:actionFunction>
    <apex:actionFunction name="setSogiKPIGenzaiJs" action="{!setSogiKPIGenzai}" reRender="idKpiPanel" >
    </apex:actionFunction>
    <apex:actionFunction name="ResetJokyoJs" action="{!resetSogiKPI}" reRender="idTaishoushaJokyoPanel,idKpiPanel" >
    </apex:actionFunction>
    <div class="wrapper">
      <div class="container">
        <div class="main">
          <div class="main-header" id="idMainHeader" style="width: 1264px;">
            <div class="section-panel" style="padding:10px 10px 5px 10px;background: rgb(243, 242, 242);">
              <div style="width: 100%;">
                <div style="display:flex;justify-content:space-between">
                  <div style="display:flex;">
                    <div><input type="button" value="聴取事項チェック" class="btn" onclick="checkOnakunari();" style="background: #ff5f77;color: #fff;font-weight: inherit;width:100px;" /></div>
                    <div style="margin:0 0 0 30px">
                      <apex:commandButton value="不安解消" styleClass="buttonstyle" oncomplete="talkscript('FuanKaisho')" /> </div>
                    <div style="margin:0 0 0 5px">
                      <apex:commandButton value="特殊案件" styleClass="buttonstyle" oncomplete="talkscript('TokushuAnken')" /> </div>
                    <div style="margin:0 0 0 5px">
                      <apex:commandButton value="オープニング" styleClass="buttonstyle" oncomplete="talkscript('Opening')" /> </div>
                    <div style="margin:0 0 0 30px"><a class="ryunyuNyuden_btn" href="#" style="width: 100px;" id="idRyunyuNyudenA"><span>【混入入電】▼</span><span>【混入入電】▲</span></a></div>
                    <div style="margin:0 0 0 30px" id="idRyokinKeisanOpenBtn">
                      <input type="button" class="btn" style="background: brown;color: #fff;font-weight: inherit;width:100px" value="見積計算表" onclick="mitsumoriKeisanhyoOpen();"/>
                    </div>
                  </div>
                  <div style="display:flex;">
                    <div>
                      <apex:outputtext value="{!hozonMsg}" id="idHozonMsg" style="color:{!IF(errFlg, 'red', 'green')}" escape="false" /> </div>
                    <div style="margin:0 0 0 5px"><input type="button" id="idIchijiHozonBtn" class="btn" style="background: #e8673e;color: white;font-weight: inherit;width:100px;" onclick="checkInputItem('1');" value="一時保存" /></div>
                    <div style="margin:0 0 0 5px"><input type="button" class="btn" style="background: #e8673e;color: white;font-weight: inherit;width:100px;" onclick="checkInputItem('2');" value="登録" id="idSaveBtn" onkeypress="checkInputItem('2');"/></div>
                  </div>
                </div>
                <div id="idRyunyuNyudenPanel" style="display: none">
                  <div class="summarpanel">
                    <div class="center-column" style="width:100%">
                      <apex:outputpanel id="idRyunyuNyudenPanel2">
                        <div style="display: flex;margin-top:5px;width:100%">
                          <div>【混入情報】</div>
                        </div>
                        <div style="width:100%">
                          <table cellpadding="5px" cellspacing="0" style="width:100%">
                            <tr>
                              <th style="width:77px">問合せ内容</th>
                              <td style="width:120px"><apex:inputfield value="{!ota.ToiawaseNaiyo__c}" id="idToiawaseNaiyo" onchange="changeKonnyusaki();" />
                                </td>
                              <th style="width:116px">提案内容</th>
                              <td colspan="5">
                                </td>
                            </tr>
                            <tr>
                              <th>混入先</th>
                              <td><apex:inputfield value="{!ota.Konnyusaki__c}" id="idKonnyusaki" onchange="changeKonnyusaki();" />
                                </td>
                              <td colspan="6">
                                <div>
                                  <table cellpadding="5px" cellspacing="0" style="">
                                    <tr id="idKonyusakiSogishaTr">
                                      <th style="width: 116px">葬儀社名</th>
                                      <td style="padding-right: 5px;"><apex:inputText id="idKonnyusakiSogishaText" value="{!ota.KonnyusakiSogishaText__c}" style="width:263px" onblur="delShisetsuSuggest();setKonnyusakiSogishaLink();"/>
                                        <div id="hidKonnyusakiSogishaText" class="clshidArea"></div>
                                        </td>
                                      <th style="">データ</th>
                                      <td style="width:80px">
                                        <apex:inputHidden id="idHidKonnyusakiSogishaId" value="{!konnyusakiSogishaTeikeiId}"/>
                                        <apex:inputHidden id="idHidKonnyusakiSogishaName" value="{!konnyusakiSogishaTeikeiName}"/>
                                        <apex:outputPanel id="idKonnyusakiSogishaPanel">
                                          <apex:outputPanel rendered="{!IF(konnyusakiSogishaTeikeiId == '', true, false)}">なし</apex:outputPanel>
                                          <apex:outputPanel rendered="{!IF(konnyusakiSogishaTeikeiId != '', true, false)}">
                                            <a href="#" onclick="openKonnyusaki('idHidKonnyusakiSogishaId');" >参照</a> 
                                          </apex:outputPanel>
                                        </apex:outputPanel>
                                        </td>
                                      <th style="width:75px">提携状況</th>
                                      <td style="width:70px"><apex:outputText value="{!konnyusakiSogishaTeikeiJokyo}" id="idSogishaTeikeiJokyo"/>
                                        </td>
                                    </tr>
                                    <tr id="idKonyusakiKasobaTr">
                                        <th style="width: 116px">火葬場名</th>
                                      <td style="padding-right: 5px;"><apex:inputText id="idKonnyusakiKasobaText" value="{!ota.KonnyusakiKasobaText__c}" style="width:263px" onblur="delShisetsuSuggest();setKonnyusakiKasobaLink();"/>
                                        <div id="hidKonnyusakiKasobaText" class="clshidArea"></div>
                                        </td>
                                      <th style="">データ</th>
                                      <td style="width:80px">
                                        <apex:inputHidden id="idHidKonnyusakiKasobaId" value="{!konnyusakiKasobaTeikeiId}"/>
                                        <apex:inputHidden id="idHidKonnyusakiKasobaName" value="{!konnyusakiKasobaTeikeiName}"/>
                                        <apex:outputPanel id="idKonnyusakiKasobaPanel">
                                          <apex:outputPanel rendered="{!IF(konnyusakiKasobaTeikeiId == '', true, false)}">なし</apex:outputPanel>
                                          <apex:outputPanel rendered="{!IF(konnyusakiKasobaTeikeiId != '', true, false)}">
                                            <a href="#" onclick="openKonnyusaki('idHidKonnyusakiKasobaId');" >参照</a> 
                                          </apex:outputPanel>
                                        </apex:outputPanel>
                                        </td>
                                    </tr>
                                    <tr id="idKonyusakiSaijoTr">
                                      <th style="width: 116px">斎場名</th>
                                      <td style="padding-right: 5px;"><apex:inputText id="idKonnyusakiSaijoText" value="{!ota.KonnyusakiSaijoText__c}" style="width:263px" onblur="delShisetsuSuggest();setKonnyusakiSaijoLink();"/>
                                        <div id="hidKonnyusakiSaijoText" class="clshidArea"></div>
                                        </td>
                                      <th style="">データ</th>
                                      <td style="width:80px">
                                        <apex:inputHidden id="idHidKonnyusakiSaijoId" value="{!konnyusakiSaijoTeikeiId}"/>
                                        <apex:inputHidden id="idHidKonnyusakiSaijoName" value="{!konnyusakiSaijoTeikeiName}"/>
                                        <apex:outputPanel id="idKonnyusakiSaijoPanel">
                                          <apex:outputPanel rendered="{!IF(konnyusakiSaijoTeikeiId == '', true, false)}">なし</apex:outputPanel>
                                          <apex:outputPanel rendered="{!IF(konnyusakiSaijoTeikeiId != '', true, false)}">
                                            <a href="#" onclick="openKonnyusaki('idHidKonnyusakiSaijoId');" >参照</a> 
                                          </apex:outputPanel>
                                        </apex:outputPanel>
                                        </td>
                                      <th style="width:75px">提携状況</th>
                                      <td style="width:70px"><apex:outputText value="{!konnyusakiSaijoTeikeiJokyo}" id="idSaijoTeikeiJokyo"/>
                                        </td>
                                    </tr>
                                    <tr id="idKonyusakiKyogoTashaTr">
                                      <th style="width: 116px">競合他社名</th>
                                      <td><apex:inputfield value="{!ota.KonnyusakiKyogoTasha__c}" id="idKonnyusakiKyogoTasha" onchange="dspKyogoTashaSonota();"/>
                                        </td>
                                      <th style="width: 135px;" id="idKyogotashaSonotaTh">競合他社その他</th>
                                      <td colspan="3" id="idKyogotashaSonotaTd"><apex:inputfield value="{!ota.KonnyusakiKyogoTashaText__c}" />
                                        </td>
                                    </tr>
                                  </table>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <th>他社相談状況</th>
                              <td><apex:inputfield value="{!ota.TashaSodanJokyo__c}" id="idTashaSodanJokyo" onchange="changeKonnyusaki();"/>
                                </td>
                              <th>案件種別</th>
                              <td style="width:155px"><apex:outputText value="{!ankenShubetsu}" id="idAnkenShubetsu"/>
                                <apex:inputHidden id="idHToiawaseJogaiKubun" value="{!toiawaseJogaiKubun}"/>
                                </td>
                              <td>
                                <apex:commandButton id="idSaijoToiawaseBtn" style="background: #9acd32;color: white;font-weight: inherit;width:100px;" action="{!saijotoiawase}" onclick="if(!window.confirm('斎場問合せ処理を行います。よろしいですか？')){return false;}" value="斎場問合せ" rerender="idHozonMsg" />
                              </td>
                              <td></td>
                              <th></th>
                              <td>
                                </td>
                            </tr>
                          </table>
                        </div>
                      </apex:outputpanel>
                    </div>
                  </div>
                </div>
                <script>
                $(function() {
                  $('.ryunyuNyuden_btn').on('click', function(event) {
                    var baseHeight = document.getElementById('idMainContents').clientHeight;
                    if ($('#idRyunyuNyudenPanel').is(':hidden')) {
                      baseHeight = baseHeight - 115;
                    } else {
                      baseHeight = baseHeight + 115;
                    }
                    document.getElementById("idMainContents").style.height = baseHeight + 'px';
                    $('#idRyunyuNyudenPanel').slideToggle(200);
                  });
                });
          
                $(function() {
                  $('.ryunyuNyuden_btn').on('click', function(event) {
                    event.preventDefault();
                    $(this).toggleClass('active');
                  });
                });
              </script>

                <div style="display: flex;">
                  <apex:outputpanel id="idSodanshaPanel">
                    <div style="display: flex;margin-top:5px">
                      <div>【基本聴取事項】</div> <label style="color:red" id="idAlert1"></label><input type="hidden" id="idCampaignSogiyoBouquetFlg" value="{!campaignSogiyoBouquetFlg}"/></div>
                    <div>
                      <table>
                        <tr>
                          <th>起因者 (初回)</th>
                          <td>
                            <apex:selectList value="{!ToiawaseKiinsha}" id="idToiawaseKiinsha" multiselect="false" size="1" >
                              <apex:selectOptions value="{!ToiawaseKiinshaOpt}" />
                            </apex:selectList>
                          </td>
                        </tr>
                      </table>
                      <table cellpadding="5px" cellspacing="0">
                        <tr>
                          <th>相談者　セイ</th>
                          <td>
                            <apex:inputfield value="{!ota.SodanshaSeiKana__c}" style="width:65px;" id="idSodanshaSeiKana1" onchange="clearOnakunariSodansha();" /> </td>
                          <th>メイ</th>
                          <td>
                            <apex:inputtext value="{!ota.SodanshaMeiKana__c}" style="width:65px" id="idSodanshaMeiKana1" /> </td>
                          <th>携帯電話</th>
                          <td colspan="2">
                            <apex:inputfield value="{!ota.MobilePhone__c}" style="width:90px;" id="idMobilePhone" onchange="telNumberCheck();clearOnakunariPhone();" type="tel" /> </td>
                          <th>固定電話</th>
                          <td style="padding:0 5px 0 0">
                            <apex:inputfield value="{!ota.Phone__c}" style="width:90px" id="idPhone" onchange="telNumberCheck();clearOnakunariPhone();" type="tel" /> </td>
                          <th>優先</th>
                          <td>
                            <apex:inputfield value="{!ota.TelNoPrimaryKubun__c}" id="idSodanshaYusenDenwaKubun" /> </td>
                        </tr>
                        <tr>
                          <th>姓</th>
                          <td>
                            <apex:inputfield value="{!ota.SodanshaSei__c}" style="width:65px" id="idSodanshaSei1" /> </td>
                          <th>名</th>
                          <td>
                            <apex:inputfield value="{!ota.SodanshaMei__c}" style="width:65px" id="idSodanshaMei1" /> </td>
                          <th>Mail</th>
                          <td colspan="6">
                            <apex:inputfield value="{!ota.ShiryoseikyushaMail__c}" style="width:267px" id="idMail1" type="email" />
                          </td>
                        </tr>
                        <tr>
                          <th>性別</th>
                          <td colspan="2">
                            <apex:inputfield value="{!ota.SodanshaSeibetsu__c}" id="idSodanshaSeibetsu" /> </td>
                          <th colspan="2">郵便番号</th>
                          <td><apex:inputfield value="{!ota.ShiryoseikyushaPostalCode__c}" style="width:55px" id="idSodanshaPostalCode1" type="tel" onkeypress="setSodanshaAddress('idSodanshaPostalCode1');" /></td>
                          <td style="padding:0 5px 0 0"><apex:commandButton onclick="sodanshaPostalCodeCheck('idSodanshaPostalCode1');" id="idSodanshaPostalCode1SerchBtn" value="検索" rerender="dummy" style="width:35px" /></td>
                          <th>都道府県</th>
                          <td style="padding:0 5px 0 0">
                            <apex:inputfield value="{!ota.ShiryoseikyushaStateText__c}" id="idSodanshaState1" style="width:90px" /> </td>
                          <th>市区郡</th>
                          <td>
                            <apex:inputfield value="{!ota.ShiryoseikyushaCity__c}" id="idSodanshaCity1" type="text" style="width:74px" /> </td>
                        </tr>
                        <tr>
                          <th></th>
                          <td></td>
                          <td></td>
                          <th colspan="2">町名・番地</th>
                          <td colspan="6"><apex:inputfield value="{!ota.ShiryoseikyushaStreet__c}" style="width:403px" id="idSodanshaStreet1" type="text" /></td>
                        </tr>
                      </table>
                    </div>
                  </apex:outputpanel>
                  <div>
                    <div style="margin-top:5px">【重要連絡事項】</div>
                    <div>
                      <table>
                        <tr>
                          <th>　　　</th>
                          <td>
                          </td>
                        </tr>
                      </table>
                      <table cellpadding="5px" cellspacing="0">
                        <tr>
                          <th style="color:{!IF(ota.KeisatsuAnken__c, 'red', 'black')}">
                            <apex:outputLabel value="警察案件" id="idKeisatsuAnkenLabel" />
                          </th>
                          <td>
                            <apex:inputfield value="{!ota.KeisatsuAnken__c  }" id="idKeisatsuAnken" onchange="changeLabelColor2('idKeisatsuAnkenLabel', this);" /> </td>
                          <th style="color:{!IF(ota.SosaiFujo__c, 'red', 'black')}">
                            <apex:outputLabel value="葬祭扶助" id="idSosaiFujoLabel" />
                          </th>
                          <td>
                            <apex:inputfield value="{!ota.SosaiFujo__c}" id="idSosaiFujo" onchange="changeLabelColor2('idSosaiFujoLabel', this);" /> </td>
                          <th style="color:{!IF(ota.TashaAnchi__c, 'red', 'black')}">
                            <apex:outputLabel value="他社安置" id="idTashaAnchiLabel" />
                          </th>
                          <td>
                            <apex:inputfield value="{!ota.TashaAnchi__c}" id="idTashaAnchi" onchange="changeLabelColor2('idTashaAnchiLabel', this);" /> </td>
                          <th style="color:{!IF(ota.TaijiAnken__c, 'red', 'black')}">
                            <apex:outputLabel value="胎児案件" id="idTaijiAnkenLabel" />
                          </th>
                          <td>
                            <apex:inputfield value="{!ota.TaijiAnken__c}" id="idTaijiAnken" onchange="changeLabelColor2('idTaijiAnkenLabel', this);" /> </td>
                        </tr>
                        <tr>
                          <th valign="top">重要連絡<br/>事項</th>
                          <td colspan="7" style="padding:0">
                            <apex:inputTextarea value="{!ota.JuyoRenrakuJiko__c}" cols="64" rows="5" id="idJuyoRenrakuJiko" onkeypress="enterActive(this);" /> </td>
                        </tr>
                      </table>
                    </div>
                  </div>
                </div>
                <div style="display: flex;">
                  <div><a class="square_btn1" href="#" style="width: 120px;" id="idTaishoshaA"><span>【対象者情報】▼</span><span>【対象者情報】▲</span></a></div>
                  <div>
                    <apex:outputPanel id="idKpiPanel" layout="block">
                        【現在状況】区分：<apex:outputText value="{!ota.SogiKPIGenzai__c}" id="idSogiKPIGenzai"/>
                        　　緊急度LV：<apex:outputText value="{!ota.KinkyudoLVGenzai__c}" id="idKinkyudoLVGenza"/>
                        　　(想定リードタイム：<apex:outputText value="{!ota.SoteiLeadTimeGenzai__c}" id="idSoteiLeadTimeGenzai"/>）
                        　　　　　更新日：<apex:outputField value="{!ota.SogiKPIGenzaiKoshinbi__c}" />
                    </apex:outputPanel>
                    <apex:inputHidden id="idHdnTaishoushaJokyoKeteiFlg" value="{!ota.TaishoushaJokyoKeteiFlg__c}"/>
                    <apex:inputHidden id="idHdnReportURL" value="{!ReportURL}"/>
                    <apex:outputPanel id="idTaishoushaJokyoPanel" layout="block">
                        <apex:outputText id="idTaishoshaKyojuKeitaith" styleClass="sfdcoutputText" value="対象者居住形態（初回）" />
                        <apex:selectList value="{!TaishoshaKyojuKeitai}" id="idTaishoshaKyojuKeitai" multiselect="false" size="1" onchange="setSogiKPI('idTaishoshaKyojuKeitai')" >
                          <apex:selectOptions value="{!TaishoshaKyojuKeitaiOpt}" />
                        </apex:selectList>

                        <apex:outputText id="idTaishoushaJokyoth" styleClass="sfdcoutputText" value="対象者状態（初回）" />
                        <apex:selectList value="{!TaishoushaJokyo}" id="idTaishoushaJokyo" multiselect="false" size="1" onchange="setSogiKPI('idTaishoushaJokyo')" >
                          <apex:selectOptions value="{!TaishoushaJokyoOpt}" />
                        </apex:selectList>

                        <apex:outputText id="idTaishoshaYomeiKikanth" styleClass="sfdcoutputText" value="余命期間（初回）" />
                        <apex:selectList value="{!TaishoshaYomeiKikan}" id="idTaishoshaYomeiKikan" multiselect="false" size="1" onchange="setSogiKPI('idTaishoushaJokyo')" >
                          <apex:selectOptions value="{!TaishoshaYomeiKikanOpt}" />
                        </apex:selectList>

                        <apex:outputText id="idTaishoshaKyojuKeitaiGenzaith" styleClass="sfdcoutputText" style="display: none;" value="対象者居住形態（現在）" />
                        <apex:selectList value="{!TaishoshaKyojuKeitaiGenzai}" id="idTaishoshaKyojuKeitaiGenzai" style="display: none;" multiselect="false" size="1" onchange="setSogiKPI('idTaishoshaKyojuKeitaiGenzai')" >
                          <apex:selectOptions value="{!TaishoshaKyojuKeitaiGenzaiOpt}" />
                        </apex:selectList>

                        <apex:outputText id="idTaishoushaJokyoGenzaith" styleClass="sfdcoutputText" style="display: none;" value="対象者状態（現在）" />
                        <apex:selectList value="{!TaishoushaJokyoGenzai}" id="idTaishoushaJokyoGenzai" style="display: none;" multiselect="false" size="1" onchange="setSogiKPI('idTaishoushaJokyoGenzai')" >
                          <apex:selectOptions value="{!TaishoushaJokyoGenzaiOpt}" />
                        </apex:selectList>

                        <apex:outputText id="idTaishoshaYomeiKikanGenzaith" styleClass="sfdcoutputText" style="display: none;" value="余命期間（現在）" />
                        <apex:selectList value="{!TaishoshaYomeiKikanGenzai}" id="idTaishoshaYomeiKikanGenzai" style="display: none;" multiselect="false" size="1" onchange="setSogiKPI('idTaishoshaYomeiKikanGenzai')" >
                          <apex:selectOptions value="{!TaishoshaYomeiKikanGenzaiOpt}" />
                        </apex:selectList>

                        <apex:outputText styleClass="sfdcoutputText" value="続き柄" />
                        <apex:inputfield value="{!ota.ZokugaraSodanshaNitottenoTaishosha__c}" id="idZokugaraSodanshaNitottenoTaishosha1" onchange="sycValue('idZokugaraSodanshaNitottenoTaishosha2', this);clearOnakunari('idZokugaraSodanshaNitottenoTaishosha1');" />

                        <input type="button" class="btn" id="idResetButton" value="リセットボタン" style="width:75px;margin-left: 20px;" onkeypress="ResetJokyo();" onclick="ResetJokyo();" />

                        <input type="button" class="btn" id="idRirekiButton" value="履歴ボタン" style="width:60px;margin-left: 20px;" onkeypress="openRireki();" onclick="openRireki();" />
                        <script>
                          taishoushaJokyodisplay();

                          function taishoushaJokyodisplay(){
                            if(document.getElementById('idPage:idForm:idHdnTaishoushaJokyoKeteiFlg').value == 'true'){
                              document.getElementById('idPage:idForm:idTaishoshaKyojuKeitaith').style.display = 'none';
                              document.getElementById('idPage:idForm:idTaishoshaKyojuKeitai').style.display = 'none';
                              document.getElementById('idPage:idForm:idTaishoushaJokyoth').style.display = 'none';
                              document.getElementById('idPage:idForm:idTaishoushaJokyo').style.display = 'none';
                              document.getElementById('idPage:idForm:idTaishoshaYomeiKikanth').style.display = 'none';
                              document.getElementById('idPage:idForm:idTaishoshaYomeiKikan').style.display = 'none';
                              document.getElementById('idPage:idForm:idTaishoshaKyojuKeitaiGenzaith').style.display = '';
                              document.getElementById('idPage:idForm:idTaishoshaKyojuKeitaiGenzai').style.display = '';
                              document.getElementById('idPage:idForm:idTaishoushaJokyoGenzaith').style.display = '';
                              document.getElementById('idPage:idForm:idTaishoushaJokyoGenzai').style.display = '';
                              document.getElementById('idPage:idForm:idTaishoshaYomeiKikanGenzaith').style.display = '';
                              document.getElementById('idPage:idForm:idTaishoshaYomeiKikanGenzai').style.display = '';
                            }else{
                              document.getElementById('idPage:idForm:idTaishoshaKyojuKeitaith').style.display = '';
                              document.getElementById('idPage:idForm:idTaishoshaKyojuKeitai').style.display = '';
                              document.getElementById('idPage:idForm:idTaishoushaJokyoth').style.display = '';
                              document.getElementById('idPage:idForm:idTaishoushaJokyo').style.display = '';
                              document.getElementById('idPage:idForm:idTaishoshaYomeiKikanth').style.display = '';
                              document.getElementById('idPage:idForm:idTaishoshaYomeiKikan').style.display = '';
                              document.getElementById('idPage:idForm:idTaishoshaKyojuKeitaiGenzaith').style.display = 'none';
                              document.getElementById('idPage:idForm:idTaishoshaKyojuKeitaiGenzai').style.display = 'none';
                              document.getElementById('idPage:idForm:idTaishoushaJokyoGenzaith').style.display = 'none';
                              document.getElementById('idPage:idForm:idTaishoushaJokyoGenzai').style.display = 'none';
                              document.getElementById('idPage:idForm:idTaishoshaYomeiKikanGenzaith').style.display = 'none';
                              document.getElementById('idPage:idForm:idTaishoshaYomeiKikanGenzai').style.display = 'none';
                            }
                          }
                        </script>
                    </apex:outputPanel>
                  </div>
                </div>

                <div id="idTaishoshaPanel" style="display: none">
                  <div class="summarpanel">
                    <div class="center-column">
                      <apex:outputpanel id="idTaishoshaPanel2">
                        <table cellpadding="5px" cellspacing="0">
                          <tr>
                            <th>対象者　セイ</th>
                            <td>
                              <apex:inputfield value="{!ota.TaishoshaSeiKana__c}" style="width:65px" id="idTaishoshaSeiKana" onchange="clearOnakunari('idTaishoshaSeiKana');" /> </td>
                            <th>メイ</th>
                            <td>
                              <apex:inputfield value="{!ota.TaishoshaMeiKana__c}" style="width:65px" id="idTaishoshaMeiKana" /> </td>
                            <th>生年月日</th>
                            <td style="width: 280px;">
                              <apex:actionFunction name="setSeinengappiSeirekiNenTsukiHiJs" action="{!setSeinengappiSeirekiNenTsukiHi}" rerender="idSeinengappiSeirekiNenTsukiHi,idMannenrei" />
                              <apex:selectList value="{!nengoValue}" size="1" id="idNengoValue" onchange="setSeinengappiSeirekiNenTsukiHiJs();" style="margin: 0 5px 0 0;height: 18px;">
                                <apex:selectOptions value="{!nengoPickList}" /> </apex:selectList>
                              <apex:input value="{!warekiNen}" id="idWarekiNen" onchange="setSeinengappiSeirekiNenTsukiHiJs();" style="width:20px" type="tel"/>&nbsp;年&nbsp;
                              <apex:input value="{!warekiTsuki}" id="idWarekiTsuki" onchange="setSeinengappiSeirekiNenTsukiHiJs();" style="width:20px" type="tel"/>&nbsp;月&nbsp;
                              <apex:input value="{!warekiHi}" id="idWarekiHi" onchange="setSeinengappiSeirekiNenTsukiHiJs();" style="width:20px" type="tel"/>&nbsp;日&nbsp;</td>
                            <th>&nbsp;&nbsp;(西暦)</th>
                            <td style="width:140px;border-bottom:1px #000 solid;">
                              <apex:outputtext id="idSeinengappiSeirekiNenTsukiHi" value="{0, date, yyyy/MM/dd}">
                                <apex:param value="{!ota.SeinengappiSeireki__c}"></apex:param>
                              </apex:outputtext>
                            </td>
                            <th width="85px">郵便番号</th>
                            <td style="padding:0">
                              <apex:inputfield id="idTaishoshaPostalCode" value="{!ota.TaishoshaPostalCode__c}" style="width:55px" type="tel" onkeypress="setTaishoshaAddress();"/>&nbsp;&nbsp;
                              <apex:commandButton onclick="taishoshaPostalCodeCheck();" id="idTaishoshaPostalCodeSerchBtn" value="検索" rerender="dummy" style="width:35px" />
                            </td>
                            <th style="width: 65px;">都道府県</th>
                            <td>
                              <apex:inputfield value="{!ota.TaiishoshaStateText__c}" id="idTaishoshaState" style="width:70px"/>
                            </td>
                            <th>市区郡</th>
                            <td style="padding:0"><apex:inputfield value="{!ota.TaishoshaCity__c}" id="idTaishoshaCity" style="width:80px" /></td>
                          </tr>
                          <tr>
                            <th>姓</th>
                            <td>
                              <apex:inputfield value="{!ota.TaishoshaSei__c}" id="idTaishoshaSei" style="width:65px" /> </td>
                            <th>名</th>
                            <td>
                              <apex:inputfield value="{!ota.TaishoshaMei__c}" id="idTaishoshaMei" style="width:65px" /> </td>
                            <th>没年月日</th>
                            <td>
                              <apex:actionFunction name="setBotsunengappiWarekiNenTsukiHiJs" action="{!setBotsunengappiWarekiNenTsukiHi}" rerender="idBotsunengappiWarekiNenTsukiHi,idMannenrei" />
                              <apex:inputfield value="{!ota.BotsunengappiSeireki__c}" id="idBotsunengappiSeireki" onchange="setBotsunengappiWarekiNenTsukiHiJs();" /></td>
                            <th>&nbsp;&nbsp;(和暦)</th>
                            <td style="width:140px;border-bottom:1px #000 solid;">
                              <apex:outputtext id="idBotsunengappiWarekiNenTsukiHi" value="{!ota.BotsunengappiWareki__c}" /> </td>
                            <th>町名･番地</th>
                            <td style="padding:0" colspan="5">
                              <apex:inputfield value="{!ota.TaishoshaStreet__c}" id="idTaishoshaStreet" style="width:400px" /> </td>
                          </tr>
                          <tr>
                            <th>性別</th>
                            <td colspan="2">
                              <apex:inputfield value="{!ota.TaishoshaSeibetsu__c}" id="idTaishoshaSeibetsu" /> </td>
                            <td></td>
                            <th>満年齢</th>
                            <td>
                              <apex:outputtext id="idMannenrei" value="{!strNenrei}" />
                            </td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                          </tr>
                          <tr>
                            <th>お迎え先名称</th>
                            <td colspan="4" style="padding:0">
                              <apex:inputfield value="{!ota.OmukaeSakiName__c}" id="idOmukaeSakiName1" onchange="sycValue('idOmukaeSakiName2', this);clearOmukaesakiName();" type="text" style="width:252px"/> </td>
                            <td>&nbsp;&nbsp;<input type="button" class="btn" id="idGoogleMap1" value="Google Map" onkeypress="openGoogleMap('idOmukaeSakiName1');" onclick="openGoogleMap('idOmukaeSakiName1');" style="width:80px"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>お迎え先住所</b></td>
                            <td colspan="8">
                              <apex:inputfield value="{!ota.OmukaeSakiJusho__c}" style="width:400px" id="idOmukaeSakiJusho1" onchange="sycValue('idOmukaeSakiJusho2', this);clearOmukaesakiJusho();" type="text" />
                              <input type="button" class="btn" id="idSodanshaJushoBtn1" value="相談者住所を設定" onkeypress="setOmukaesakiJusho('idSodanshaPostalCode1', 'idSodanshaState1', 'idSodanshaCity1', 'idSodanshaStreet1');"  onclick="setOmukaesakiJusho('idSodanshaPostalCode1', 'idSodanshaState1', 'idSodanshaCity1', 'idSodanshaStreet1');"/>
                              <input type="button" class="btn" id="idTaishoshaJushoBtn1" value="対象者住所を設定" onkeypress="setOmukaesakiJusho('idTaishoshaPostalCode', 'idTaishoshaState', 'idTaishoshaCity', 'idTaishoshaStreet');" onclick="setOmukaesakiJusho('idTaishoshaPostalCode', 'idTaishoshaState', 'idTaishoshaCity', 'idTaishoshaStreet');"/>
                            </td>
                          </tr>
                        </table>
                      </apex:outputpanel>
                    </div>
                  </div>
                </div>
              </div>
              <script>
                $(function() {
                  $('.square_btn1').on('click', function(event) {
                    var baseHeight = document.getElementById('idMainContents').clientHeight;
                    if ($('#idTaishoshaPanel').is(':hidden')) {
                      baseHeight = baseHeight - 120;
                    } else {
                      baseHeight = baseHeight + 120;
                    }
                    document.getElementById("idMainContents").style.height = baseHeight + 'px';
                    $('#idTaishoshaPanel').slideToggle(200);
                  });
                });
          
                $(function() {
                  $('.square_btn1').on('click', function(event) {
                    event.preventDefault();
                    $(this).toggleClass('active');
                  });
                });
              </script>
            </div>
          </div>
          <div class="main-contents" id="idMainContents">
            <div class="kibo">
              <div class="section-panel" style="padding:10px;width:759px;">
                <div class="kiboplan">
                  <div class="summarpanel">
                    <div class="center-column">
                      <div style="display: flex;">
                        <div>
                          <apex:commandButton styleClass="buttonstyle" value="プラン聴取" oncomplete="talkscript('PlanChoshu')" /> </div>
                        <div style="margin:0 0 0 10px">
                          <apex:commandButton styleClass="buttonstyle" value="僧侶手配" oncomplete="talkscript('SoryoTehai')" /> </div>
                        <div style="margin:0 0 0 10px">
                          <apex:commandButton styleClass="buttonstyle" value="クロスセル" oncomplete="talkscript('ClossSelling')" /> </div>
                      </div>
                      <div style="padding:5px 0 0 0;">【希望プラン】<apex:outputLabel value="{!taishogaiPlanMsg}" id="idTaishogaiPlanAlert" style="color:red"/></div>
                      <div>
                        <div>
                          <div style="display:flex;">
                            <div style="width: 81px; text-align: right; font-weight: bold; padding: 2px 5px 2px;">希望プラン</div>
                            <div style="padding: 2px 0px 2px 0px;">
                              <apex:inputfield value="{!ota.KiboKeishiki__c}" id="idKiboKeishiki" onchange="setAlert2();setAlert3();clearOnakunari('idKiboKeishiki');" /> </div>
                            <div style="width: 60px; text-align: right; font-weight: bold; padding: 2px 5px 2px;">仏具有無</div>
                            <div style="padding: 2px 0px 2px 0px;">
                              <apex:inputfield value="{!ota.ButsuguNashiKibo__c}" id="idButsuguNashiKibo" />
                            </div>
                          </div>
                          <div style="display:flex;">
                            <div style="width: 81px; text-align: right; font-weight: bold; padding: 2px 5px 2px;">祭壇希望</div>
                            <div style="padding: 2px 0px 2px 0px;"><apex:inputfield value="{!ota.SaidanKibo__c}" id="idSaidanKibo" /> </div>
                            <div style="width: 136px; text-align: right; font-weight: bold; padding: 2px 5px 2px;">棺上花束希望</div>
                            <div style="padding: 2px 0px 2px 0px;"><apex:inputfield value="{!ota.KanjoHanatabaKibo__c}" id="idKanjoHanatabaKibo" /></div>
                            <div style="width: 115px; text-align: right; font-weight: bold; padding: 2px 5px 2px;">お別れ花希望</div>
                            <div style="padding: 2px 0px 2px 0px;"><apex:inputfield value="{!ota.KagobanaKibo__c}" id="idKagobanaKibo" /></div>
                            <div style="width: 60px; text-align: right; font-weight: bold; padding: 2px 5px 2px;">枕花希望</div>
                            <div style="padding: 2px 0px 2px 0px;"><apex:inputfield value="{!ota.MakurabanaKibo__c}" id="idMakurabanaKibo" /></div>
                          </div>
                          <div style="display:flex;">
                            <div style="width: 81px; text-align: right; font-weight: bold; padding: 2px 5px 2px;">プラン備考</div>
                            <div style="padding: 2px 0px 2px 0px;"><apex:inputTextarea value="{!ota.PlanBiko__c}" id="idPlanBiko" onkeypress="enterActive(this);" style="width:508px;" rows="3"/></div>
                          </div>
                        </div>
                        <table cellpadding="5px" cellspacing="0">
                          <tr>
                            <th>希望安置先</th>
                            <td>
                              <apex:inputfield value="{!ota.KiboGoanchisaki__c}" id="idKiboGoanchisaki" onchange="sycValue('idKiboGoanchisaki2', this);openGoanchisakiJusho();clearOnakunari('idKiboGoanchisaki');" /> </td>
                            <th>安置面会希望有</th>
                            <td>
                              <apex:inputfield value="{!ota.GoanchiMenkaiKiboUmu__c}" id="idGoanchiMenkaiKiboUmu" /> </td>
                            <th></th>
                            <td style="padding:0;"></td>
                          </tr>
                          <tr>
                            <th>その他<br />ご安置関連</th>
                            <td colspan="5">
                              <apex:inputfield value="{!ota.SonotaGoanchiKanrenTokkijiko__c}" id="idSonotaGoanchiKanrenTokkijiko" style="width:300px"/> </td>
                          </tr>
                          <tr style="height: 30px">
                            <th id="idTHGoanchisakiJushoLabel" style="display: none">ご安置先住所</th>
                            <td id="idTDGoanchisakiJushoValue" style="display: none;padding:0" colspan="5">
                              <apex:inputfield value="{!ota.GoanchisakiJusho__c}" id="idGoanchisakiJusho" style="width:370px" onchange="sycValue('idGoanchisakiJusho2', this);"/>
                              <input type="button" class="btn" id="idSodanshaJushoBtn2" value="相談者住所を設定" onkeypress="setGoanchisakiJusho('idSodanshaPostalCode1', 'idSodanshaState1', 'idSodanshaCity1', 'idSodanshaStreet1');" onclick="setGoanchisakiJusho('idSodanshaPostalCode1', 'idSodanshaState1', 'idSodanshaCity1', 'idSodanshaStreet1');"/>
                              <input type="button" class="btn" id="idTaishoshaJushoBtn2" value="対象者住所を設定" onkeypress="setGoanchisakiJusho('idTaishoshaPostalCode', 'idTaishoshaState', 'idTaishoshaCity', 'idTaishoshaStreet');" onclick="setGoanchisakiJusho('idTaishoshaPostalCode', 'idTaishoshaState', 'idTaishoshaCity', 'idTaishoshaStreet');" /></td>
                          </tr>
                          <tr>
                            <th>参列者数 親族</th>
                            <td style="padding:0">
                              <apex:inputfield value="{!ota.SanretsushaShinzokuFrom__c}" style="width:25px" id="idSanretsushaShinzokuFrom" onchange="setAlert2();" type="tel" />&nbsp;～&nbsp;
                              <apex:inputfield value="{!ota.SanretsushaShinzokuTo__c}" style="width:25px" id="idSanretsushaShinzokuTo" onchange="setAlert2();" type="tel" />&nbsp;名</td>
                            <th>親族以外</th>
                            <td style="padding:0">
                              <apex:inputfield value="{!ota.SanretsushaShinzokuigaiFrom__c}" style="width:25px" id="idSanretsushaShinzokuigaiFrom" onchange="setAlert2();" type="tel" />&nbsp;～&nbsp;
                              <apex:inputfield value="{!ota.SanretsushaShinzokuigaiTo__c}" style="width:25px" id="idSanretsushaShinzokuigaiTo" onchange="setAlert2();" type="tel" />&nbsp;名</td>
                            <th></th>
                            <td style="padding:0;"></td>
                          </tr>
                          <tr>
                            <th></th>
                            <td colspan="7" height="20px" style="padding:0;"> <label style="color:red;" id="idAlert2"></label> </td>
                          </tr>
                          <tr>
                            <th>菩提寺の有無</th>
                            <td style="padding:0">
                              <apex:inputfield value="{!ota.BodaijinoUmu__c}" id="idBodaijinoUmu" onchange="setAlert3();setAlert4();clearOnakunari('idBodaijinoUmu');" /> </td>
                            <th>お墓有無</th>
                            <td style="padding:0" colspan="3">
                              <apex:inputfield value="{!ota.HakaUmuKubun__c}" id="idHakaUmuKubun" onchange="setAlert3();setUmieCrossSellArert();" /> <label style="color:blue" id="idAlert10"></label></td>
                          </tr>
                          <tr>
                            <th>菩提寺／<br />僧侶手配備考</th>
                            <td style="padding:0" colspan="5">
                              <apex:inputfield value="{!ota.BodaijiSoryoTehaiBiko__c}" id="idBodaijiSoryoTehaiBiko" style="width:300px"/> </td>
                          </tr>
                          <tr>
                            <td></td>
                            <td colspan="7" height="20px" style="padding:0;"> <label style="color:red;" id="idAlert3"></label> </td>
                          </tr>
                          <tr>
                            <th>宗教/宗旨</th>
                            <td style="padding:0">
                              <apex:inputfield value="{!ota.Syushi__c}" id="idSyushi" /> </td>
                            <th>宗派</th>
                            <td colspan="3" style="padding:0;">
                              <apex:inputfield value="{!ota.Syuha__c}" id="idSyuha" /> </td>
                          </tr>
                          <tr>
                            <th>僧侶手配希望</th>
                            <td>
                              <apex:inputfield value="{!ota.MonkArrangements__c}" id="idMonkArrangements" onchange="setAlert4();clearOnakunari('idMonkArrangements');" /> </td>
                            <th>菩提寺合意済</th>
                            <td>
                              <apex:inputfield value="{!ota.FamilyTempleObtainConsensus__c}" id="idBodaijiGoiZumi" /> </td>
                            <th></th>
                            <td style="padding:0;"></td>
                          </tr>
                          <tr>
                            <th></th>
                            <td colspan="7" height="20px"> <label style="color:red;" id="idAlert4"></label> </td>
                          </tr>
                          <tr>
                            <th>戒名希望</th>
                            <td>
                              <apex:inputfield value="{!ota.Kaimyojuyo__c}" id="idKaimyoKibo" /> </td>
                            <th>戒名・法名</th>
                            <td colspan="3">
                              <apex:inputfield value="{!ota.Kaimyo__c}" id="idKaimyoHomyo" /> </td>
                          </tr>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="section-panel" style="padding:10px 0 10px 10px;margin:0 10px 0 10px;">
                <div class="kiboarea">
                  <div class="summarpanel">
                    <div class="center-column">
                      <div>
                        <div>
                          <apex:commandButton styleClass="buttonstyle" value="エリア聴取" oncomplete="talkscript('AreaChoshu')" /> </div>
                      </div>
                      <div style="display: flex;padding:5px 0 0 0;">
                        <div>【希望エリア】</div> <label style="color:red" id="idAlert5"></label> </div>
                      <div>
                        <table cellpadding="5px" cellspacing="0">
                          <tr>
                            <td style="padding:0">
                              <table>
                                <tr>
                                  <th width="100px">希望地域1</th>
                                  <td style="padding:0">
                                    <apex:inputfield id="idKiboChiiki1" value="{!ota.PreExecuteArea__c}" style="width:120px" onFocus="clearKiboChiiki('idKiboChiiki1');" onchange="setAlert5();clearOnakunari('idKiboChiiki1');"  onBlur="clearAreaId('idKiboChiiki1');" onkeypress="openSaijokensaku('idKiboChiiki1');" type="text" />
                                    <input type="hidden" id="idKiboChiiki1HiddenLkid" />
                                    <input type="hidden" id="idKiboChiiki1HiddenName" />
                                  </td>
                                  <td width="26px" style="padding:0"> <input type="button" id="idAddAreaButton2" onclick="addArea('2');" value="+" class="btn" style="width:26px;display:{!IF(ota.PreExecuteArea2__c == null,'','none')}" onkeypress="addArea('2');" /> </td>
                                  <td style="padding:0">
                                    <input type="button" class="btn" style="width:65px;" id="idSaijoKensaku1Btn" onclick="openSaijokensakuClick('idKiboChiiki1');" onkeypress="openSaijokensaku('idKiboChiiki1');" value="斎場検索" rerender="dummy" /> </td>
                                </tr>
                                <tr id="idAddAreaTr2" style="display:{!IF(ota.PreExecuteArea2__c == null,'none','')}">
                                  <th>希望地域2</th>
                                  <td style="padding:0">
                                    <apex:inputfield id="idKiboChiiki2" value="{!ota.PreExecuteArea2__c}" style="width:120px" onFocus="clearKiboChiiki('idKiboChiiki2');" type="text" onBlur="clearAreaId('idKiboChiiki2');" onkeypress="openSaijokensaku('idKiboChiiki2');" />
                                    <input type="hidden" id="idKiboChiiki2HiddenLkid" />
                                    <input type="hidden" id="idKiboChiiki2HiddenName" />
                                  </td>
                                  <td style="padding:0"> <input type="button" id="idAddAreaButton3" onclick="addArea('3');" value="+" class="btn" style="width:26px;display:{!IF(ota.PreExecuteArea3__c == null,'','none')}" onkeypress="addArea('3');"/></td>
                                  <td style="padding:0"> <input type="button" class="btn" style="width:65px" id="idSaijoKensaku2Btn" onclick="openSaijokensakuClick('idKiboChiiki2');" onkeypress="openSaijokensaku('idKiboChiiki2');" value="斎場検索" /> </td>
                                </tr>
                                <tr id="idAddAreaTr3" style="display:{!IF(ota.PreExecuteArea3__c == null,'none','')}">
                                  <th>希望地域3</th>
                                  <td style="padding:0">
                                    <apex:inputfield id="idKiboChiiki3" value="{!ota.PreExecuteArea3__c}" style="width:120px" onFocus="clearKiboChiiki('idKiboChiiki3');" type="text" onBlur="clearAreaId('idKiboChiiki3');" onkeypress="openSaijokensaku('idKiboChiiki3');" />
                                    <input type="hidden" id="idKiboChiiki3HiddenLkid" />
                                    <input type="hidden" id="idKiboChiiki3HiddenName" />
                                  </td>
                                  <td style="padding:0"> <input type="button" id="idAddAreaButton4" onclick="addArea('4');" value="+" class="btn" style="width:26px;display:{!IF(ota.PreExecuteArea4__c == null,'','none')}" onkeypress="addArea('4');"/></td>
                                  <td style="padding:0"> <input type="button" class="btn" style="width:65px" id="idSaijoKensaku3Btn" onclick="openSaijokensakuClick('idKiboChiiki3');" onkeypress="openSaijokensaku('idKiboChiiki3');" value="斎場検索" /> </td>
                                </tr>
                                <tr id="idAddAreaTr4" style="display:{!IF(ota.PreExecuteArea4__c == null,'none','')}">
                                  <th>希望地域4</th>
                                  <td style="padding:0">
                                    <apex:inputfield id="idKiboChiiki4" value="{!ota.PreExecuteArea4__c}" style="width:120px" onFocus="clearKiboChiiki('idKiboChiiki4');" type="text" onBlur="clearAreaId('idKiboChiiki4');" onkeypress="openSaijokensaku('idKiboChiiki4');" />
                                    <input type="hidden" id="idKiboChiiki4HiddenLkid" />
                                    <input type="hidden" id="idKiboChiiki4HiddenName" />
                                  </td>
                                  <td style="padding:0"></td>
                                  <td style="padding:0"> <input type="button" class="btn" style="width:65px" id="idSaijoKensaku4Btn" onclick="openSaijokensakuClick('idKiboChiiki4');" onkeypress="openSaijokensaku('idKiboChiiki4');" value="斎場検索" /> </td>
                                </tr>
                              </table>
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <table>
                                <tr>
                                  <th width="100px">対象者住民票</th>
                                  <td style="padding-right: 5px"><input type="button" class="btn" style="width:90px" id="idTaishoshaJuminhyoBtn" onclick="setArea('idTaishoshaJuminhyoChiiki');taishoshaJuminhyoClearColor();" value="第1希望と同じ" onkeypress="setAreaEnter('idTaishoshaJuminhyoChiiki');taishoshaJuminhyoClearColor();"/>
                                  </td>
                                  <td style="padding-right: 0px">
                                    <apex:inputfield id="idTaishoshaJuminhyoChiiki" value="{!ota.TaishoshaNoJuminhyoRef__c}" style="width:120px" onFocus="clearKiboChiiki('idTaishoshaJuminhyoChiiki');" onchange="clearOnakunari('idTaishoshaJuminhyoChiiki');setAlert6();" type="text"  onBlur="clearAreaId('idTaishoshaJuminhyoChiiki');" onkeypress="openSaijokensaku('idTaishoshaJuminhyoChiiki');" />
                                    <input type="hidden" id="idTaishoshaJuminhyoChiikiHiddenLkid" />
                                    <input type="hidden" id="idTaishoshaJuminhyoChiikiHiddenName" />
                                  </td>
                                  <td style="padding:0"> <input type="button" class="btn" style="width:65px" id="idTaishoshaJuminhyoSaijoKensakuBtn" onclick="openSaijokensakuClick('idTaishoshaJuminhyoChiiki');" onkeypress="openSaijokensaku('idTaishoshaJuminhyoChiiki');" value="斎場検索" /> </td>
                                </tr>
                                <tr>
                                  <th>喪主住民票</th>
                                  <td style="padding-right: 5px"><input type="button" class="btn" style="width:90px" id="idMoshuJuminhyoBtn" onclick="setArea('idMoshuJuminhyoChiiki');" value="第1希望と同じ" onkeypress="setAreaEnter('idMoshuJuminhyoChiiki');"/>
                                  </td>
                                  <td style="padding-right: 0px">
                                    <apex:inputfield id="idMoshuJuminhyoChiiki" value="{!ota.MoshuNoJuminhyoRef__c}" style="width:120px" onFocus="clearKiboChiiki('idMoshuJuminhyoChiiki');" onchange="setAlert6();" type="text" onBlur="clearAreaId('idMoshuJuminhyoChiiki');" onkeypress="openSaijokensaku('idMoshuJuminhyoChiiki');" />
                                    <input type="hidden" id="idMoshuJuminhyoChiikiHiddenLkid" />
                                    <input type="hidden" id="idMoshuJuminhyoChiikiHiddenName" />
                                  </td>
                                  <td style="padding:0"> <input type="button" class="btn" style="width:65px" id="idMoshuJuminhyoSaijoKensakuBtn" onclick="openSaijokensakuClick('idMoshuJuminhyoChiiki');" onkeypress="openSaijokensaku('idMoshuJuminhyoChiiki');" value="斎場検索" /> </td>
                                </tr>
                                <tr>
                                  <td></td>
                                  <td colspan="3" height="20px"> <label style="color:red;" id="idAlert6"></label> </td>
                                </tr>
                              </table>
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <table>
                                <tr>
                                  <th width="100px">相談者からみた<br />対象者の続柄</th>
                                  <td>
                                    <apex:inputfield value="{!ota.ZokugaraSodanshaNitottenoTaishosha__c}" id="idZokugaraSodanshaNitottenoTaishosha2" onchange="sycValue('idZokugaraSodanshaNitottenoTaishosha1', this);clearOnakunari('idZokugaraSodanshaNitottenoTaishosha2');" /> </td>
                                  <th>決定権者</th>
                                  <td>
                                    <apex:inputfield value="{!ota.Ketteisha__c}" id="idKetteikensha" /> </td>
                                </tr>
                                <tr>
                                  <th width="100%">式場・火葬場<br/>備考</th>
                                  <td colspan="3">
                                    <apex:inputfield value="{!ota.ShikijoKasojoBiko__c}" id="idShikijoKasojoBiko" onkeypress="enterActive(this);" style="width:100%;" />
                                  </td>
                                </tr>
                              </table>
                            </td>
                          </tr>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div style="display: flex;width:100%;margin-top: 10px;">
              <div class="section-panel" style="padding:10px;margin-right:10px;width:1217px;">
                <div class="waribikistatus">
                  <div class="summarpanel">
                    <div class="center-column">
                      <div style="padding:5px 0 0 0;">【クロスセル提案】</div>
                      <div>
                        <apex:outputPanel id="idCrossSellingTeianPanel" layout="block" style="padding:5px 0 0 0;width: 100%">
                          <table class="kensakukekka" id="idCrossSellingTeianTable">
                            <thead>
                              <tr>
                                <th style="background-color: #364e96;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:30px"><font color="#FFFFFF">参照</font></th>
                                <th style="background-color: #364e96;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:110px"><font color="#FFFFFF">提案商品</font></th>
                                <th style="background-color: #364e96;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:100px"><font color="#FFFFFF">提案者</font></th>
                                <th style="background-color: #364e96;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:75px"><font color="#FFFFFF">提案日</font></th>
                                <th style="background-color: #364e96;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:130px"><font color="#FFFFFF">提案結果</font></th>
                                <th style="background-color: #364e96;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:170px"><font color="#FFFFFF">希望なしの理由</font></th>
                                <th style="background-color: #364e96;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:145px"><font color="#FFFFFF">理由備考</font></th>
                                <th style="background-color: #364e96;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:238px"><font color="#FFFFFF">クロスセル先コンタクト</font></th>
                                <th style="background-color: #364e96;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:30px"><font color="#FFFFFF">商談</font></th>
                                <th style="background-color: #364e96;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:75px"><font color="#FFFFFF">受注日</font></th>
                                <th style="background-color: #364e96;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:60px"><font color="#FFFFFF">ｱｸｼｮﾝ</font></th>
                              </tr>
                            </thead>
                            <tbody>
                              <apex:variable var="rowNumCrossSellingTeian" value="{!0}" />
                              <apex:repeat value="{!crossSellingTeianList}" var="crossSellingTeian" id="idCrossSellingTeianList">
                                <tr>
                                  <th style="text-align: center;width:30px"><apex:outputPanel rendered="{!IF(crossSellingTeian.Id == null, 'none', '')}">
                                    <a href="#" onclick="openCrossSellingTeian('{!crossSellingTeian.Id}');">
                                      <apex:image id="idCrossSellingTeianSanshoImage" value="{!$Resource.link_icon}" alt="Description of image here" width="20px"/>
                                    </a></apex:outputPanel></th>
                                  <th style="text-align: center;width:110px"><apex:inputField id="idTeianShohin" value="{!crossSellingTeian.TeianShohin__c}" /></th>
                                  <th style="text-align: center;width:100px"><apex:inputField id="idTeianShaRef" value="{!crossSellingTeian.TeianShaRef__c}" style="width:70px"/></th>
                                  <th style="text-align: center;width:75px"><apex:inputText id="idTeianbi" value="{!crossSellingTeian.Teianbi__c}" style="width:70px;" onclick="displayCalendarDate('idCrossSellingTeianList:' + '{!rowNumCrossSellingTeian}' + ':idTeianbi');" />
                                  </th>
                                  <th style="text-align: center;width:130px"><apex:inputField id="idTeianKekka" value="{!crossSellingTeian.TeianKekka__c}" onchange="displayCrossSellingForm({!rowNumCrossSellingTeian});" /></th>
                                  <th style="text-align: center;width:170px"><apex:inputField id="idKiboNashiNoRiyu" value="{!crossSellingTeian.KiboNashiNoRiyu__c}" /></th>
                                  <th style="text-align: center;width:145px"><apex:inputField id="idRiyuBiko" value="{!crossSellingTeian.RiyuBiko__c}" style="width:140px;display:{!IF(crossSellingTeian.TeianKekka__c == 'クロスセル希望なし','','none')}" /></th>
                                  <th style="text-align: center;width:238px;height:48px"><apex:inputField id="idComment" value="{!crossSellingTeian.Comment__c}" style="width:97%;display:{!IF(crossSellingTeian.TeianKekka__c == 'クロスセル希望なし','none','')}"/></th>
                                  <th style="text-align: center;width:30px">
                                    <apex:outputLink id="idCrossSellingSakiShodanId" onclick="openCrossSellingSakiShodan('{!crossSellingTeian.CrossSellingSakiOpportunityRef__c}');" style="display:{!IF(crossSellingTeian.CrossSellingSakiOpportunityRef__c == null, 'none', '')}">
                                      <apex:image id="idCrossSellingTeianSakiSanshoImage" value="{!$Resource.link_icon}" alt="Description of image here" width="20px"/>
                                    </apex:outputLink>
                                    <apex:inputHidden id="idHiddenCrossSellingSakiShodanId" value="{!crossSellingTeian.CrossSellingSakiOpportunityRef__c}" />
                                  </th>
                                  <th style="text-align: center;width:75px"><apex:outputField id="idJuchubi" value="{!crossSellingTeian.Juchubi__c}" /></th>
                                  <th style="text-align: center;width:60px">
                                    <div>
                                      <div style="margin:3px">
                                        <input type="button" value="+" style="width:40px;display: {!IF(crossSellingTeianList.size == rowNumCrossSellingTeian+1, '', 'none')}" onclick="addCrossSellingTeian('{!rowNumCrossSellingTeian}');" id="idAddCrossSellingTeianItem" />
                                      </div>
                                      <div style="margin:3px;">
                                        <input type="button" value="-" style="width:40px;display: {!IF(AND(crossSellingTeianList.size > 1,crossSellingTeian.CrossSellingSakiOpportunityRef__c==null), '', 'none')}" onclick="delCrossSellingTeian('{!rowNumCrossSellingTeian}', '{!crossSellingTeian.CrossSellingSakiOpportunityRef__c}');" id="idDelCrossSellingTeianItem" />
                                      </div>
                                    </div>
                                  </th>
                                </tr>
                                <apex:variable var="rowNumCrossSellingTeian" value="{!rowNumCrossSellingTeian + 1}" />
                              </apex:repeat>
                            </tbody>
                          </table>
                          <script>
                            for (var i = 0; i < {!crossSellingTeianList.size}; i++) {
                              var utcTeianbi = document.getElementById('idPage:idForm:idCrossSellingTeianList:' + i + ':idTeianbi').value;
                              if(utcTeianbi != '' && utcTeianbi != null){
                                var isoTeianbi = new Date(utcTeianbi);
                                var y = isoTeianbi.getFullYear();
                                var m = isoTeianbi.getMonth() + 1;
                                var d = isoTeianbi.getDate();
                                document.getElementById('idPage:idForm:idCrossSellingTeianList:' + i + ':idTeianbi').value = y + '/' + m + '/' + d;
                              }
                            }

                            function displayCrossSellingForm(objIndex){
                              var teianKekka = document.getElementById('idPage:idForm:idCrossSellingTeianList:' + objIndex + ':idTeianKekka').value;
                              if(teianKekka == 'クロスセル希望なし'){
                                document.getElementById('idPage:idForm:idCrossSellingTeianList:' + objIndex + ':idRiyuBiko').style.display = '';
                                document.getElementById('idPage:idForm:idCrossSellingTeianList:' + objIndex + ':idComment').style.display = 'none';
                              }
                              else{
                                document.getElementById('idPage:idForm:idCrossSellingTeianList:' + objIndex + ':idRiyuBiko').style.display = 'none';
                                document.getElementById('idPage:idForm:idCrossSellingTeianList:' + objIndex + ':idComment').style.display = '';
                              }
                            }
                          </script>
                        </apex:outputPanel>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div style="display: flex;width:100%;margin-top: 10px;">
              <div class="section-panel" style="padding:10px 0 10px 10px;width:314px;">
                <div class="waribikistatus">
                  <div class="summarpanel">
                    <div class="center-column">
                      <div>【割引ステータス】</div>
                      <div>
                        <table cellpadding="5px" cellspacing="0">
                          <apex:repeat value="{!waribikiList}" var="wribiki" id="idWaribikiStatusList">
                            <tr>
                              <th width="100px">{!wribiki.name}</th>
                              <td>
                                <div>{!wribiki.descr}</div>
                                <div> <span>{!wribiki.refNo}</span> </div>
                              </td>
                            </tr>
                          </apex:repeat>
                        </table>
                        <apex:inputHidden id="idHdnSodanshaMemberCode" value="{!opp.Account.MemberKubun__c}"/>
                        <apex:inputHidden id="idHdnTaishoshaMemberCode" value="{!opp.SimpleYasugoRef__r.TaishoshaRef__r.MemberKubun__c}"/>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="section-panel" style="padding:10px 0 10px 10px;margin:0 0 0 10px;width:260px;">
                <div class="waribikistatus">
                  <div class="summarpanel">
                    <div class="center-column">
                      <div>
                        <div style="display:flex;">
                          <div>【割引追加】</div>
                          <div style="padding-left:5px;"><label style="color:red" id="idHikaiinShikigoAnketoAlert"></label></div>
                        </div>
                        <div>
                          <table cellpadding="5px" cellspacing="0">
                            <tr>
                              <th>式後アンケート割同意状況</th>
                              <td><apex:inputfield value="{!ota.SurveyDiscountAgreeStatus__c}" style="width:70px" id="idShikigoAnketo" onchange="setAnketoSofuHoho();clearOnakunari('idShikigoAnketo');" /></td>
                            </tr>
                            <tr>
                              <th>式後アンケート送付方法</th>
                              <td></td>
                            </tr>
                            <tr>
                              <th>相談者SMS(携帯電話)</th>
                              <td><apex:inputfield value="{!ota.SurveySendWayHopeSms__c}" style="" id="idAnketoSodanshaSMS" onclick="setAnketoSofuHohoAlert();"/></td>
                            </tr>
                            <tr>
                              <th>相談者メール(Mail)</th>
                              <td><apex:inputfield value="{!ota.SurveySendWayHopeEmail__c}" style="" id="idAnketoSodanshaEmail" onclick="setAnketoSofuHohoAlert();"/></td>
                            </tr>
                            <tr>
                              <td colspan="2"><label style="color:red" id="idAnketoSofuHohoAlert"></label></td>
                            </tr>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="section-panel" style="padding:10px 10px 0 10px;margin:0 0 0 10px;width:603px;">
                <div style="width:100%">
                  <div style="width:100%" class="summarpanel">
                    <div style="width:100%" class="center-column">
                      <div>【アライアンス】</div>
                      <div style="width:100%">
                        <table style="width:100%" cellpadding="5px" cellspacing="0">
                          <tr>
                            <th>アライアンス</th>
                            <td style="padding-right:0px;width:254px">
                              <apex:inputfield value="{!ota.AllianceRef__c}" style="width:174px" id="idAllianceId" onchange="setAlert1();" onBlur="clearAreaId('idAllianceId');" onFocus="clearKiboChiiki('idAllianceId');"/>
                              <input type="hidden" id="idAllianceIdHiddenLkid" />
                              <input type="hidden" id="idAllianceIdHiddenName" />
                            </td>
                            <td>
                              <table aligh="left">
                                <tr id="idBenefitOneIdTr" style="display: none;">
                                  <th>会員ID</th>
                                  <td>
                                    <table>
                                      <tr>
                                      <td>
                                        <apex:inputfield value="{!ota.BenefitOneID__c}" style="width:80px" id="idBenefitOneId" onchange="setAlert1();" type="tel" /> </td>
                                      <th>会員名</th>
                                      <td>
                                        <apex:inputfield value="{!ota.BenefitOneName__c}" style="width:80px" id="idBenefitOneName" onchange="setAlert1();" /> </td>
                                      </tr>
                                    </table>
                                  </td>
                                </tr>
                                <tr id="idPostalClubIdTr" style="display: none;">
                                  <th>会員ID</th>
                                  <td>
                                    <apex:inputfield value="{!ota.PostalClubKaiinBango__c}" style="width:80px" id="idPostalClubKaiinBango" onchange="setAlert1();" type="tel" /> </td>
                                </tr>
                              </table>
                            </td>
                          </tr>
                          <tr>
                            <th style="vertical-align: top;">備考</th>
                            <td style="width:100%; padding-right:0px" colspan="2">
                              <div id="idSokyakujicyuitenAlliance" style="height: 115px; width: 510px; overflow-y: scroll; border: 1px dotted #333333;" />
                            </td>
                          </tr>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="section-panel" style="margin:10px 10px 0 0;width:1217px;">
              <div class="kiboshiharaihoho">
                <div class="summarpanel">
                  <div class="center-column">
                    <div style="display: flex">
                      <div>
                        <div>【相見積りヒアリング】</div>
                        <div>
                          <table cellpadding="5px" cellspacing="0">
                            <tr>
                              <th valign="top" width="110px">相見積ヒアリング者</th>
                              <td valign="top" style="padding-top:8px">
                                <apex:inputfield value="{!ota.AimitsumoriHiaringuSha__c}" id="idAimitsumoriHiaringuSha" />
                              </td>
                            </tr>
                            <tr>
                              <th valign="top" width="110px">相見積もり状況</th>
                              <td valign="top" style="padding-top:8px">
                                <apex:selectList id="idAimitsumoriJokyo" value="{!AimitsumoriJokyo}" size="1" multiselect="false">
                                  <apex:selectOptions value="{!AimitsumoriJokyoSelectOption}"/>
                                </apex:selectList>
                              </td>
                            </tr>
                            <tr>
                              <th valign="top" width="110px">価格オファリング実施</th>
                              <td valign="top" style="padding-top:8px">
                                <apex:selectList id="idKakakuOffering" value="{!KakakuOffering}" size="1" multiselect="false">
                                  <apex:selectOptions value="{!KakakuOfferingSelectOption}"/>
                                </apex:selectList>
                              </td>
                            </tr>
                          </table>
                        </div>
                      </div>
                      <div style="margin-left: 30px;">
                        <div>【相見積もりのポイント】</div>
                        <div>
                          <table cellpadding="5px" cellspacing="0">
                            <tr>
                              <th valign="top">価格</th>
                              <td valign="top" style="padding-top:8px">
                                <apex:inputfield value="{!ota.AimitsumoriPointKakaku__c}" id="idAimitsumoriPointKakaku" />
                              </td>
                            </tr>
                            <tr>
                              <th valign="top">式場</th>
                              <td valign="top" style="padding-top:8px">
                                <apex:inputfield value="{!ota.AimitsumoriPointShikijo__c}" id="idAimitsumoriPointShikijo" />
                              </td>
                            </tr>
                            <tr>
                              <th valign="top">その他</th>
                              <td valign="top" style="padding-top:8px">
                                <apex:inputfield value="{!ota.AimitsumoriPointSonota__c}" id="idAimitsumoriPointSonota" />
                              </td>
                            </tr>
                          </table>
                        </div>
                      </div>
                      <div style="margin-left: 30px;">
                        <div>【相見積もり備考欄】</div>
                        <div>
                         <apex:inputfield value="{!ota.AimitsumoriHiaringuBiko__c}" id="idAimitsumoriHiaringuBiko" style="width: 650px;height: 80px;" onkeypress="enterActive(this);" />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="section-panel" style="margin:10px 10px 0 0;height:100px;width:1217px;">
              <div class="kiboshiharaihoho">
                <div class="summarpanel">
                  <div class="center-column">
                    <div style="display: flex">
                      <div>
                        <div>【希望支払方法】</div>
                        <div>
                          <table cellpadding="5px" cellspacing="0">
                            <tr>
                              <th valign="top" width="120px">支払方法</th>
                              <td valign="top" style="padding-top:8px" width="216px">
                                <apex:inputfield value="{!ota.Shiharaihouhou__c}" id="idKiboShiharaiHoho1" onchange="chkShiharaiHoho(this);sycValue('idKiboShiharaiHoho2', this);clearKihoshiharaiHoho();" /> </td>
                              <th valign="top" rowspan="2">ご案内済み留意事項</th>
                              <td valign="top" style="padding-top:8px" rowspan="2">
                                <apex:selectList id="idGoannaizumiRyuijiko" value="{!goannaizumiRyuijikoSlt}" size="4" multiselect="true" onchange="sycValue2('idGoannaizumiRyuijiko', 'idGoannaizumiRyuijiko2');">
                                  <apex:selectOptions value="{!goannaizumiRyuijikoOpt}"/>
                                </apex:selectList>
                              </td>
                            </tr>
                            <tr id="idShiharaiHohoMikakuteiRiyu1Tr">
                              <th valign="top" width="120px">支払方法未確定理由</th>
                              <td valign="top" style="padding-top:8px">
                                <apex:inputfield value="{!ota.ShiharaiHohoMikakuteiRiyu__c}" id="idShiharaiHohoMikakuteiRiyu1" style="width: 200px;" onchange="sycValue('idShiharaiHohoMikakuteiRiyu2', this);" /> </td>
                            </tr>
                          </table>
                        </div>
                      </div>
                      <div class="ofaring">
                        <div>【オファリング】</div>
                        <div>
                          <table cellpadding="5px" cellspacing="0">
                            <tr>
                              <th width="110px">オファリング状況</th>
                              <td>
                                <apex:inputfield value="{!ota.OfferingJokyo__c}" id="idOfferingJokyo" /> </td>
                            </tr>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="section-panel" style="margin:10px 10px 0 0;width:1217px;">
              <div class="chuitensetsumei">
                <div class="summarpanel">
                  <div class="center-column">
                    <div>
                      <div>
                        <apex:commandButton value="注意点説明済" style="width:100px" oncomplete="talkscript('ChuitenSetsumei')" /> </div>
                    </div>
                    <div style="padding-top:5px">注意点説明済</div>
                    <div>
                      <table cellpadding="5px" cellspacing="0">
                        <tr>
                          <th width="110px" style="color:{!IF(ota.AnchiRyokin2hakuOr3haku__c, 'black', 'red')}">
                            <apex:outputLabel value="安置料金2泊or3泊" id="idAnchiRyokin2hakuOr3hakuLabel" />
                          </th>
                          <td>
                            <apex:inputfield value="{!ota.AnchiRyokin2hakuOr3haku__c  }" id="idAnchiRyokin2hakuOr3haku" onchange="changeLabelColor('idAnchiRyokin2hakuOr3hakuLabel', this);" /> </td>
                          <th style="color:{!IF(ota.ShikijoShiyoryo2man5senOr5man__c, 'black', 'red')}">
                            <apex:outputLabel value="式場使用料2.5万or5万or7万" id="idShikijoShiyoryo2man5senOr5manLabel" />
                          </th>
                          <td>
                            <apex:inputfield value="{!ota.ShikijoShiyoryo2man5senOr5man__c}" id="idShikijoShiyoryo2man5senOr5man" onchange="changeLabelColor('idShikijoShiyoryo2man5senOr5manLabel', this);" /> </td>
                          <th style="color:{!IF(ota.KasobaShiyoryoPlangai__c, 'black', 'red')}">
                            <apex:outputLabel value="火葬場使用料プラン外" id="idKasobaShiyoryoPlangaiLabel" />
                          </th>
                          <td>
                            <apex:inputfield value="{!ota.KasobaShiyoryoPlangai__c}" id="idKasojoShiyoryo1man5sen" onchange="changeLabelColor('idKasobaShiyoryoPlangaiLabel', this);" /> </td>
                          <th style="color:{!IF(ota.HansoKyori50km__c, 'black', 'red')}">
                            <apex:outputLabel value="搬送距離50km" id="idHansoKyori50kmLabel" />
                          </th>
                          <td>
                            <apex:inputfield value="{!ota.HansoKyori50km__c}" id="idHansoKyori50km" onchange="changeLabelColor('idHansoKyori50kmLabel', this);" /> </td>
                          <th style="color:{!IF(ota.HansoKaisu2kaiOr3kai__c, 'black', 'red')}">
                            <apex:outputLabel value="搬送回数2回or3回" id="idHansoKaisu2kaiOr3kaiLabel" />
                          </th>
                          <td>
                            <apex:inputfield value="{!ota.HansoKaisu2kaiOr3kai__c}" id="idHansoKaisu2kaiOr3kai" onchange="changeLabelColor('idHansoKaisu2kaiOr3kaiLabel', this);" /> </td>
                          <th style="color:{!IF(ota.ChokusoPlanMenkaiFuka__c, 'black', 'red')}">
                            <apex:outputLabel value="直葬プラン面会不可" id="idChokusoPlanMenkaiFukaLabel" />
                          </th>
                          <td>
                            <apex:inputfield value="{!ota.ChokusoPlanMenkaiFuka__c}" id="idChokusoPlanMenkaiFuka" onchange="changeLabelColor('idChokusoPlanMenkaiFukaLabel', this);" /> </td>
                          <th style="color:{!IF(ota.KeisatsuAnkenKenanryo__c, 'black', 'red')}">
                            <apex:outputLabel value="警察案件検案料" id="idKeisatsuAnkenKenanryoLabel" />
                          </th>
                          <td>
                            <apex:inputfield value="{!ota.KeisatsuAnkenKenanryo__c}" id="idKeisatsuAnkenKenanryo" onchange="changeLabelColor('idKeisatsuAnkenKenanryoLabel', this);" /> </td>
                        </tr>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="section-panel" style="margin:10px 10px 0 0;width:1217px;">
                <div class="summarpanel">
                    <div class="center-column">
                        <div style="display: flex; justify-content:space-between; padding-right: 16px;">
                            <div>【資料送付一覧】</div>
                            <div style="display: flex;">
                                <div><input type="button" class="btn" id="idCreateShirosofuBtn" value="新規" style="width:100px;" onclick="chkCreateShiryoSofu();" /></div>
                                <div style="padding-left: 10px;"><input type="button" class="btn" id="idSaishinShutokuBtn" value="最新取得" style="width:100px;" onclick="chkSogiShiryoSofuSetting();" />
                                </div>
                            </div>
                        </div>
                        <div>
                            <apex:outputPanel id="idSogiShiryoSofuWrapListPanel" layout="block" style="padding:5px 0 0 0;width: 100%">
                              <table class="sofujoList" id="idSogiShiryoSofuWrapListTable">
                                <thead class="sofujoList_scrollHead">
                                    <tr>
                                        <th style="background-color: #364e96;color: white;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:100px;"><font color="#FFFFFF">資料送付番号</font></th>
                                        <th style="background-color: #364e96;color: white;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:100px;"><font color="#FFFFFF">作成日時</font></th>
                                        <th style="background-color: #364e96;color: white;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:59px;"><font color="#FFFFFF">作成者</font></th>
                                        <th style="background-color: #364e96;color: white;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:74px;"><font color="#FFFFFF">送付状況</font></th>
                                        <th style="background-color: #364e96;color: white;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:74px;"><font color="#FFFFFF">送付種別</font></th>
                                        <th style="background-color: #364e96;color: white;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:74px;"><font color="#FFFFFF">郵送種別</font></th>
                                        <th style="background-color: #364e96;color: white;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:100px;"><font color="#FFFFFF">送付日時</font></th>
                                        <th style="background-color: #364e96;color: white;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:133px;"><font color="#FFFFFF">宛名</font></th>
                                        <th style="background-color: #364e96;color: white;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:216px;"><font color="#FFFFFF">宛先</font></th>
                                        <th style="background-color: #364e96;color: white;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:55px;"><font color="#FFFFFF">提案書</font></th>
                                        <th style="background-color: #364e96;color: white;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:55px;"><font color="#FFFFFF">PDF</font></th>
                                        <th style="background-color: #364e96;color: white;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:120px;"><font color="#FFFFFF">アクション</font></th>
                                    </tr>
                                </thead>
                                <tbody class="sofujoList_scrollBody">
                                  <apex:variable var="rowNumSogiShiryoSofuWrapList" value="{!0}" />
                                    <apex:repeat value="{!sogiShiryoSofuWrapList}" var="sogiShiryoSofuWrap" id="idSogiShiryoSofuWrapList">
                                        <tr id="idSogiShiryoSofuWrapDataTr{!rowNumSogiShiryoSofuWrapList}">
                                            <th style="text-align: center;width:100px;"><apex:outputLink value="/{!sogiShiryoSofuWrap.sogiShiryoSofu.Id}"><apex:outputField value="{!sogiShiryoSofuWrap.sogiShiryoSofu.Name}" /></apex:outputLink></th>
                                            <th style="text-align: center;width:100px;"><apex:outputText value="{0, date, yy/MM/dd HH:mm}" id="idSakuseiNichiji" >
                                                                                        <apex:param value="{!sogiShiryoSofuWrap.sogiShiryoSofu.CreatedDate + 9/24}" />
                                                                                    </apex:outputText></th>
                                            <th style="text-align: center;width: 55px;text-align: left; padding-left: 5px;"><apex:outputField value="{!sogiShiryoSofuWrap.sogiShiryoSofu.CreatedBy.LastName}" /></th>
                                            <th style="text-align: center;width: 70px; text-align: left; padding-left: 5px;"><apex:outputField value="{!sogiShiryoSofuWrap.sogiShiryoSofu.SofuJokyo__c}" /></th>
                                            <th style="text-align: center;width: 70px; text-align: left; padding-left: 5px;"><apex:outputField value="{!sogiShiryoSofuWrap.sogiShiryoSofu.SofuShubetsu__c}" /></th>
                                            <th style="text-align: center;width: 70px; text-align: left; padding-left: 5px;"><apex:outputField value="{!sogiShiryoSofuWrap.sogiShiryoSofu.YusoShubetsu__c}" /></th>
                                            <th style="text-align: center;width: 100px;"><apex:outputText value="{0, date, yy/MM/dd HH:mm}" id="idSofuNichiji" >
                                                                                        <apex:param value="{!sogiShiryoSofuWrap.sogiShiryoSofu.SofuNichiji__c + 9/24}" />
                                                                                    </apex:outputText></th>
                                            <th style="text-align: center;width:129px; text-align: left; padding-left: 5px;"><apex:outputText value="{!LEFT(sogiShiryoSofuWrap.sogiShiryoSofu.Atena__c, 12) & IF(LEN(sogiShiryoSofuWrap.sogiShiryoSofu.Atena__c) > 12, '…', '')}" /></th>
                                            <th style="text-align: center;width:211px; text-align: left; padding-left: 5px;"><apex:outputText value="{!LEFT(sogiShiryoSofuWrap.atesakiCustom, 20) & IF(LEN(sogiShiryoSofuWrap.atesakiCustom) > 20, '…', '')}" /></th>
                                            <th style="text-align: center;width:55px;"><apex:outputText value="{!sogiShiryoSofuWrap.teiansho}" /></th>
                                            <th style="text-align: center;width:55px;"><apex:outputText value="{!sogiShiryoSofuWrap.sogiShiryoSofu.PdfSakuseiJokyo__c}" /></th>
                                            <th style="text-align: center;width:120px;">
                                                <div style="display:flex;text-align: center">
                                                    <div style="font-size: 90%; padding-left:10px;">
                                                        <a href="#" onclick="referShiryoSofu('{!sogiShiryoSofuWrap.sogiShiryoSofu.Id}', '{!rowNumSogiShiryoSofuWrapList}');" id="idReferShirosofuBtn" ><u>参照</u></a>
                                                    </div>
                                                    <div style="font-size: 90%; padding-left:10px;">
                                                        <a href="#" onclick="copyShiryoSofu('{!sogiShiryoSofuWrap.sogiShiryoSofu.Id}');" id="idCopyShirosofuBtn" ><u>コピー</u></a>
                                                    </div>
                                                    <div style="font-size: 90%; padding-left:10px; display:{!IF(sogiShiryoSofuWrap.sogiShiryoSofu.PdfSakuseiJokyo__c=='作成済','', 'none')}">
                                                        <a href="#" onclick="chkOutPutShiryoSofu('{!sogiShiryoSofuWrap.sogiShiryoSofu.Id}', '{!sogiShiryoSofuWrap.sogiShiryoSofu.SofuShubetsu__c}', '{!rowNumSogiShiryoSofuWrapList}', '{!sogiShiryoSofuWrap.sogiShiryoSofu.SofuJokyo__c}');" id="idOutPutShirosofuA" ><u>印刷</u></a>
                                                        <apex:outputLink value="{!sogiShiryoSofuWrap.sogiShiryoSofu.SofuShiryoURL__c}" id="idOutPutShirosofuLink" />
                                                    </div>
                                                </div>
                                            </th>
                                        </tr>
                                        <apex:variable var="rowNumSogiShiryoSofuWrapList" value="{!rowNumSogiShiryoSofuWrapList + 1}" />
                                    </apex:repeat>
                                </tbody>
                              </table>
                            </apex:outputPanel>
                        </div>
                        <div style="margin:10px 0 0 0;">
                            <apex:outputPanel id="idInputSogiShiryoSofuWrapPanel" layout="block" style="padding:5px 0 0 0;width: 100%">
                                <apex:variable var="iSSSWrap" value="{!inputSogiShiroSofuWrap}" />
                                <apex:variable var="iSSSWrapISSS" value="{!iSSSWrap.inputSogiShiryoSofu}" />
                                <apex:inputHidden value="{!inputSogiShiroSofuWrap.inputSogiShiryoSofuFlg}" id="idHdnInputSogiShiryoSofuFlg" />
                                <apex:inputHidden value="{!iSSSWrapISSS.sogiShiryoSofu.PdfSakuseiJokyo__c}" id="idHdnPdfSakuseiJokyo" />
                                <div style="display:flex;">
                                    <div>
                                        <div style="display:flex;">
                                            <div>【資料送付情報】</div>
                                            <div><apex:outputText style="color:red" value="{!shiryoSofuErrMsg}" /></div>
                                            <div><label style="color:red" id="idAlert7"></label></div>
                                        </div>
                                        <div style="padding:5px 0 0 0;width: 100%">
                                            <div>
                                                <div style="display:flex;">
                                                    <div class="item_label_1" style="width: 85px;">送付状況</div><div class="item_value_1">
                                                        <apex:selectList value="{!iSSSWrap.sofuJokyoValue}" size="1" id="idSofuJokyo" style="width: 95px;" >
                                                            <apex:selectOptions value="{!IF(OR(iSSSWrap.sofuJokyoValue=='送付済' || iSSSWrap.sofuJokyoValue=='印刷済'), iSSSWrap.sofuJokyoDisabledOption,iSSSWrap.sofuJokyoEditOption)}"/>
                                                        </apex:selectList></div>
                                                    <div class="item_label_1" style="width: 70px;">送付種別</div><div class="item_value_1"><apex:inputField value="{!iSSSWrapISSS.sogiShiryoSofu.SofuShubetsu__c}" id="idSofuShubetsu" style="width: 82px;" onchange="displayAteSaki();" /></div>
                                                </div>
                                            </div>
                                            <div>
                                                <div style="display:flex; padding-top:5px;">
                                                    <div class="item_label_1" style="width: 85px;">宛名</div>
                                                    <div class="item_value_1"><apex:inputField value="{!iSSSWrapISSS.sogiShiryoSofu.Atena__c}" style="width: 244px;" id="idAtena" /></div>
                                                    <div style="padding-left: 17px;">
                                                        <input type="button" class="btn" id="idSodanshaJushoBtn5" style="font-weight: inherit;" value="相談者情報設定" onclick="setSofusakiJusho('idSodanshaSei1', 'idSodanshaMei1', 'idSodanshaPostalCode1', 'idSodanshaState1', 'idSodanshaCity1', 'idSodanshaStreet1', 'idMail1', 'idPhone');"/>
                                                    </div>
                                                    <div style="padding-left: 17px;">
                                                        <input type="button" class="btn" id="idTaishoshaJushoBtn5" style="font-weight: inherit;" value="対象者情報設定" onclick="setSofusakiJusho('idTaishoshaSei', 'idTaishoshaMei', 'idTaishoshaPostalCode', 'idTaishoshaState', 'idTaishoshaCity', 'idTaishoshaStreet');"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div>
                                                <div style="height: 88px;">
                                                    <div id="idSofuShubetsuYusoDiv" style="display: none;">
                                                        <div style="display:flex; padding-top:5px;">
                                                            <div class="item_label_1" style="width: 85px;">郵送種別</div>
                                                            <div class="item_value_1">
                                                              <apex:inputField value="{!iSSSWrapISSS.sogiShiryoSofu.YusoShubetsu__c}" id="idYusoShubetsu" style="width: 95px;" />
                                                            </div>
                                                            <div class="item_label_1" style="width: 80px;">急ぎ対応</div>
                                                            <div class="item_value_1">
                                                                <apex:inputfield value="{!iSSSWrapISSS.sogiShiryoSofu.IsogiTaio__c}" style="width:15px;" id="idIsogiTaio" />
                                                            </div>
                                                        </div>
                                                        <div style="display:flex; padding-top:5px;">
                                                            <div class="item_label_1" style="width: 85px;">郵便番号</div>
                                                            <div class="item_value_1">
                                                                <apex:inputfield value="{!iSSSWrapISSS.sogiShiryoSofu.PostalCode__c}" style="width:60px;" id="idPostalCode5" type="tel" />
                                                            </div>
                                                            <div style="padding-left: 5px;">
                                                                <apex:commandButton onclick="shiryoSofuPostalCodeCheck('idPostalCode5', 'idState5', 'idCity5', 'idStreet5');" id="idPostalCode5SerchBtn" value="検索" rerender="dummy" style="width:35px;font-weight: inherit;" />
                                                            </div>
                                                            <div class="item_label_1" style="width: 65px;">都道府県</div>
                                                            <div class="item_value_1">
                                                                <apex:inputfield value="{!iSSSWrapISSS.sogiShiryoSofu.State__c}" id="idState5" style="width:64px" />
                                                            </div>
                                                            <div class="item_label_1" style="width: 87px;">市区郡</div>
                                                            <div class="item_value_1">
                                                                <apex:inputfield value="{!iSSSWrapISSS.sogiShiryoSofu.City__c}" id="idCity5" type="text" style="width: 122px;"/>
                                                            </div>
                                                        </div>
                                                        <div style="display:flex; padding-top:5px;">
                                                            <div class="item_label_1" style="width: 85px;">町名・番地</div>
                                                            <div class="item_value_1">
                                                                <apex:inputfield value="{!iSSSWrapISSS.sogiShiryoSofu.Street__c}" style="width:466px" id="idStreet5" type="text" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div id="idSofuShubetsuEmailDiv" style="display: none;">
                                                        <div style="display:flex; padding-top:5px;">
                                                            <div class="item_label_1" style="width: 85px;">メール</div>
                                                            <div class="item_value_1">
                                                                <apex:inputfield value="{!iSSSWrapISSS.sogiShiryoSofu.Mail__c}" style="width:244px" id="idSofuShiryoMail" type="email" />
                                                            </div>
                                                            <div class="item_label_1" style="width: 115px;">パスワード</div>
                                                            <div class="item_value_1">
                                                                <apex:outputfield value="{!iSSSWrapISSS.sogiShiryoSofu.PassWord__c}" style="" id="idSofuShiryoPassWord" />
                                                                <apex:inputHidden value="{!iSSSWrapISSS.sogiShiryoSofu.SofuShiryoURL__c}" id="idSofuShiryoURL" />
                                                            </div>
                                                        </div>
                                                        <div style="display:flex; padding-top:5px;">
                                                            <div class="item_label_1" style="width: 85px;">テンプレート</div>
                                                            <div class="item_value_1">
                                                                <apex:inputfield value="{!iSSSWrapISSS.sogiShiryoSofu.Template__c}" id="idShiryoSofuTemplate" style="" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div id="idSofuShubetsuFaxDiv" style="display: none;">
                                                        <div style="display:flex; padding-top:5px;">
                                                            <div class="item_label_1" style="width: 85px;">FAX</div>
                                                            <div class="item_value_1">
                                                                <apex:inputfield value="{!iSSSWrapISSS.sogiShiryoSofu.Fax__c}" style="width:244px" id="idSofuShiryoFax" type="tel" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div>
                                                    <div style="display:flex; padding-top:5px;">
                                                        <div>
                                                          <div style="display:flex;">
                                                              <div class="item_label_1" style="width: 85px;">パンフレット</div>
                                                              <div class="item_value_1">
                                                                  <apex:inputfield value="{!iSSSWrapISSS.sogiShiryoSofu.PamphletYohi__c}" id="idPamphletYohi" />
                                                              </div>
                                                          </div>
                                                          <div style="display:flex; padding-top:5px;">
                                                            <div class="item_label_1" style="width: 85px;">火葬式用文言<br/>で印刷</div>
                                                            <div class="item_value_1">
                                                                <apex:inputfield value="{!iSSSWrapISSS.sogiShiryoSofu.KasoshikiyoMongon__c}" id="idKasoshikiyoMongon" />
                                                            </div>
                                                        </div>
                                                        </div>
                                                        <div style="display:flex;">
                                                            <div class="item_label_1" style="width: 89px;">印刷物一覧</div>
                                                            <div class="item_value_1">
                                                                <apex:selectList value="{!iSSSWrap.insatsubutsuIchiranValue}" size="5" multiselect="true" id="idInsatsubutsuIchiran" style="overflow-y: hidden;" >
                                                                    <apex:selectOptions value="{!iSSSWrap.insatsubutsuIchiranOption}"/>
                                                                </apex:selectList>
                                                                <apex:inputHidden id="idSogiSofuShiryoTeianshoNum" value="{!iSSSWrap.teianshoNum}" />
                                                            </div>
                                                        </div>
                                                        <div>
                                                            <div style="display:flex;">
                                                                <div class="item_label_1" style="width: 80px;">他送付物1</div>
                                                                <div class="item_value_1">
                                                                    <apex:inputfield value="{!iSSSWrapISSS.sogiShiryoSofu.TaSofubutsu1__c}" id="idTaSofubutsu1" style="width: 130px;" />
                                                                </div>
                                                            </div>
                                                            <div style="display:flex; padding-top:8px;">
                                                                <div class="item_label_1" style="width: 80px;">他送付物2</div>
                                                                <div class="item_value_1">
                                                                    <apex:inputfield value="{!iSSSWrapISSS.sogiShiryoSofu.TaSofubutsu2__c}" id="idTaSofubutsu2" style="width: 130px;" />
                                                                </div>
                                                            </div>
                                                            <div style="display:flex; padding-top:8px;">
                                                                <div class="item_label_1" style="width: 80px;">他送付物3</div>
                                                                <div class="item_value_1">
                                                                    <apex:inputfield value="{!iSSSWrapISSS.sogiShiryoSofu.TaSofubutsu3__c}" id="idTaSofubutsu3" style="width: 130px;" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div style="display:flex;">
                                                    <div>
                                                        <div style="display:flex; padding-top:5px;">
                                                            <div class="item_label_1" style="width: 85px;">補足説明<br/>(送付状)</div>
                                                            <div class="item_value_1">
                                                                <apex:inputfield value="{!iSSSWrapISSS.sogiShiryoSofu.HosokuSetsumei__c}" id="idHosokuSetsumei" style="width: 467px; height: 46px;" onkeypress="enterActive(this);" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div style="display:flex;">
                                                    <div>
                                                        <div style="display:flex; padding-top:5px;">
                                                            <div class="item_label_1" style="width: 85px;">業サポへの<br/>引継事項</div>
                                                            <div class="item_value_1">
                                                                <apex:inputfield value="{!iSSSWrapISSS.sogiShiryoSofu.HikitsugiJiko__c}" id="idHikitsugiJiko" style="width: 467px; height: 46px;" onkeypress="enterActive(this);" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div style="padding-top:5px; display:flex;">
                                                <div style="width: 88px;">
                                                </div>
                                                <div>
                                                    <input type="button" class="btn" id="idShiryoSofuSaveBtn" value="保存" style="width:80px; font-weight: inherit;" onclick="if(saveSogiShiryoSofu()){ saveSogiShiryoSofuJs(); }" />
                                                </div>
                                                <div style="display:flex; padding-left: 20px;">
                                                    <div>
                                                        <input type="button" class="btn" id="idShiryoSofuMailPreviewBtn" value="メールプレビュー" style="width:120px; font-weight: inherit;" onclick="shiryoSofuMailPreview();" />
                                                    </div>
                                                </div>
                                                <div style="display:flex; padding-left: 20px;">
                                                    <div>
                                                        <input type="button" class="btn" id="idShiryoSofuSendMailBtn" value="メール送信" style="width:80px; font-weight: inherit;" onclick="confirmShiryoSofuMailSend();" />
                                                    </div>
                                                </div>
                                                <div style="padding-left: 80px;">
                                                    <input type="button" class="btn" id="idShiryoSofuDelBtn" value="削除" style="width:68px; font-weight: inherit;" onclick="confirmShiryoSofuDelete();" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="padding-left: 15px;">
                                        <div>
                                            <apex:outputPanel id="idTeianListPanel" >
                                                <div>【火葬場提案リスト】</div>
                                                <div>
                                                    <table class="sofujoList" id="idKasobaTeianListTable">
                                                        <thead>
                                                            <tr>
                                                                <th style="background: #364e96;color: white;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:65px;"><font color="#FFFFFF">施設区分</font></th>
                                                                <th style="background: #364e96;color: white;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:280px;"><font color="#FFFFFF">火葬場名</font></th>
                                                                <th style="background: #364e96;color: white;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:150px;"><font color="#FFFFFF">市区郡</font></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <apex:repeat value="{!iSSSWrap.kasobaTeianList}" var="kasobaTeian" id="idKasobaTeianList">
                                                                <tr>
                                                                    <th style="width:60px; text-align: left; height: 20px; padding-left:5px;"><apex:outputField value="{!kasobaTeian.ShisetsuRef__r.KoeiMinei__c}" /><apex:inputHidden value="{!kasobaTeian.ShisetsuRef__r.ShutokenIchibuChiki__c}" id="idShutokenIchibuChiki" /></th>
                                                                    <th style="width:275px; text-align: left; height: 20px; padding-left:5px;"><apex:outputField value="{!kasobaTeian.ShisetsuRef__r.Name}" id="idKasobaTeianName" /></th>
                                                                    <th style="width:145px; text-align: left; height: 20px; padding-left:5px;"><apex:outputField value="{!kasobaTeian.ShisetsuRef__r.Shikugun__r.Name}" /></th>
                                                                </tr>
                                                            </apex:repeat>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <div style="padding:18px 0 0 0">【斎場提案リスト】</div>
                                                <div>
                                                    <table class="sofujoList" id="idSaijoTeianListTable">
                                                        <thead>
                                                            <tr>
                                                                <th style="background: #364e96;color: white;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:65px;"><font color="#FFFFFF">施設区分</font></th>
                                                                <th style="background: #364e96;color: white;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:280px;"><font color="#FFFFFF">斎場名</font></th>
                                                                <th style="background: #364e96;color: white;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:150px;"><font color="#FFFFFF">市区郡</font></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <apex:repeat value="{!iSSSWrap.saijoTeianList}" var="saijoTeian" id="idSaijoTeianList">
                                                                <tr>
                                                                    <th style="width:60px; text-align: left; height: 20px; padding-left:5px;"><apex:outputField value="{!saijoTeian.SaijoRef__r.ShisetsuKubun__c}" /></th>
                                                                    <th style="width:275px; text-align: left; height: 20px; padding-left:5px;"><apex:outputField value="{!saijoTeian.SaijoRef__r.Name}" />&nbsp;</th>
                                                                    <th style="width:145px; text-align: left; height: 20px; padding-left:5px;"><apex:outputField value="{!saijoTeian.SaijoRef__r.ShikugunRef__r.Name}" /></th>
                                                                </tr>
                                                            </apex:repeat>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </apex:outputPanel>
                                        </div>
                                        <div style="display:flex; padding-top: 8px;">
                                            <div style="padding-left: 150px;">
                                                <input type="button" class="btn" style="width:100px;" id="idSaijoKensaku5Btn" onclick="openSaijokensakuShiryoSofuClick();" value="斎場検索" />
                                            </div>
                                            <div style="padding-left: 20px;">
                                                <input type="button" class="btn" style="width:100px;" id="idTeianListShutokuBtn" onclick="getTeianList();" value="提案リスト取得" />
                                            </div>
                                        </div>
                                    </div>
                                    <div style="padding-left: 10px;">
                                      <input type="button" class="btn" style="" id="idTeianshoSakuseiJokenKoshinBtn" onclick="chkTeianshoSakuseiJokenKoshin();" value="提案書作成条件更新 " />
                                    </div>
                                </div>
                                <script>
                                  document.getElementById('{!$Component.idSofuJokyo}').disabled = isEditSogiShiryoSave();
                                  document.getElementById('{!$Component.idSofuShubetsu}').disabled = isEditNotShiryoSakuseichu();
                                  document.getElementById('{!$Component.idYusoShubetsu}').disabled = isEditNotShiryoSakuseichu();
                                  document.getElementById('{!$Component.idAtena}').disabled = isEditNotShiryoSakuseichu();
                                  document.getElementById('idSodanshaJushoBtn5').disabled = isEditNotShiryoSakuseichu();
                                  document.getElementById('idSodanshaJushoBtn5').style.background = isEditNotShiryoSakuseichu() ? '#e9e9e9' : '#e8e8e9';
                                  document.getElementById('idSodanshaJushoBtn5').style.color = isEditNotShiryoSakuseichu() ? 'gray' : 'black';
                                  document.getElementById('idTaishoshaJushoBtn5').disabled = isEditNotShiryoSakuseichu() || document.getElementById('{!$Component.idSofuShubetsu}').value != "郵便";
                                  document.getElementById('idTaishoshaJushoBtn5').style.background = isEditNotShiryoSakuseichu() || document.getElementById('{!$Component.idSofuShubetsu}').value != "郵便" ? '#e9e9e9' : '#e8e8e9';
                                  document.getElementById('idTaishoshaJushoBtn5').style.color = isEditNotShiryoSakuseichu() || document.getElementById('{!$Component.idSofuShubetsu}').value != "郵便" ? 'gray' : 'black';
                                  document.getElementById('{!$Component.idIsogiTaio}').disabled = isEditNotShiryoSakuseichu();
                                  document.getElementById('{!$Component.idPostalCode5}').disabled = isEditNotShiryoSakuseichu();
                                  document.getElementById('{!$Component.idPostalCode5SerchBtn}').disabled = isEditNotShiryoSakuseichu();
                                  document.getElementById('{!$Component.idPostalCode5SerchBtn}').style.background = isEditNotShiryoSakuseichu() ? '#e9e9e9' : '#e8e8e9';
                                  document.getElementById('{!$Component.idPostalCode5SerchBtn}').style.color = isEditNotShiryoSakuseichu() ? 'gray' : 'black';
                                  document.getElementById('{!$Component.idState5}').disabled = isEditNotShiryoSakuseichu();
                                  document.getElementById('{!$Component.idCity5}').disabled = isEditNotShiryoSakuseichu();
                                  document.getElementById('{!$Component.idStreet5}').disabled = isEditNotShiryoSakuseichu();
                                  document.getElementById('{!$Component.idSofuShiryoMail}').disabled = isEditNotShiryoSakuseichu();
                                  document.getElementById('{!$Component.idShiryoSofuTemplate}').disabled = isEditNotShiryoSakuseichu();
                                  document.getElementById('{!$Component.idSofuShiryoFax}').disabled = isEditNotShiryoSakuseichu();
                                  document.getElementById('{!$Component.idInsatsubutsuIchiran}').disabled = isEditNotShiryoSakuseichu();
                                  document.getElementById('{!$Component.idPamphletYohi}').disabled = isEditNotShiryoSakuseichu();
                                  document.getElementById('{!$Component.idKasoshikiyoMongon}').disabled = isEditNotShiryoSakuseichu();
                                  document.getElementById('{!$Component.idTaSofubutsu1}').disabled = isEditNotShiryoSakuseichu();
                                  document.getElementById('{!$Component.idTaSofubutsu2}').disabled = isEditNotShiryoSakuseichu();
                                  document.getElementById('{!$Component.idTaSofubutsu3}').disabled = isEditNotShiryoSakuseichu();
                                  document.getElementById('{!$Component.idHosokuSetsumei}').disabled = isEditNotShiryoSakuseichu();
                                  document.getElementById('{!$Component.idHikitsugiJiko}').disabled = isEditNotShiryoSakuseichu();
                                  document.getElementById('idShiryoSofuSaveBtn').disabled = isEditSogiShiryoSave();
                                  document.getElementById('idShiryoSofuSaveBtn').style.background = isEditSogiShiryoSave() ? '#e9e9e9' : '#e8673e';
                                  document.getElementById('idShiryoSofuSaveBtn').style.color = isEditSogiShiryoSave() ? 'gray' : 'white';
                                  document.getElementById('idShiryoSofuDelBtn').disabled = isEditNotShiryoSakuseichu();
                                  document.getElementById('idShiryoSofuDelBtn').style.background = isEditNotShiryoSakuseichu() ? '#e9e9e9' : '#e8673e';
                                  document.getElementById('idShiryoSofuDelBtn').style.color = isEditNotShiryoSakuseichu() ? 'gray' : 'white';
                                  document.getElementById('idShiryoSofuMailPreviewBtn').disabled = isEditInsatsumachi();
                                  document.getElementById('idShiryoSofuMailPreviewBtn').style.background = isEditInsatsumachi() ? '#e9e9e9' : '#e8673e';
                                  document.getElementById('idShiryoSofuMailPreviewBtn').style.color = isEditInsatsumachi() ? 'gray' : 'white';
                                  document.getElementById('idShiryoSofuSendMailBtn').disabled = isEditInsatsumachiSakuseizumi();
                                  document.getElementById('idShiryoSofuSendMailBtn').style.background = isEditInsatsumachiSakuseizumi() ? '#e9e9e9' : '#e8673e';
                                  document.getElementById('idShiryoSofuSendMailBtn').style.color = isEditInsatsumachiSakuseizumi() ? 'gray' : 'white';
                                  document.getElementById('idTeianListShutokuBtn').disabled = isEditNotShiryoSakuseichu();
                                  document.getElementById('idTeianListShutokuBtn').style.background = isEditNotShiryoSakuseichu() ? '#e9e9e9' : '#e8e8e9 url(/img/alohaSkin/btn_sprite.png) repeat-x right top;';
                                  document.getElementById('idTeianListShutokuBtn').style.color = isEditNotShiryoSakuseichu() ? 'gray' : '#333';
                                  document.getElementById('idTeianshoSakuseiJokenKoshinBtn').disabled = isEditNotShiryoSakuseichu();
                                  document.getElementById('idTeianshoSakuseiJokenKoshinBtn').style.background = isEditNotShiryoSakuseichu() ? '#e9e9e9' : '#e8e8e9 url(/img/alohaSkin/btn_sprite.png) repeat-x right top;';
                                  document.getElementById('idTeianshoSakuseiJokenKoshinBtn').style.color = isEditNotShiryoSakuseichu() ? 'gray' : '#333';
                                  
                                  function isEditNotShiryoSakuseichu(){
                                    if({!!iSSSWrap.inputSogiShiryoSofuFlg}) return true;
                                    if(document.getElementById('{!$Component.idSofuJokyo}').value != "資料作成中" && document.getElementById('{!$Component.idSofuJokyo}').value != "情報確認中") return true;
                                    return false;
                                  }

                                  function isEditSogiShiryoSave(){
                                    if({!!iSSSWrap.inputSogiShiryoSofuFlg}) return true;
                                    if(document.getElementById('{!$Component.idSofuShubetsu}').value == "郵便" && 
                                        (document.getElementById('{!$Component.idSofuJokyo}').value == "印刷待ち" || 
                                        document.getElementById('{!$Component.idSofuJokyo}').value == "印刷済" || 
                                        document.getElementById('{!$Component.idSofuJokyo}').value == "送付済")){
                                        return true;
                                    }
                                    if((document.getElementById('{!$Component.idSofuShubetsu}').value == "メール" || 
                                        document.getElementById('{!$Component.idSofuShubetsu}').value == "FAX") && 
                                        (document.getElementById('{!$Component.idSofuJokyo}').value == "印刷済" || 
                                        document.getElementById('{!$Component.idSofuJokyo}').value == "送付済")){
                                        return true;
                                    }
                                    return false;
                                  }

                                  function isEditInsatsumachi(){
                                    if({!!iSSSWrap.inputSogiShiryoSofuFlg}) return true;
                                    if(document.getElementById('{!$Component.idSofuJokyo}').value != "印刷待ち") return true;
                                    if(document.getElementById('{!$Component.idSofuShubetsu}').value != "メール") return true;
                                    return false;
                                  }

                                  function isEditInsatsumachiSakuseizumi(){
                                    if({!!iSSSWrap.inputSogiShiryoSofuFlg}) return true;
                                    if(document.getElementById('idPage:idForm:idHdnPdfSakuseiJokyo').value != "作成済") return true;
                                    if(document.getElementById('{!$Component.idSofuJokyo}').value != "印刷待ち") return true;
                                    if(document.getElementById('{!$Component.idSofuShubetsu}').value != "メール") return true;
                                    return false;
                                  }
                                </script>
                            </apex:outputPanel>
                        </div>
                    </div>
                </div>
            </div>
            <div style="display: flex">
              <div class="section-panel" style="margin:5px 5px 0 0;">
                <div class="memberseido">
                  <div class="summarpanel">
                    <div class="center-column">
                      <div>
                        <div>
                          <apex:commandButton value="メンバー制度案内" style="width:100px" oncomplete="talkscript('MemberSeidoAnnai')" /> </div>
                      </div>
                      <div style="padding-top: 5px">【メンバー制度】</div>
                      <div>
                        <table cellpadding="5px" cellspacing="0">
                          <tr>
                            <th style="width: 81px;">ご案内状況</th>
                            <td>
                              <apex:inputfield value="{!ota.MemberSeidoGoannaiJokyo__c}" id="idMemberSeidoGoannaiJokyo" /> </td>
                            <th>相談者メンバー登録</th>
                            <td>
                              <apex:inputfield value="{!ota.SodanshaMemberTourokuZumi__c}" id="idSodanshaMemberTourokuZumi" onclick="setJizenJunbiSheetJryobiAlert();setMerumagaKyodakuAlert();setHikaiinShikigoAnketoAlert();" /> </td>
                          </tr>
                          <tr>
                            <th colspan="3">電話流入葬儀フォローSMS許諾</th>
                            <td>
                              <apex:inputfield value="{!ota.Tel_Sogifollow_SmsPermission__c}" id="idTel_Sogifollow_SmsPermission" onchange="setMerumagaKyodakuAlert();" /> </td>
                          </tr>
                          <tr>
                            <td colspan="4" style="height: 20px; text-align:right"><label style="color:red" id="idMerumagaKyodakuAlert"></label>
                            </td>
                          </tr>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="section-panel" style="margin:5px 5px 0 0;width:490px;">
                <div class="memberseido">
                  <div class="summarpanel">
                    <div class="center-column">
                      <div>
                        <div style="height:23px">
                          </div>
                      </div>
                      <div>
                        <div style="padding-top: 5px">【事前アンケート】</div>
                      </div>
                      <div>
                        <table cellpadding="5px" cellspacing="0">
                          <tr>
                            <th>ご案内状況</th>
                            <td>
                              <apex:inputfield value="{!ota.JizenJunbiSheetGoannaiJokyo__c}" id="idJizenJunbiSheetGoannaiJokyo" /> </td>
                            <th>受領日</th>
                            <td colspan="5">
                              <apex:inputText id="idJizenJunbiSheetJuryobi" value="{!ota.PreliminaryConsultationDate__c}" style="width:70px" onclick="displayCalendarDate('idJizenJunbiSheetJuryobi');" onchange="setJizenJunbiSheetJryobiAlert();" />
                              <script>
                                var jizenJunbiSheetJuryobi = document.getElementById('idPage:idForm:idJizenJunbiSheetJuryobi').value;
                                if(jizenJunbiSheetJuryobi != '' && jizenJunbiSheetJuryobi != null){
                                  var isoTeianbi = new Date(jizenJunbiSheetJuryobi);
                                  var y = isoTeianbi.getFullYear();
                                  var m = isoTeianbi.getMonth() + 1;
                                  var d = isoTeianbi.getDate();
                                  document.getElementById('idPage:idForm:idJizenJunbiSheetJuryobi').value = y + '/' + m + '/' + d;
                                }
                              </script>
                            </td>
                          </tr>
                          <tr>
                            <th>ご提出手段</th>
                            <td>
                              <apex:inputfield value="{!ota.JizenJunbiSheetGoteishutsuShudan__c}" id="idJizenJunbiSheetGoteishutsuShudan" onchange="chkJizenJunbiSheetGoteishutsuShudan();" /> </td>
                            <th id="idJizenJunbiSheetDairiNyuryokuTantoshaTh">代理入力者</th>
                            <td id="idJizenJunbiSheetDairiNyuryokuTantoshaTd">
                              <apex:inputfield value="{!ota.JizenJunbiSheetDairiNyuryokuTantoshaRef__c}" id="idJizenJunbiSheetDairiNyuryokuTantosha" /> </td>
                          </tr>
                          <tr>
                            <td colspan="6" style="height: 20px;"><label style="color:red" id="idJizenJunbiSheetJryobiAlert"></label></td>
                          </tr>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="section-panel" style="margin:5px 5px 0 0;">
                <div class="memberseido">
                  <div class="summarpanel">
                    <div class="center-column">
                      <div>
                        <div style="height:23px">
                          </div>
                      </div>
                      <div>
                        <div style="padding-top: 5px">【よりそうを知ったきっかけ】</div>
                      </div>
                      <div style="padding-top: 5px;padding-left: 5px;">
                        <apex:selectList id="idYorisoWoSittaKikkake" value="{!YorisoWoSittaKikkake}" size="1" multiselect="false" style="width: 250px;" >
                           <apex:selectOptions value="{!YorisoWoSittaKikkakeSelectOption}"/>
                        </apex:selectList>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="slidebox3" style="width: 100px; margin-top: 10px;"><a class="square_btn3" href="#" style="width: 100px;" id="idOnakunariA"><span>お亡くなり▼</span><span>お亡くなり▲</span></a></div>
            <div class="row" id="onakunaritaio" style="display: none; margin-top: 0px;">
              <div style="display: flex;">
                <div class="section-panel" style="margin:0px 10px 0 0;display: block;">
                  <div class="summarpanel">
                    <div class="kiboshiharaihoho2" style="height:100px">
                      <div class="summarpanel">
                        <div class="center-column">
                          <div>【希望支払方法】</div>
                          <div style="display:flex;">
                            <div>
                              <div style="display:flex;">
                                <div style="width: 81px; text-align: right; font-weight: bold; padding: 2px 5px 2px;">支払方法</div>
                                <div style="width: 206px; padding: 2px 0px 2px 0px;">
                                  <apex:inputfield value="{!ota.Shiharaihouhou2__c}" id="idKiboShiharaiHoho2" onchange="chkShiharaiHoho(this);sycValue('idKiboShiharaiHoho1', this);clearKihoshiharaiHoho();" /> </div>
                              </div>
                              <div style="display:flex;" id="idShiharaiHohoMikakuteiRiyu2Tr">
                                <div style="width: 81px; text-align: right; font-weight: bold; padding: 2px 5px 2px;">支払方法<br/>未確定理由</div>
                                <div style="padding: 2px 0px 2px 0px;">
                                  <apex:inputfield value="{!ota.ShiharaiHohoMikakuteiRiyu2__c}" id="idShiharaiHohoMikakuteiRiyu2" style="width: 200px;" onchange="sycValue('idShiharaiHohoMikakuteiRiyu1', this);" /> </div>
                              </div>
                            </div>
                            <div>
                              <div style="display:flex;">
                                <div style="width: 81px; text-align: right; font-weight: bold; padding: 2px 5px 2px;">ご案内済み<br/>留意事項</div>
                                <div style="padding: 2px 0px 2px 0px;">
                                  <apex:selectList id="idGoannaizumiRyuijiko2" value="{!goannaizumiRyuijikoSlt2}" size="4" multiselect="true" onchange="sycValue2('idGoannaizumiRyuijiko2', 'idGoannaizumiRyuijiko');">
                                    <apex:selectOptions value="{!goannaizumiRyuijikoOpt}"/>
                                  </apex:selectList>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="section-panel" style="margin:0px 10px 0 0;display: block; width: 486px;">
                  <div style="display: flex">
                    <div class="omukaesaki">
                      <div class="summarpanel">
                        <div class="center-column">
                          <div>【お迎え先情報】</div>
                          <div>
                            <table cellpadding="5px" cellspacing="0">
                              <tr>
                                <th>お迎え先名称</th>
                                <td>
                                  <apex:inputfield value="{!ota.OmukaeSakiName__c}" id="idOmukaeSakiName2" onchange="sycValue('idOmukaeSakiName1', this);clearOmukaesakiName();" type="text" style="width:275px"/> <input type="button" class="btn" id="idGoogleMap2" value="Google Map" onkeypress="openGoogleMap('idOmukaeSakiName2');" onclick="openGoogleMap('idOmukaeSakiName2');"/></td>
                              </tr>
                              <tr>
                                <th>お迎え先住所</th>
                                <td>
                                  <apex:inputfield value="{!ota.OmukaeSakiJusho__c}" style="width:350px" id="idOmukaeSakiJusho2" onchange="sycValue('idOmukaeSakiJusho1', this);clearOmukaesakiJusho('idOmukaeSakiJusho1');" type="text" /> </td>
                              </tr>
                              <tr>
                                <th></th>
                                <td>
                                      <input type="button" class="btn" id="idSodanshaJushoBtn3" value="相談者住所を設定" onkeypress="setOmukaesakiJusho('idSodanshaPostalCode1', 'idSodanshaState1', 'idSodanshaCity1', 'idSodanshaStreet1');"  onclick="setOmukaesakiJusho('idSodanshaPostalCode1', 'idSodanshaState1', 'idSodanshaCity1', 'idSodanshaStreet1');" />
                                      <input type="button" class="btn" id="idTaishoshaJushoBtn3" value="対象者住所を設定" onkeypress="setOmukaesakiJusho('idTaishoshaPostalCode', 'idTaishoshaState', 'idTaishoshaCity', 'idTaishoshaStreet');" onclick="setOmukaesakiJusho('idTaishoshaPostalCode', 'idTaishoshaState', 'idTaishoshaCity', 'idTaishoshaStreet');" />
                                </td>
                              </tr>
                              <tr>
                                <th>希望安置先</th>
                                <td>
                                  <apex:inputfield value="{!ota.KiboGoanchisaki__c}" id="idKiboGoanchisaki2" onchange="sycValue('idKiboGoanchisaki', this);openGoanchisakiJusho();clearOnakunari('idKiboGoanchisaki2');" /> </td>
                              </tr>
                              <tr style="height: 30px">
                                <th id="idTHGoanchisakiJushoLabel2_1" style="display: none">ご安置先住所</th>
                                <td id="idTDGoanchisakiJushoValue2_1" style="display: none;padding:0">
                                  <apex:inputfield value="{!ota.GoanchisakiJusho__c}" id="idGoanchisakiJusho2" style="width:350px" onchange="sycValue('idGoanchisakiJusho', this);"/>
                                </td>
                              </tr>
                              <tr style="height: 30px">
                                <th id="idTHGoanchisakiJushoLabel2_2" style="display: none"></th>
                                <td id="idTDGoanchisakiJushoValue2_2" style="display: none;padding:0">
                                  <input type="button" class="btn" id="idSodanshaJushoBtn4" value="相談者住所を設定" onkeypress="setGoanchisakiJusho('idSodanshaPostalCode1', 'idSodanshaState1', 'idSodanshaCity1', 'idSodanshaStreet1');" onclick="setGoanchisakiJusho('idSodanshaPostalCode1', 'idSodanshaState1', 'idSodanshaCity1', 'idSodanshaStreet1');"/>
                                  <input type="button" class="btn" id="idTaishoshaJushoBtn4" value="対象者住所を設定" onkeypress="setGoanchisakiJusho('idTaishoshaPostalCode', 'idTaishoshaState', 'idTaishoshaCity', 'idTaishoshaStreet');" onclick="setGoanchisakiJusho('idTaishoshaPostalCode', 'idTaishoshaState', 'idTaishoshaCity', 'idTaishoshaStreet');" /></td>
                              </tr>
                            </table>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="section-panel" style="margin:10px 10px 0 0;display: block;">
                <div class="ketteisogisha">
                  <div class="summarpanel">
                    <div class="center-column">
                      <div>【決定葬儀社】</div>
                      <div>
                        <div>
                          <div style="display: flex;">
                            <div style="width: 81px; text-align: right; font-weight: bold; padding: 2px 5px 2px;">決定葬儀社名</div>
                            <div style="padding: 2px 0px 2px 0px;">
                              <apex:inputfield value="{!ota.SimpleYasugoKeiyakuRef__c}" id="idSimpleYasugoKeiyaku" type="text" style="width:200px" onchange="setAlert8();" onFocus="clearKiboChiiki('idSimpleYasugoKeiyaku');" onBlur="clearKetteiSogishaId();"/>
                              <input type="hidden" id="idSimpleYasugoKeiyakuHiddenLkid" />
                              <input type="hidden" id="idSimpleYasugoKeiyakuHiddenName" />
                            </div>
                            <div style="width: 60px; text-align: right; font-weight: bold; padding: 2px 5px 2px;">商品</div>
                            <div style="padding: 2px 0px 2px 0px;">
                              <apex:outputpanel style="display: {!IF(shohinFlg, '', 'none')}">
                                <apex:outputfield value="{!ota.ShohinRef__c}" id="idShohinOutput" /> </apex:outputpanel>
                              <apex:outputpanel style="display: {!IF(shohinFlg, 'none', '')}">
                                <apex:inputfield value="{!ota.ShohinRef__c}" id="idShohin" style="width:285px" type="text" /> </apex:outputpanel>
                            </div>
                          </div>
                          <div>
                            <label style="color:red; font-weight: bold; padding: 2px 5px 2px 92px;" id="idAlert8"></label>
                          </div>
                          <div style="display: flex;">
                            <div style="width: 81px; text-align: right; font-weight: bold; padding: 2px 5px 2px; height: 40px;">送客決定理由</div>
                            <div style="padding: 2px 0px 2px 0px;"><apex:inputfield value="{!ota.TaiouKanouRiyu__c}" id="idTaiouKanouRiyu" onchange="chkTaiouKanouRiyu();"/> </div>
                            <div style="width: 135px; text-align: right; font-weight: bold; padding: 2px 5px 2px;" id="idTaioYusenRiyuShosaiLabel">対応優先<br/>理由詳細</div>
                            <div style="padding: 2px 0px 2px 0px;" id="idTaioYusenRiyuShosaiValue"><apex:inputfield value="{!ota.TaioYusenRiyuShosai__c}" id="idTaioYusenRiyuShosai" style="width: 304px" /></div>
                          </div>
                          <div style="display: flex;">
                            <div style="width: 113px; text-align: right; font-weight: bold; padding: 2px 5px 2px; height: 40px;">葬儀社追加営業NG</div>
                            <div style="padding: 2px 0px 2px 0px;"><apex:inputfield value="{!ota.SogishaTsuikaEigyoNg__c}" id="idSogishaTsuikaEigyoNg" /> </div>
                          </div>
                          <div style="display: flex;">
                            <div style="display: flex;">
                              <div>
                                <div style="width: 81px; text-align: right; font-weight: bold; padding: 2px 5px 2px;">送客書<br/>記載事項</div>
                                <div>
                                  <input type="button" class="btn" style="width:65px;" id="idSokyakushoKisaijikoKihonNyuryokuBtn" onclick="setSokyakushoKisaijikoKihonNyuryoku();" onkeypress="setSokyakushoKisaijikoKihonNyuryoku();" value="基本入力" />
                                  <apex:inputHidden id="idMoshuLastNameKana" value="{!opp.SimpleYasugoRef__r.MoshuRef__r.LastNameFurigana__pc}" />
                                  <apex:inputHidden id="idMoshuFirstNameKana" value="{!opp.SimpleYasugoRef__r.MoshuRef__r.FirstNameFurigana__pc}" />
                                  <apex:inputHidden id="idMoshuLastName" value="{!opp.SimpleYasugoRef__r.MoshuRef__r.LastName}" />
                                  <apex:inputHidden id="idMoshuFirstName" value="{!opp.SimpleYasugoRef__r.MoshuRef__r.FirstName}" />
                                  <apex:inputHidden id="idMoshuGender" value="{!opp.SimpleYasugoRef__r.MoshuRef__r.Gender__pc}" />
                                  <apex:inputHidden id="idMoshuPersonBirthdate" value="{!moshuTanshobi}" />
                                  <apex:inputHidden id="idMoshuBillingPostalCode" value="{!opp.SimpleYasugoRef__r.MoshuRef__r.BillingPostalCode}" />
                                  <apex:inputHidden id="idMoshuBillingState" value="{!opp.SimpleYasugoRef__r.MoshuRef__r.BillingState}" />
                                  <apex:inputHidden id="idMoshuBillingCity" value="{!opp.SimpleYasugoRef__r.MoshuRef__r.BillingCity}" />
                                  <apex:inputHidden id="idMoshuBillingStreet" value="{!opp.SimpleYasugoRef__r.MoshuRef__r.BillingStreet}" />
                                  <apex:inputHidden id="idMoshuMobilePhone" value="{!opp.SimpleYasugoRef__r.MoshuRef__r.MobilePhone__c}" />
                                  <apex:inputHidden id="idMoshuPhone" value="{!opp.SimpleYasugoRef__r.MoshuRef__r.Phone}" />
                                  <script>
                                    function setSokyakushoKisaijikoKihonNyuryoku(idx){
                                      var kihonNyuryoku = '';
                                      
                                      if(document.getElementById('idPage:idForm:idPlanBiko').value != ''){
                                        kihonNyuryoku += '・' + document.getElementById('idPage:idForm:idPlanBiko').value + '\r\n';
                                      }

                                      if(document.getElementById('idCampaignSogiyoBouquetFlg').value == 'true'){
                                        kihonNyuryoku += '・葬儀用ブーケ無料プレゼントキャンペーンの対象者です。家族葬プランでの施行時は、ブーケの発注をお願いいたします（火葬式プランはキャンペーン対象外です）' + '\r\n';
                                      }

                                      var checkIdShohinLkid = document.getElementById('idPage:idForm:idShohinOutput');
                                      if(document.getElementById('idPage:idForm:idShohin_lkold').value == '【20.11】よりそう家族葬 華やかプラン' || 
                                        (checkIdShohinLkid != null && checkIdShohinLkid != '' && checkIdShohinLkid.textContent == '【20.11】よりそう家族葬 華やかプラン')){
                                        kihonNyuryoku += '・華やかプランの場合、「霊柩車での火葬場搬送」「マイクロバス」がプラン内容に含まれますので、ご注意願います。' + '\r\n';
                                      }
                                      
                                      if(document.getElementById('idPage:idForm:idSogishaTsuikaEigyoNg').checked){
                                        kihonNyuryoku += '・お客様より追加オプション不要の希望を承っています。プランで規定している追加オプション以外はオプションのご案内はお控えください。もしご案内される場合は十分注意の上、丁寧にご説明をお願いいたします。' + '\r\n';
                                      }
                                        
                                      var sodanshaLastNameKana = document.getElementById('idPage:idForm:idSodanshaSeiKana1').value;
                                      var sodanshaFirstNameKana = document.getElementById('idPage:idForm:idSodanshaMeiKana1').value;
                                      var moshuLastNameKana = document.getElementById('idPage:idForm:idMoshuLastNameKana').value;
                                      var moshuFirstNameKana = document.getElementById('idPage:idForm:idMoshuFirstNameKana').value;
                                      if(sodanshaLastNameKana != null && sodanshaLastNameKana != '' && 
                                          sodanshaFirstNameKana != null && sodanshaFirstNameKana != '' && 
                                          moshuLastNameKana != null && moshuLastNameKana != '' && 
                                          moshuFirstNameKana != null && moshuFirstNameKana != '' && 
                                          (sodanshaLastNameKana != moshuLastNameKana || sodanshaFirstNameKana != moshuFirstNameKana)){
                                            var moshuLastName = document.getElementById('idPage:idForm:idMoshuLastName').value;
                                            var moshuFirstName = document.getElementById('idPage:idForm:idMoshuFirstName').value;
                                            var moshuGender = document.getElementById('idPage:idForm:idMoshuGender').value;
                                            var moshuPersonBirthdate = document.getElementById('idPage:idForm:idMoshuPersonBirthdate').value;
                                            var moshuBillingPostalCode = document.getElementById('idPage:idForm:idMoshuBillingPostalCode').value;
                                            var moshuBillingState = document.getElementById('idPage:idForm:idMoshuBillingState').value;
                                            var moshuBillingCity = document.getElementById('idPage:idForm:idMoshuBillingCity').value;
                                            var moshuBillingStreet = document.getElementById('idPage:idForm:idMoshuBillingStreet').value;
                                            var moshuMobilePhone = document.getElementById('idPage:idForm:idMoshuMobilePhone').value;
                                            var moshuPhone = document.getElementById('idPage:idForm:idMoshuPhone').value;

                                        kihonNyuryoku += '・相談者様と喪主様は別の方になります。（喪主様情報　氏名：' + moshuLastName + moshuFirstName + 
                                                          '（' + moshuLastNameKana + moshuFirstNameKana + '）' + 
                                                          ' 住所：' + moshuBillingPostalCode + moshuBillingState + moshuBillingCity + moshuBillingStreet + 
                                                          ' 生年月日：' + moshuPersonBirthdate + 
                                                          ' 性別：' + moshuGender + 
                                                          ' 連絡先：' + '(携帯)' + moshuMobilePhone + ' (固定)' + moshuPhone + ')' + '\r\n';
                                      }
  
                                      var aux = document.createElement("textarea");
                                      document.body.appendChild(aux);
                                      aux.value = kihonNyuryoku;
                                      aux.select();
                                      document.execCommand("copy");
                                      document.body.removeChild(aux);
                                    }
                                  </script>
                                </div>
                              </div>
                              <div style="padding: 2px 0px 2px 0px;">
                                <apex:inputTextarea value="{!ota.SokyakushoKisaiJiko__c}" id="idSokyakushoKisaiJiko" cols="98" rows="10" onkeypress="enterActive(this);" /> </div>
                            </div>
                            <div>
                              <div style="padding-left:10px; padding-top: 2px;">
                                <div>
                                  <table class="templeteList" id="idSokyakushoKisaijikoLTTempleteWrapListTable">
                                    <thead class="templeteList_scrollHead">
                                      <tr>
                                        <th style="background: #364e96;color: white;text-align: center; font-family: 'Salesforce Sans',Arial,sans-serif;width:328px;"><font color="#FFFFFF">テンプレート</font></th>
                                      </tr>
                                    </thead>
                                    <tbody class="templeteList_scrollBody">
                                      <apex:variable var="rowNumSokyakushoKisaijikoLTTempleteWrapList" value="{!0}" />
                                      <apex:repeat value="{!sokyakushoKisaijikoLTTempleteWrapList}" var="sokyakushoKisaijikoLTTempleteWrap" id="idSokyakushoKisaijikoLTTempleteWrapList">
                                        <tr>
                                          <th style="width:323px; text-align: left; height: 20px; padding-left:5px;">
                                            <a id="idSokyakushoKisaijikoLTTempleteLink" href="#" onclick="setSokyakushoKisaijikoLTTemplete('{!rowNumSokyakushoKisaijikoLTTempleteWrapList}');"><apex:outputField value="{!sokyakushoKisaijikoLTTempleteWrap.longTextTemplete.Title__c}" /></a>
                                          </th>
                                        </tr>
                                        <apex:inputHidden value="{!sokyakushoKisaijikoLTTempleteWrap.longTextTemplete.Body__c}" id="idSokyakushoKisaijikoLTTempleteBodyHdn" />
                                        <apex:variable var="rowNumSokyakushoKisaijikoLTTempleteWrapList" value="{!rowNumSokyakushoKisaijikoLTTempleteWrapList + 1}" />
                                      </apex:repeat>
                                      <script>
                                        function setSokyakushoKisaijikoLTTemplete(idx){
                                          var str = document.getElementById('idPage:idForm:idSokyakushoKisaiJiko').value;
                                          if(str != null && str != '') str += '\r\n' + '\r\n';
                                          document.getElementById('idPage:idForm:idSokyakushoKisaiJiko').value = str + document.getElementById('idPage:idForm:idSokyakushoKisaijikoLTTempleteWrapList:' + idx + ':idSokyakushoKisaijikoLTTempleteBodyHdn').value;
                                        }
                                      </script>
                                    </tbody>
                                  </table>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <script>
                  (function($) {
                      $(document).ready(function() {
                        $('.slidebox3').click(function() {
                          $(this).next('.row').stop(true, true).slideToggle(200);
                        });
                        $("div.row").css("display", "none");
                      });

                      $(function() {
                        $('.square_btn3').on('click', function(event) {
                          event.preventDefault();
                          $(this).toggleClass('active');
                        });
                      });
                  })(jQuery);
              </script>
            </div>
          </div>
        </div>
        <div class="side">
          <div class="contactHistoryTabs" id="idContactHistoryTabs">
            <input id="contactHistoryTabCustmer" type="radio" name="nmContactHistoryTab" class="tab-switch" checked="true" onchange="setSwitchContactShubetsu();" /><label class="tab-label" for="contactHistoryTabCustmer">お客様</label>
            <div class="tab-content" id="idContactHistoryTabCustmerDetaileDiv">
              <div style="overflow-y:auto;height: 150px;" id="idContactHistoryTabCustmerDetaileSclDiv" >
                <div>
                  <details style="" open="true">
                    <summary>
                      <b>対話者情報</b>
                    </summary>
                    <div>
                      <div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;">受発信状況</div>
                          <div class="contactHistoryJuhasshinTable">
                            <apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaJuhasshinJokyo__c}" id="idChOkyakusamaJuhasshinJokyo" style="width:100px;" onchange="chgCstJuhasshinJokyo();"/>
                            <script>
                              function chgCstJuhasshinJokyo(){
                                var disp = 'none';
                                if(document.getElementById('idPage:idForm:idChOkyakusamaJuhasshinJokyo').value == '架電') disp = '';
                                document.getElementById('idOkyakusamaKadenShubetsuDiv').style.display = disp;
                              }
                            </script>
                          </div>
                          <div id="idOkyakusamaKadenShubetsuDiv" style="display:none;">
                            <div style="display:flex;">
                              <div class="contactHistoryLabel" style="padding-left:10px;width:50px;">種別</div>
                              <div>
                                <apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaKadenShubetsu__c}" id="idChOkyakusamaKadenShubetsu" style="width:100px;" onchange="chgCstKadenShubetsu();"/>
                                <script>
                                  function chgCstKadenShubetsu(){
                                    var disp = 'none';
                                    if(document.getElementById('idPage:idForm:idChOkyakusamaKadenShubetsu').value == 'その他') disp = '';
                                    document.getElementById('idOkyakusamaKadenShubetsuSonotaDiv').style.display = disp;
                                  }
                                </script>
                              </div>
                              <div id="idOkyakusamaKadenShubetsuSonotaDiv" style="display:none;">
                                <div style="display:flex;">
                                  <div class="contactHistoryLabel" style="padding-left:10px;width:50px;">その他</div>
                                  <div><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaKadenShubetsuSonota__c}" id="idChOkyakusamaKadenShubetsuSonota" style="width:80px;" /></div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;">対応者</div>
                          <div>
                            <apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaTaiosha__c}" id="idChOkyakusamaTaiosha" style="width:100px;" onchange="chgCstTaiosha();"/>
                            <script>
                              function chgCstTaiosha(){
                                var disp = 'none';
                                if(document.getElementById('idPage:idForm:idChOkyakusamaTaiosha').value == '相談者以外') disp = '';
                                document.getElementById('idOkyakusamaSodanshaInfoDiv').style.display = disp;
                              }
                            </script>
                          </div>
                          <div id="idOkyakusamaSodanshaInfoDiv" style="display:none;">
                            <div style="display:flex;">
                              <div class="contactHistoryLabel" style="padding-left:10px;width: 50px;">名前</div>
                              <div><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaSodanshaIgaiName__c}" id="idChOkyakusamaSodanshaIgaiName" style="width:92px;" /></div>
                              <div class="contactHistoryLabel" style="padding-left:10px;width: 50px;">関係</div>
                              <div><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaSodanshaIgaiKankei__c}" id="idChOkyakusamaSodanshaIgaiKankei" /></div>
                            </div>
                          </div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;">電話番号</div>
                          <div><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaTel__c}" id="idChOkyakusamaTel" style="width:92px;" /></div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;">対象者状況</div>
                          <div>
                            <apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaTaishoshaJokyo__c}" id="idChOkyakusamaTaishoshaJokyo" style="width:100px;" onchange="chgCstTaioshaJokyo();"/>
                            <script>
                              function chgCstTaioshaJokyo(){
                                var disp = 'none';
                                if(document.getElementById('idPage:idForm:idChOkyakusamaTaishoshaJokyo').value == 'その他') disp = '';
                                document.getElementById('idOkyakusamaTaishoshaJokyoSonotaDiv').style.display = disp;
                              }
                            </script>
                          </div>
                          <div id="idOkyakusamaTaishoshaJokyoSonotaDiv" style="display:none;">
                            <div style="display:flex;">
                              <div class="contactHistoryLabel" style="padding-left:10px;width:50px;">その他</div>
                              <div><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaTaishoshaJokyoSonota__c}" id="idChOkyakusamaTaishoshaJokyoSonota" style="width:92px;" /></div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </details>
                </div>
                <div style="padding-top:10px;">
                  <details style="" open="true">
                    <summary>
                      <b>架電専用</b>
                    </summary>
                    <div>
                      <div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;">接続状況</div>
                          <div style="width:120px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaSetsuzokuJokyo__c}" id="idChOkyakusamaSetsuzokuJokyo" /></div>
                          <div class="contactHistoryLabel" style="padding-left:10px;">留守電(MSG)</div>
                          <div><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaRusudenMsg__c}" id="idChOkyakusamaRusudenMsg" /></div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;">資料到着確認</div>
                          <div><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaShiryoTochakuKakunin__c}" id="idChOkyakusamaShiryoTochakuKakunin" /></div>
                          <div class="contactHistoryLabel" style="padding-left:10px;width:54px;">内容確認</div>
                          <div><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaShiryoNaiyoKakunin__c}" id="idChOkyakusamaShiryoNaiyoKakunin" /></div>
                        </div>
                      </div>
                    </div>
                  </details>
                </div>
                <div style="padding-top:10px;">
                  <details style="" open="true">
                    <summary>
                      <b>お亡くなり時の状況</b>
                    </summary>
                    <div>
                      <div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;">対象者所在地</div>
                          <div><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaTaishoshaShozaichi__c}" id="idChOkyakusamaTaishoshaShozaichi" style="width: 129px;"/></div>
                          <div class="contactHistoryLabel" style="padding-left:10px;width: 67px;">死亡診断書</div>
                          <div>
                            <apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaShiboShindansho__c}" id="idChOkyakusamaShiboShindansho" style="width:80px;" onchange="chgCstShiboShindansho();" />
                            <script>
                              function chgCstShiboShindansho(){
                                var disp = 'none';
                                if(document.getElementById('idPage:idForm:idChOkyakusamaShiboShindansho').value == 'なし') disp = '';
                                document.getElementById('idOkyakusamaShiboShindanshoDiv').style.display = disp;
                              }
                            </script>
                          </div>
                          <div id="idOkyakusamaShiboShindanshoDiv" style="display:none;">
                            <div style="display:flex;">
                              <div class="contactHistoryLabel" style="width: 80px;">取得予定</div>
                              <div><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaShiboShindanshoShutokuYotei__c}" id="idChOkyakusamaShiboShindanshoShutokuYotei" style="width: 80px;" html-placeholder="月/日 〇時頃" /></div>
                            </div>
                          </div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;">到着状況</div>
                          <div><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaTochakuJokyo__c}" id="idChOkyakusamaTochakuJokyo" /></div>
                          <div class="contactHistoryLabel" style="padding-left:10px;width: 67px;">お迎え時間</div>
                          <div>
                            <apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaOmukaeJikan__c	}" id="idChOkyakusamaOmukaeJikan" style="width: 80px;" onchange="chgCstOmukaeJikan();"/>
                            <script>
                              function chgCstOmukaeJikan(){
                                var disp = 'none';
                                if(document.getElementById('idPage:idForm:idChOkyakusamaOmukaeJikan').value == '指定あり') disp = '';
                                document.getElementById('idOkyakusamaOmukaeJikanDiv').style.display = disp;
                              }
                            </script>
                          </div>
                          <div id="idOkyakusamaOmukaeJikanDiv" style="display:none;">
                            <div style="display:flex;">
                              <div class="contactHistoryLabel" style="padding-left:10px;">時間指定</div>
                              <div><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaOmukaeJikanShitei__c}" id="idChOkyakusamaOmukaeJikanShitei" style="width: 92px;" html-placeholder="月/日 〇時頃" /></div>
                            </div>
                          </div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;">オファリング</div>
                          <div><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaOffering__c}" id="idChOkyakusamaOffering" style="width: 129px;"/></div>
                          <div class="contactHistoryLabel" style="padding-left:10px;width: 67px;">金額</div>
                          <div><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaOfferingKingaku__c}" id="idChOkyakusamaOfferingKingaku" style="width: 72px;" /></div>
                        </div>
                      </div>
                    </div>
                  </details>
                </div>
                <div style="padding-top:10px;">
                  <details style="" open="true">
                    <summary>
                      <b>案内内容</b>
                    </summary>
                    <div>
                      <div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;">プラン内容</div>
                          <div>
                            <apex:selectList id="idChOkyakusamaPlanNaiyo" value="{!contactHistoryWrap.okyakusamaPlanNaiyoValue}" size="4" multiselect="true">
                              <apex:selectOptions value="{!contactHistoryWrap.okyakusamaPlanNaiyoOption}"/>
                            </apex:selectList>
                          </div>
                          <div class="contactHistoryLabel" style="width: 80px;">プラン金額</div>
                          <div>
                            <apex:selectList id="idChOkyakusamaPlanKingaku" value="{!contactHistoryWrap.okyakusamaPlanKingakuValue}" size="4" multiselect="true">
                              <apex:selectOptions value="{!contactHistoryWrap.okyakusamaPlanKingakuOption}"/>
                            </apex:selectList>
                          </div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">火葬料金</div>
                          <div style="padding-top: 2px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaKasoRyokin__c}" id="idChOkyakusamaKasoRyokin" style="width:80px;"/></div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">僧侶手配</div>
                          <div>
                            <apex:selectList id="idChOkyakusamaSoryoTehaiAnnai" value="{!contactHistoryWrap.okyakusamaSoryoTehaiAnnaiValue}" size="4" multiselect="true">
                              <apex:selectOptions value="{!contactHistoryWrap.okyakusamaSoryoTehaiAnnaiOption}"/>
                            </apex:selectList>
                          </div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;">オプション</div>
                          <div><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaOptionRyori__c}" id="idChOkyakusamaOptionRyori" /></div>
                          <div style="padding-left: 2px;">料理</div>
                          <div style="padding-left: 10px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaOptionHenreihin__c}" id="idChOkyakusamaOptionHenreihin" /></div>
                          <div style="padding-left: 2px;">返礼品</div>
                          <div style="padding-left: 10px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaOptionMake__c}" id="idChOkyakusamaOptionMake" /></div>
                          <div style="padding-left: 2px;">メイク</div>
                          <div style="padding-left: 10px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaOptionKoshikiYukan__c}" id="idChOkyakusamaOptionKoshikiYukan" /></div>
                          <div style="padding-left: 2px;">古式湯灌</div>
                          <div style="padding-left: 10px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaOptionYukan__c}" id="idChOkyakusamaOptionYukan" /></div>
                          <div style="padding-left: 2px;">湯かん</div>
                          <div style="padding-left: 10px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaOptionKanjoHanataba__c}" id="idChOkyakusamaOptionKyoka" /></div>
                          <div style="padding-left: 2px;">棺上花束</div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;">&nbsp;</div>
                          <div><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaOptionKyoka__c}" id="idChOkyakusamaOptionKanjoHanataba" /></div>
                          <div style="padding-left: 2px;">供花</div>
                          <div style="padding-left: 10px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaOptionIeishashin__c}" id="idChOkyakusamaOptionIeishashin" /></div>
                          <div style="padding-left: 2px;">遺影写真</div>
                          <div style="padding-left: 10px;">その他</div>
                          <div style="padding-left: 5px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaOptionSonota__c}" id="idChOkyakusamaOptionSonota" /></div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">注意事項</div>
                          <div><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaChuiJikoAnchiRyokinAnnai__c}" id="idChOkyakusamaChuiJikoAnchiRyokinAnnai" /></div>
                          <div style="padding-left: 2px;width: 85px;">安置料金案内</div>
                          <div style="padding-left: 10px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaChuiJikoPlannaiShikijoShiryory__c}" id="idChOkyakusamaChuiJikoPlannaiShikijoShiryory" /></div>
                          <div style="padding-left: 2px;">プラン内式場使用料</div>
                          <div style="padding-left: 10px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaChuiJikoKasojoShiyoryoPlangai__c}" id="idChOkyakusamaChuiJikoKasojoShiyoryoPlangai" /></div>
                          <div style="padding-left: 2px;">火葬場使用料、プラン外案内</div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">&nbsp;</div>
                          <div><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaChuiJikoHansoKyori50km__c}" id="idChOkyakusamaChuiJikoHansoKyori50km" /></div>
                          <div style="padding-left: 2px;width: 85px;">搬送距離50km</div>
                          <div style="padding-left: 10px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaChuiJikoHansoKaisu2KaiOr3Kai__c}" id="idChOkyakusamaChuiJikoHansoKaisu2KaiOr3Kai" /></div>
                          <div style="padding-left: 2px; width: 117px;">搬送回数2回or3回</div>
                          <div style="padding-left: 10px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaChuiJikoChokusoPlanMenkaiFuka__c}" id="idChOkyakusamaChuiJikoChokusoPlanMenkaiFuka" /></div>
                          <div style="padding-left: 2px;">直葬プラン面会不可</div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">メンバー制度</div>
                          <div style="padding-top: 2px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaMemberSeido__c}" id="idChOkyakusamaMemberSeido" /></div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">事前アンケート</div>
                          <div style="padding-top: 2px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaJizenSurveyWebAnnai__c}" id="idChOkyakusamaJizenSurveyWebAnnai" /></div>
                          <div style="padding-top: 2px;">Web案内</div>
                          <div style="padding-top: 2px;padding-left:10px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaJizenSurveyYusoAnnai__c}" id="idChOkyakusamaJizenSurveyYusoAnnai" /></div>
                          <div style="padding-top: 2px;">郵送案内</div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">&nbsp;</div>
                          <div style="padding-top: 2px;">
                            <apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaJizenSurveyDairiNyuryokuTeian__c}" id="idChOkyakusamaJizenSurveyDairiNyuryokuTeian" onclick="clkCstJizenSurveyDairiNyuryokuTeian();"/>
                            <script>
                              function clkCstJizenSurveyDairiNyuryokuTeian(){
                                var disp = 'none';
                                if(document.getElementById('idPage:idForm:idChOkyakusamaJizenSurveyDairiNyuryokuTeian').checked) { disp = ''; }
                                document.getElementById('idJizenSurveyDairiNyuryokuTeianYDiv').style.display = disp;
                              }
                            </script>
                          </div>
                          <div style="padding-top: 2px;">代理入力提案</div>
                          <div id="idJizenSurveyDairiNyuryokuTeianYDiv" style="display:none;padding-left:20px;">
                            <div style="display:flex;">
                              <div style="padding-top: 2px;">要否</div>
                              <div style="padding-top: 2px;padding-left:5px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaJizenSurveyDairiNyuryokuTeianY__c}" id="idChOkyakusamaJizenSurveyDairiNyuryokuTeianY" /></div>
                            </div>
                          </div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">&nbsp;</div>
                          <div style="padding-top: 2px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaJizenSurveySodanshaFullNameKan__c}" id="idChOkyakusamaJizenSurveySodanshaFullNameKan" /></div>
                          <div style="padding-top: 2px;">相談者フルネームカナ</div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">&nbsp;</div>
                          <div style="padding-top: 2px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaJizenSurveySodanshaFullName__c}" id="idChOkyakusamaJizenSurveySodanshaFullName" /></div>
                          <div style="padding-top: 2px;">相談者フルネーム漢字</div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">&nbsp;</div>
                          <div style="padding-top: 2px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaJizenSurveySogiKiboChiiki__c}" id="idChOkyakusamaJizenSurveySogiKiboChiiki" /></div>
                          <div style="padding-top: 2px;">葬儀希望地域</div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">&nbsp;</div>
                          <div style="padding-top: 2px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaJizenSurveySodanshaJusho__c}" id="idChOkyakusamaJizenSurveySodanshaJusho" /></div>
                          <div style="padding-top: 2px;">★相談者住所</div>
                          <div style="padding-top: 2px;padding-left:10px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaJizenSurveySodanshaMail__c}" id="idChOkyakusamaJizenSurveySodanshaMail" /></div>
                          <div style="padding-top: 2px;">メール</div>
                          <div style="padding-top: 2px;padding-left:10px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaJizenSurveySodanshaMobile__c}" id="idChOkyakusamaJizenSurveySodanshaMobile" /></div>
                          <div style="padding-top: 2px;">携帯</div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">&nbsp;</div>
                          <div style="padding-top: 2px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaJizenSurveyTaishoshaJuminhyo__c}" id="idChOkyakusamaJizenSurveyTaishoshaJuminhyo" /></div>
                          <div style="padding-top: 2px;">対象者住民票</div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">&nbsp;</div>
                          <div style="padding-top: 2px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaJizenSurveyTaishoshaJotai__c}" id="idChOkyakusamaJizenSurveyTaishoshaJotai" /></div>
                          <div style="padding-top: 2px;">対象者状態</div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">&nbsp;</div>
                          <div style="padding-top: 2px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaJizenSurveyTaishoshaZokugara__c}" id="idChOkyakusamaJizenSurveyTaishoshaZokugara" /></div>
                          <div style="padding-top: 2px;">相談者から見た対象者の続柄</div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">&nbsp;</div>
                          <div style="padding-top: 2px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaJizenSurveyTaishoshaFullNameKa__c}" id="idChOkyakusamaJizenSurveyTaishoshaFullNameKa" /></div>
                          <div style="padding-top: 2px;">対象者フルネームカナ</div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">&nbsp;</div>
                          <div style="padding-top: 2px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaJizenSurveyTaishoshaFullName__c}" id="idChOkyakusamaJizenSurveyTaishoshaFullName" /></div>
                          <div style="padding-top: 2px;">対象者フルネーム漢字</div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">アンケート割</div>
                          <div style="padding-top: 2px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaSurveywari__c}" id="idChOkyakusamaSurveywari" /></div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">資料請求</div>
                          <div style="padding-top: 2px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaShiryoSeikyuYohi__c}" id="idChOkyakusamaShiryoSeikyuYohi" /></div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">SMS(施策)</div>
                          <div style="padding-top: 2px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaSmsShisakuYohi__c}" id="idChOkyakusamaSmsShisakuYohi" /></div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">対面相談</div>
                          <div style="padding-top: 2px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaTaimenSodanYohi__c}" id="idChOkyakusamaTaimenSodanYohi" /></div>
                        </div>
                      </div>
                    </div>
                  </details>
                </div>
                <div style="padding-top:10px;">
                  <details style="" open="true">
                    <summary>
                      <b>案内2</b>
                    </summary>
                    <div>
                      <div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">お葬式予約</div>
                          <div style="padding-top: 2px;width: calc(100% - 80px);">
                            <apex:selectList id="idChOkyakusamaOsoshiYoyaku" value="{!contactHistoryWrap.okyakusamaOsoshiYoyakuValue}" size="4" multiselect="true">
                              <apex:selectOptions value="{!contactHistoryWrap.okyakusamaOsoshiYoyakuOption}"/>
                            </apex:selectList>
                          </div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">警察案件</div>
                          <div style="padding-top: 2px;width: calc(100% - 80px);">
                            <apex:selectList id="idChOkyakusamaKeisatsuAnken" value="{!contactHistoryWrap.okyakusamaKeisatsuAnkenValue}" size="4" multiselect="true">
                              <apex:selectOptions value="{!contactHistoryWrap.okyakusamaKeisatsuAnkenOption}"/>
                            </apex:selectList>
                          </div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">葬祭扶助</div>
                          <div style="padding-top: 2px;width: calc(100% - 80px);">
                            <apex:selectList id="idChOkyakusamaSosaiFujo" value="{!contactHistoryWrap.okyakusamaSosaiFujoValue}" size="3" multiselect="true">
                              <apex:selectOptions value="{!contactHistoryWrap.okyakusamaSosaiFujoOption}"/>
                            </apex:selectList>
                          </div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">返金保証</div>
                          <div style="padding-top: 2px;width: calc(100% - 80px);">
                            <apex:selectList id="idChOkyakusamaHenkinHosho" value="{!contactHistoryWrap.okyakusamaHenkinHoshoValue}" size="4" multiselect="true">
                              <apex:selectOptions value="{!contactHistoryWrap.okyakusamaHenkinHoshoOption}"/>
                            </apex:selectList>
                          </div>
                        </div>
                      </div>
                    </div>
                  </details>
                </div>
                <div style="padding-top:10px;">
                  <details style="" open="true">
                    <summary>
                      <b>特記事項</b>
                    </summary>
                    <div>
                      <div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">クレーム</div>
                          <div style="padding-top: 2px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaClaim__c}" id="idChOkyakusamaClaim" /></div>
                          <div style="padding-top: 2px;">有</div>
                          <div style="padding-top: 2px;padding-left:10px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaOndokanTakame__c}" id="idChOkyakusamaOndokanTakame" /></div>
                          <div style="padding-top: 2px;">温度感高め</div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">特記事項</div>
                          <div style="padding-top: 2px;width: calc(100% - 80px);"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaTokkijikoComment__c}" id="idChOkyakusamaTokkijikoComment" onkeypress="enterActive(this);" /></div>
                        </div>
                      </div>
                    </div>
                  </details>
                </div>
              </div>
              <div style="display:flex;padding-top:5px;">
                <div style="display: flex; flex-flow: column;margin: 0 0 3px;justify-content: space-between;">
                  <div class="contactHistoryLabel" style="width: 80px;">コメント</div>
                  <div><a class="square_btn2" href="#" style="width: 70px;"><span>【開く】▼</span><span>【畳む】▲</span></a></div>
                </div>
                <div style="width: calc(100% - 100px);"><apex:inputField value="{!contactHistoryWrap.contactHistory.OkyakusamaFreeComment__c}" id="idChOkyakusamaFreeComment" onkeypress="enterActive(this);" /></div>
              </div>
            </div>
            <input id="contactHistoryTabSogisha" type="radio" name="nmContactHistoryTab" class="tab-switch" onchange="setSwitchContactShubetsu();" /><label class="tab-label" for="contactHistoryTabSogisha">葬儀社</label>
            <div class="tab-content" id="idContactHistoryTabSogishaDetaileDiv">
              <div style="overflow-y:auto;height: 150px;" id="idContactHistoryTabSogishaDetaileSclDiv">
                <div>
                  <details style="" open="true">
                    <summary>
                      <b>対話者情報</b>
                    </summary>
                    <div>
                      <div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">受発信状況</div>
                          <div class="contactHistoryJuhasshinTable" style="width:176px;">
                            <apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaJuhasshinJokyo__c}" id="idChSogishaJuhasshinJokyo" style="width:88px;" />
                          </div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">対応者</div>
                          <div>
                            <apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaTaiosha__c}" id="idChSogishaTaiosha" style="width:116px;" onchange="chgSogishaTaiosha();"/>
                            <script>
                              function chgSogishaTaiosha(){
                                var sogisha = 'none';
                                var sogishaIgai = 'none';
                                if(document.getElementById('idPage:idForm:idChSogishaTaiosha').value == '決定葬儀社') { sogisha = ''; }
                                if(document.getElementById('idPage:idForm:idChSogishaTaiosha').value == '決定葬儀社以外') { sogishaIgai = ''; }
                                document.getElementById('idSogishaKetteiSogishaDiv').style.display = sogisha;
                                document.getElementById('idSogishaKetteiSogishaIgaiDiv').style.display = sogishaIgai;
                              }
                            </script>
                          </div>
                          <div>
                            <div id="idSogishaKetteiSogishaDiv" style="display:none;">
                              <div style="display:flex;">
                                <div class="contactHistoryLabel" style="padding-left:10px;padding-top:2px;">社名</div>
                                <div><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaKetteiSogishaName__c}" id="idChSogishaKetteiSogishaName" style="width:80px;" /></div>
                                <div class="contactHistoryLabel" style="padding-left:10px;padding-top:2px;width:40px;">担当者</div>
                                <div><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaKetteiSogishaTantosha__c}" id="idChSogishaKetteiSogishaTantosha" /></div>
                              </div>
                            </div>
                            <div id="idSogishaKetteiSogishaIgaiDiv" style="display:none;">
                              <div style="display:flex;">
                                <div class="contactHistoryLabel" style="padding-left:10px;padding-top:2px;">社名</div>
                                <div><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaKetteiSogishaIgaiName__c}" id="idChSogishaKetteiSogishaIgaiName" style="width:80px;" /></div>
                                <div class="contactHistoryLabel" style="padding-left:10px;padding-top:2px;width:40px;">担当者</div>
                                <div><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaKetteiSogishaIgaiTantosha__c}" id="idChSogishaKetteiSogishaIgaiTantosha" /></div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">電話番号</div>
                          <div><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaTel__c}" id="idChSogishaTel" style="width:100px;" /></div>
                        </div>
                      </div>
                    </div>
                  </details>
                </div>
                <div style="padding-top:10px;">
                  <details style="" open="true">
                    <summary>
                      <b>案内内容(受電)</b>
                    </summary>
                    <div>
                      <div>
                        <div style="padding-top:5px;">
                          <div class="contactHistoryLabel" style="padding-top:2px;padding-left: 17px;text-align: left;">進捗</div>
                          <div style="display:flex;">
                            <div class="contactHistoryLabel" style="width: 120px;padding-top:2px;">お迎え時間</div>
                            <div><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaOmukaeJikan__c}" id="idChSogishaOmukaeJikan" html-placeholder="月/日 〇時頃" /></div>
                          </div>
                          <div style="display:flex;padding-top:5px;">
                            <div class="contactHistoryLabel" style="width: 120px;padding-top:2px;">通夜日付</div>
                            <div><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaTsuyaDate__c}" id="idChSogishaTsuyaTsuyaDate" /></div>
                            <div style="padding-top: 1px;padding-left:5px;"><apex:input type="number" value="{!contactHistoryWrap.tsuyaHour}" id="idChSogishaTsuyaHour" html-max="20" />時</div>
                            <div style="padding-top: 1px;padding-left:5px;"><apex:input type="number" value="{!contactHistoryWrap.tsuyaMinute}" id="idChSogishaTsuyaMinute" html-min="0" html-max="59" />分</div>
                          </div>
                          <div style="display:flex;padding-top:5px;">
                            <div class="contactHistoryLabel" style="width: 120px;padding-top:2px;">告別式日付</div>
                            <div><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaKokubetsushikiDate__c}" id="idChSogishaKokubetsushikiDate" /></div>
                            <div style="padding-top: 1px;padding-left:5px;"><apex:input type="number" value="{!contactHistoryWrap.kokubetsushikiHour}" id="idChSogishaKokubetsushikiHour" html-max="20" />時</div>
                            <div style="padding-top: 1px;padding-left:5px;"><apex:input type="number" value="{!contactHistoryWrap.kokubetsushikiMinute}" id="idChSogishaKokubetsushikiMinute" html-min="0" html-max="59" />分</div>
                          </div>
                          <div style="display:flex;padding-top:5px;">
                            <div class="contactHistoryLabel" style="width: 120px;padding-top:2px;">火葬日付</div>
                            <div><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaKasoDate__c}" id="idChSogishaKasoDate" /></div>
                            <div style="padding-top: 1px;padding-left:5px;"><apex:input type="number" value="{!contactHistoryWrap.kasoHour}" id="idChSogishaKasoHour" html-max="20" />時</div>
                            <div style="padding-top: 1px;padding-left:5px;"><apex:input type="number" value="{!contactHistoryWrap.kasoMinute}" id="idChSogishaKasoMinute" html-min="0" html-max="59" />分</div>
                          </div>
                          <div style="display:flex;padding-top:5px;">
                            <div class="contactHistoryLabel" style="width: 120px;padding-top:2px;">プラン</div>
                            <div><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaPlan__c}" id="idChSogishaPlan" /></div>
                          </div>
                          <div style="display:flex;padding-top:5px;">
                            <div class="contactHistoryLabel" style="width: 120px;padding-top:2px;">支払方法</div>
                            <div><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaShiharaiHoho__c}" id="idChSogishaShiharaiHoho" /></div>
                          </div>
                          <div style="display:flex;padding-top:5px;">
                            <div class="contactHistoryLabel" style="width: 120px;padding-top:2px;">僧侶手配</div>
                            <div><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaSoryoTehai__c}" id="idChSogishaSoryoTehai" /></div>
                          </div>
                          <div style="display:flex;padding-top:5px;">
                            <div class="contactHistoryLabel" style="width: 120px;padding-top:2px;">その他</div>
                            <div><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaSonotaShinchoku__c}" id="idChSogishaSonotaShinchoku" /></div>
                          </div>
                        </div>
                      </div>
                      <div>
                        <div style="padding-top:5px;">
                          <div class="contactHistoryLabel" style="padding-top:2px;padding-left: 17px;text-align: left;">FAX到着確認</div>
                          <div style="display:flex;">
                            <div class="contactHistoryLabel" style="width: 120px;padding-top:2px;">見積書送付連絡</div>
                            <div><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaMitsumorishoSofuRenraku__c}" id="idChSogishaMitsumorishoSofuRenraku" /></div>
                          </div>
                          <div style="display:flex;padding-top:5px;">
                            <div class="contactHistoryLabel" style="width: 120px;padding-top:2px;">請求書送付連絡</div>
                            <div><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaSeikyushoSofuRenraku__c}" id="idChSogishaSeikyushoSofuRenraku" /></div>
                          </div>
                        </div>
                      </div>
                      <div>
                        <div style="padding-top:5px;">
                          <div class="contactHistoryLabel" style="padding-top:2px;padding-left: 17px;text-align: left;">契約関連</div>
                          <div style="display:flex;">
                            <div class="contactHistoryLabel" style="width: 120px;padding-top:2px;">手数料金額</div>
                            <div><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaTesuryoKingaku__c}" id="idChSogishaTesuryoKingaku" /></div>
                          </div>
                          <div style="display:flex;padding-top:5px;">
                            <div class="contactHistoryLabel" style="width: 120px;padding-top:2px;">提携解除希望</div>
                            <div>
                              <apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaTeikeiKaijoKibo__c}" id="idChSogishaTeikeiKaijoKibo" />
                            </div>
                          </div>
                        </div>
                      </div>
                      <div>
                        <div style="padding-top:5px;">
                          <div class="contactHistoryLabel" style="padding-left: 17px;text-align: left;">その他</div>
                          <div style="display:flex;">
                            <div class="contactHistoryLabel" style="width: 120px;">プラン問合せ</div>
                            <div><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaPlanToiawase__c}" id="idChSogishaPlanToiawase" /></div>
                          </div>
                          <div style="display:flex;padding-top:5px;">
                            <div class="contactHistoryLabel" style="width: 120px;">パンフ送付依頼</div>
                            <div>
                              <apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaPanfuSofuIrai__c}" id="idChSogishaPanfuSofuIrai" onchange="chgSogiPanfuSofuIrai();" />
                              <script>
                                function chgSogiPanfuSofuIrai(){
                                  var dsp = 'none';
                                  if(document.getElementById('idPage:idForm:idChSogishaPanfuSofuIrai').value == '承る') { dsp = ''; }
                                  document.getElementById('idSogishaPanfuSofuDiv').style.display = dsp;
                                }
                              </script>
                            </div>
                            <div style="height:70px;">
                              <div id="idSogishaPanfuSofuDiv" style="display: none;">
                                <div style="display:flex;">
                                  <div class="contactHistoryLabel" style="width: 50px;">宛名</div>
                                  <div><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaPanfuAtena__c}" id="idChSogishaPanfuAtena" style="width: 200px;" /></div>
                                </div>
                                <div style="display:flex;padding-top:5px;">
                                  <div class="contactHistoryLabel" style="width: 50px;">宛先</div>
                                  <div><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaPanfuAtesaki__c}" id="idChSogishaPanfuAtesaki"  style="width: 200px;" /></div>
                                </div>
                                <div style="display:flex;padding-top:5px;">
                                  <div class="contactHistoryLabel" style="width: 50px;">送付物</div>
                                  <div><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaSofubutsu__c}" id="idChSogishaSofubutsu"  style="width: 200px;" /></div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div style="display:flex;padding-top:5px;">
                            <div class="contactHistoryLabel" style="width: 120px;">対面相談結果</div>
                            <div><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaTaimenSodanKekka__c}" id="idChSogishaTaimenSodanKekka" /></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </details>
                </div>
                <div style="padding-top:10px;">
                  <details style="" open="true">
                    <summary>
                      <b>案内内容(架電)</b>
                    </summary>
                    <div>
                      <div>
                        <div style="display:flex;">
                          <div class="contactHistoryLabel" style="width: 80px;">葬儀社手配</div>
                            <div>
                              <apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaSogishaTehai__c}" id="idChSogishaSogishaTehai" />
                            </div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;">空き状況確認</div>
                            <div>
                              <apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaAkijokyoKakunin__c}" id="idChSogishaAkijokyoKakunin" />
                            </div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div style="display:flex;">
                            <div class="contactHistoryLabel" style="width: 80px;">見積書催促</div>
                              <div>
                                <apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaMitsumorishoSaisoku__c}" id="idChSogishaMitsumorishoSaisoku" onchange="chgSogishaMitsumorishoSaisoku();" />
                                <script>
                                  function chgSogishaMitsumorishoSaisoku(){
                                    var dsp = 'none';
                                    if(document.getElementById('idPage:idForm:idChSogishaMitsumorishoSaisoku').value == '打合せがまだ') { dsp = ''; }
                                    document.getElementById('idSogishaUchiawaseYoteiDiv').style.display = dsp;
                                  }
                                </script>
                              </div>
                          </div>
                          <div id="idSogishaUchiawaseYoteiDiv" style="display:none">
                            <div style="display:flex;">
                              <div class="contactHistoryLabel" style="width: 80px;">打合せ予定</div>
                              <div>
                                <apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaUchiawaseYotei__c}" id="idChSogishaUchiawaseYotei" />
                              </div>
                            </div>
                          </div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;">見積書内容</div>
                            <div>
                              <apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaMitsumorishoNaiyo__c}" id="idChSogishaMitsumorishoNaiyo" />
                            </div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;">対面相談依頼</div>
                            <div>
                              <apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaTaimenSodanIrai__c}" id="idChSogishaTaimenSodanIrai" />
                            </div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;">後追い</div>
                            <div>
                              <apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaAtooi__c}" id="idChSogishaAtooi" />
                            </div>
                        </div>
                      </div>
                    </div>
                  </details>
                </div>
                <div style="padding-top:10px;">
                  <details style="" open="true">
                    <summary>
                      <b>特記事項</b>
                    </summary>
                    <div>
                      <div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">クレーム</div>
                          <div style="padding-top: 2px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaClaim__c}" id="idChSogishaClaim" /></div>
                          <div style="padding-top: 2px;">有</div>
                          <div style="padding-top: 2px;"><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaOndokanTakame__c}" id="idChSogishaOndokanTakame" /></div>
                          <div style="padding-top: 2px;">温度感高め</div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">特記事項</div>
                          <div style="padding-top: 2px;width: calc(100% - 80px);"><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaTokkijikoComment__c}" id="idChSogishaTokkijikoComment" onkeypress="enterActive(this);" /></div>
                        </div>
                      </div>
                    </div>
                  </details>
                </div>
                <div style="padding-top:10px;">
                  <details style="" open="true">
                    <summary>
                      <b>葬儀社への折返し連絡先</b>
                    </summary>
                    <div>
                      <div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">折返し内容</div>
                          <div style="padding-top: 2px;width: calc(100% - 80px);"><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaOrikaeshiNaiyo__c}" id="idChSogishaOrikaeshiNaiyo" onkeypress="enterActive(this);" /></div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">担当者名</div>
                          <div><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaOrikaeshiTantoshaName__c}" id="idChSogishaOrikaeshiTantoshaName" /></div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">連絡先</div>
                          <div><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaOrikaeshiRenrakusaki__c}" id="idChSogishaOrikaeshiRenrakusaki" /></div>
                        </div>
                        <div style="display:flex;padding-top:5px;">
                          <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">日時指定</div>
                          <div>
                            <apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaOrikaeshiRenrakuNichijiShitei__c}" id="idChSogishaOrikaeshiRenrakuNichijiShitei" onchange="chgSogishaOrikaeshiRenrakuNichijiShitei();" />
                            <script>
                              function chgSogishaOrikaeshiRenrakuNichijiShitei(){
                                var dsp = 'none';
                                if(document.getElementById('idPage:idForm:idChSogishaOrikaeshiRenrakuNichijiShitei').value == 'あり') { dsp = ''; }
                                document.getElementById('idSogishaOrikaeshiRenrakuNichijiDiv').style.display = dsp;
                              }
                            </script>
                          </div>
                          <div id="idSogishaOrikaeshiRenrakuNichijiDiv" style="display:none;">
                            <div style="display:flex;">
                              <div class="contactHistoryLabel" style="width: 80px;padding-top:2px;">日時</div>
                              <div><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaOrikaeshiRenrakuNichiji__c}" id="idChSogishaOrikaeshiRenrakuNichiji" html-placeholder="月/日 〇時頃" /></div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </details>
                </div>
              </div>
              <div style="display:flex;padding-top:5px;">
                <div>
                  <div class="contactHistoryLabel" style="width: 80px;">コメント</div>
                  <div><a class="square_btn2" href="#" style="width: 70px;"><span>【開く】▼</span><span>【畳む】▲</span></a></div>
                </div>
                <div style="width: calc(100% - 100px);"><apex:inputField value="{!contactHistoryWrap.contactHistory.SogishaFreeComment__c}" id="idChSogishaFreeComment" onkeypress="enterActive(this);" /></div>
              </div>
            </div>
            <apex:inputHidden value="{!contactHistoryWrap.contactHistory.ContactShubetsu__c}" id="idChContactShubetsu" />
            <script>
              $(function() {
                $('.square_btn2').on('click', function(event) {
                  event.preventDefault();
                  $(this).toggleClass('active');
                });
              });
        
              $(function() {
                $('.square_btn2').on('click', function(event) {
                    if ($('#idOtherMenuTabs').is(':hidden')) {
                      $('.tab-switch:checked+.tab-label+.tab-content').css('height', '360px');
                      if(document.getElementById('contactHistoryTabCustmer').checked) {
                        $('#idContactHistoryTabCustmerDetaileSclDiv').css('height', '150px');
                        $('#idContactHistoryTabSogishaDetaileSclDiv').css('height', '0px');
                      }
                      else{
                        $('#idContactHistoryTabCustmerDetaileSclDiv').css('height', '0px');
                        $('#idContactHistoryTabSogishaDetaileSclDiv').css('height', '150px');
                      }
                    } else {
                      
                      if(document.getElementById('contactHistoryTabCustmer').checked) {
                        var elementSideContents = document.getElementById('idContactHistoryTabCustmerDetaileSclDiv');
                        var rectSideContents = elementSideContents.getBoundingClientRect();
                        var tabContents = $(window).height() - rectSideContents.top - 26;
                        var detailContens = tabContents - 210;
                        $('.tab-switch:checked+.tab-label+.tab-content').css('height', tabContents + 'px');
                        $('#idContactHistoryTabCustmerDetaileSclDiv').css('height', detailContens + 'px');
                        $('#idContactHistoryTabSogishaDetaileSclDiv').css('height', '0px');
                      }
                      else{
                        var elementSideContents = document.getElementById('idContactHistoryTabSogishaDetaileSclDiv');
                        var rectSideContents = elementSideContents.getBoundingClientRect();
                        var tabContents = $(window).height() - rectSideContents.top - 26;
                        var detailContens = tabContents - 210;
                        $('.tab-switch:checked+.tab-label+.tab-content').css('height', tabContents + 'px');
                        $('#idContactHistoryTabCustmerDetaileSclDiv').css('height', '0px');
                        $('#idContactHistoryTabSogishaDetaileSclDiv').css('height', detailContens + 'px');
                      }
                    }
                  $('#idOtherMenuTabs').slideToggle(200);
                });
              });
              
              function setSwitchContactShubetsu(){
                var chk = 'お客様';
                if(document.getElementById('contactHistoryTabSogisha').checked) chk = '葬儀社';
                document.getElementById('idPage:idForm:idChContactShubetsu').value = chk;

                if(document.getElementById('contactHistoryTabCustmer').checked){
                  var elementSideContents = document.getElementById('idContactHistoryTabSogishaDetaileSclDiv');
                  var rectSideContents = elementSideContents.getBoundingClientRect();
                  var sclDiv = rectSideContents.height;
                  var div = sclDiv + 210;
                  $('.tab-switch:checked+.tab-label+.tab-content').css('height', sclDiv + 'px');
                  $('#idContactHistoryTabCustmerDetaileSclDiv').css('height', sclDiv + 'px');
                  $('#idContactHistoryTabCustmerDetaileDiv').css('height', div + 'px');
                  $('#idContactHistoryTabSogishaDetaileDiv').css('height', '0px');
                  $('#idContactHistoryTabSogishaDetaileSclDiv').css('height', '0px');
                }
                else{
                  var elementSideContents = document.getElementById('idContactHistoryTabCustmerDetaileSclDiv');
                  var rectSideContents = elementSideContents.getBoundingClientRect();
                  var sclDiv = rectSideContents.height;
                  var div = sclDiv + 210;
                  $('.tab-switch:checked+.tab-label+.tab-content').css('height', sclDiv + 'px');
                  $('#idContactHistoryTabCustmerDetaileDiv').css('height', '0px');
                  $('#idContactHistoryTabCustmerDetaileSclDiv').css('height', '0px');
                  $('#idContactHistoryTabSogishaDetaileSclDiv').css('height', sclDiv + 'px');
                  $('#idContactHistoryTabSogishaDetaileDiv').css('height', div + 'px');
                }
              }
            </script>
          </div>
          <div style="padding-top: 10px;">
            <div class="contactHistoryTabs" id="idOtherMenuTabs">
              <input id="idContactHistoryListRdo" type="radio" name="nmOtherMenuTab" class="tab-othermenu-switch" checked="true" /><label class="tab-othermenu-label" for="idContactHistoryListRdo">コンタクト</label>
              <div class="tab-othermenu-content" id="idContactHistoryListTab">
                <div>
                  <apex:outputpanel id="idContactTab">
                    <div style="display:flex;justify-content:space-between">
                      <div>
                        <apex:outputpanel rendered="{!mikanryoTaskFlg}">
                          <font color="red" style="font-weight: bold;font-size: medium;">未完了タスク有！</font>
                        </apex:outputpanel>
                      </div>
                      <div style="margin:0 0 5px 5px" align="right">
                        <apex:commandButton style="width:40px" value="再読込" action="{!sltTaskList}" rerender="idContactTab" />
                        <apex:commandButton style="width:80px" value="{!judenLogTitle}" action="{!displayJudenLog}" rerender="idContactTab" />
                      </div>
                    </div>
                    <apex:repeat value="{!contactHistoryList}" var="con" id="theRepeat">
                      <apex:OutputPanel rendered="{!IF(con.objectType=='Task',true,false)}">
                        <apex:OutputPanel rendered="{!IF(con.ta.RecordType.DeveloperName=='Tsujo',true,false)}">
                        <div class="slds-card" style="background-color:#f4f6fe;padding:5px;border:#DDDBDA solid 1px;margin-top:5px">
                          <table style="width:100%">
                            <tr>
                              <td style="padding-right: 0px;" colspan="2">
                                <apex:outputText styleclass="titleDetaile" value="{!con.ta.ShiborikomiJoken__c}" /><br/>
                                <apex:outputText value="{!con.ta.YokenSyubetsu__c}" /> </td>
                            </tr>
                            <tr>
                              <td style="padding-right: 0px;width:80%">
                                <apex:outputText styleclass="titleDetaile" value="{!con.ta.CreatedBy.Name}" />&nbsp;コンタクトを作成</td>
                              <td style="padding-right: 0px;text-align: right;">
                                <apex:outputtext value="{0, date, yyyy/MM/dd}">
                                  <apex:param value="{!con.ta.ActivityDate + 0.375}"></apex:param>
                                </apex:outputtext>
                              </td>
                            </tr>
                          </table>
                          <table style="width:100%">
                            <tr>
                              <th style="width:70px;text-align: left">クレーム</th>
                              <td>
                                <apex:outputField value="{!con.ta.Claim__c}" /> </td>
                            </tr>
                            <tr>
                              <th style="width:70px;text-align: left">コメント</th>
                              <td></td>
                            </tr>
                            <tr>
                              <td colspan="2" style="padding:0">
                                <div style="padding: 5px 5px 5px 5px; margin-bottom: 2px; border: 1px solid rgb(221, 219, 218); border-radius:.25rem;background-color: #FFFFFF; word-break: break-all;line-height: 20px;">
                                  <apex:outputField value="{!con.ta.Description}" /> </div>
                              </td>
                            </tr>
                            <tr>
                              <th style="width:70px;text-align: left">作成日</th>
                              <td>
                                <apex:outputtext value="{0, date, yyyy/MM/dd HH:mm}">
                                  <apex:param value="{!con.ta.CreatedDate + 0.375}"></apex:param>
                                </apex:outputtext>&nbsp;&nbsp;
                                <apex:outputText value="{!con.ta.CreatedBy.Name}" /> </td>
                            </tr>
                            <tr>
                              <th style="width:70px;text-align: left">最終更新日</th>
                              <td>
                                <apex:outputtext value="{0, date, yyyy/MM/dd HH:mm}">
                                  <apex:param value="{!con.ta.LastModifiedDate + 0.375}"></apex:param>
                                </apex:outputtext>&nbsp;&nbsp;
                                <apex:outputText value="{!con.ta.CreatedBy.Name}" /> </td>
                            </tr>
                          </table>
                        </div>
                        </apex:OutputPanel>
                        
                          <apex:OutputPanel rendered="{!IF(con.ta.RecordType.DeveloperName=='BizTel',true,false)}" style="display:{!IF(judenLogTitle=='受電ログ表示','none','')}">
                          <div class="slds-card" style="background-color:#f4f6fe;padding:5px;border:#DDDBDA solid 1px;margin-top:5px">
                            <table style="width:100%">
                              <tr>
                                <td style="padding-right: 0px;width:80%">
                                  <apex:outputText styleclass="titleDetaile" value="受電ログ" />
                                </td>
                                <td style="padding-right: 0px;text-align: right;">
                                  <apex:outputtext value="{0, date, yyyy/MM/dd}">
                                    <apex:param value="{!con.ta.ActivityDate + 0.375}"></apex:param>
                                  </apex:outputtext>
                                </td>
                              </tr>
                            </table>
                            <table style="width:100%">
                              <tr>
                                <th style="width:70px;text-align: left">音声再生</th>
                                <td>
                                  <apex:inputField value="{!con.ta.WavUrlImg__c}" />
                                </td>
                              </tr>
                              <tr>
                                <th style="width:70px;text-align: left">作成日</th>
                                <td>
                                  <apex:outputtext value="{0, date, yyyy/MM/dd HH:mm}">
                                    <apex:param value="{!con.ta.CreatedDate + 0.375}"></apex:param>
                                  </apex:outputtext>&nbsp;&nbsp;
                                  <apex:outputText value="{!con.ta.CreatedBy.Name}" />
                                </td>
                              </tr>
                            </table>
                          </div>
                          </apex:OutputPanel>

                        <apex:OutputPanel rendered="{!IF(con.ta.RecordType.DeveloperName=='SogishaKadenKiroku',true,false)}">
                        <div class="slds-card" style="background-color:#f4f6fe;padding:5px;border:#DDDBDA solid 1px;margin-top:5px">
                          <table style="width:100%">
                            <tr>
                              <td colspan="2" style="padding-right: 0px;">
                                <apex:outputText styleclass="titleHeader" value="{!con.ta.KadenSogisha__r.Name}" /> </td>
                            </tr>
                            <tr>
                              <td style="padding-right: 0px;">
                                <apex:outputText styleclass="titleDetaile" value="{!con.ta.CreatedBy.Name}" />&nbsp;葬儀社架電記録を作成</td>
                              <td style="padding-right: 0px;text-align: right;">
                                <apex:outputtext value="{0, date, yyyy/MM/dd}">
                                  <apex:param value="{!con.ta.ActivityDate + 0.375}"></apex:param>
                                </apex:outputtext>
                              </td>
                            </tr>
                          </table>
                          <table style="width:100%">
                            <tr>
                              <th style="width:70px;text-align: left">対応不可理由</th>
                              <td>
                                <apex:outputText value="{!con.ta.TaioFukaRiyu__c}" /> </td>
                            </tr>
                          </table>
                        </div>
                        </apex:OutputPanel>
                        <apex:OutputPanel rendered="{!IF(con.ta.RecordType.DeveloperName=='Sofu',true,false)}">
                        <div class="slds-card" style="background-color:#f4f6fe;padding:5px;border:#DDDBDA solid 1px;margin-top:5px">
                          <table style="width:100%">
                            <tr>
                              <td colspan="2" style="padding-right: 0px;">
                                <a onclick="">
                                  <apex:outputText styleclass="titleHeader" value="{!con.ta.Subject}" /> </a>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <apex:outputText styleclass="titleDetaile" value="{!con.ta.CreatedBy.Name}" />&nbsp;資料送付を作成</td>
                              <td style="padding-right: 0px;text-align: right;">
                                <apex:outputtext value="{0, date, yyyy/MM/dd}">
                                  <apex:param value="{!con.ta.ActivityDate + 0.375}"></apex:param>
                                </apex:outputtext>
                              </td>
                            </tr>
                          </table>
                        </div>
                        </apex:OutputPanel>
                      </apex:OutputPanel>
                        <apex:OutputPanel rendered="{!IF(con.objectType=='VOC',true,false)}">
                          <div class="slds-card" style="background-color:#f4f6fe;padding:5px;border:#DDDBDA solid 1px;margin-top:5px">
                              <apex:OutputPanel rendered="{!IF(con.vo.VOCType__c=='お喜び / お褒めの言葉',true,false)}">
                                <div style="width:230px">
                                  <div class="titlePanelPink"><span class="titlePink">VOC (お喜び / お褒めの言葉)</span></div>
                                </div>
                              </apex:OutputPanel>
                              <apex:OutputPanel rendered="{!IF(con.vo.VOCType__c=='ご意見 / ご要望',true,false)}">
                                <div style="width:230px">
                                  <div class="titlePanelGreen"><span class="titlePink">VOC (ご意見 / ご要望)</span></div>
                                </div>
                              </apex:OutputPanel>
                              <div>
                              <table style="width:100%">
                                <tr>
                                  <th><span style="width:35px;font-weight: bold;">From</span></th>
                                  <td><apex:outputText styleclass="titleDetaile" value="{!con.vo.HasshinmotoFrom__c}"/></td>
                                  <th><span style="display: inline-block;width:60px;font-weight: bold;margin-left: 10px;">経路</span></th>
                                  <td><apex:outputText styleclass="titleDetaile" value="{!con.vo.Keiro__c}"/></td>
                                </tr>
                                <tr>
                                  <th><span style="width:35px;font-weight: bold;">To</span></th>
                                  <td colspan="3">
                                    <apex:outputText styleclass="titleDetaile" value="{!con.vo.HasshinsakiTo__c}"/>&nbsp;
                                    <apex:OutputPanel rendered="{!IF(con.vo.HasshinsakiTo__c=='当社(CS)',true,false)}">
                                      <apex:outputText value="{!con.vo.TaishoRepMeiRef__r.Name}"/>
                                    </apex:OutputPanel>
                                    <apex:OutputPanel rendered="{!IF(OR(con.vo.HasshinsakiTo__c=='当社(CS以外の部門)', con.vo.HasshinsakiTo__c=='パートナー(仏壇業者)', con.vo.HasshinsakiTo__c=='パートナー(その他)', con.vo.HasshinsakiTo__c=='その他'),true,false)}">
                                      <apex:outputText value="{!con.vo.Sonota__c}"/>
                                    </apex:OutputPanel>
                                    <apex:OutputPanel rendered="{!IF(OR(con.vo.HasshinsakiTo__c=='パートナー(葬儀社)', con.vo.HasshinsakiTo__c=='パートナー(僧侶)'),true,false)}">
                                      <apex:outputText value="{!con.vo.TaishoPartnerMeiRef__r.Name}"/>
                                    </apex:OutputPanel>
                                  </td>
                                </tr>
                                <tr>
                                  <td colspan="3">
                                        <apex:outputText styleclass="titleDetaile" value="{!con.vo.CreatedBy.Name}"/>&nbsp;さんがVOCを作成しました
                                  </td>
                                  <td style="padding-right: 0px;text-align: right;">
                                    <apex:outputtext value="{0, date, yyyy/MM/dd}">
                                      <apex:param value="{!con.vo.CreatedDate + 0.375}"></apex:param>
                                    </apex:outputtext>
                                  </td>
                                </tr>
                              </table>
                            </div>
                            <table style="width:100%">
                              <tr>
                                <td><span style="display: inline-block;width:70px;font-weight: bold;">コメント</span></td>
                                <td></td>
                              </tr>
                              <tr>
                                <td colspan="2"><div style="padding: 2px; margin-bottom: 2px; border: 1px solid rgb(221, 219, 218); border-radius:.25rem;background-color: #FFFFFF; word-break: break-all;"><apex:outputField value="{!con.vo.Naiyo__c}" /></div></td>
                              </tr>
                              <tr>
                                <th style="width:70px;text-align: left">作成日</th>
                                <td>
                                  <apex:outputtext value="{0, date, yyyy/MM/dd HH:mm}">
                                    <apex:param value="{!con.vo.CreatedDate + 0.375}"></apex:param>
                                  </apex:outputtext>&nbsp;&nbsp;
                                  <apex:outputText value="{!con.vo.CreatedBy.Name}" /> </td>
                              </tr>
                              <tr>
                                <th style="width:70px;text-align: left">最終更新日</th>
                                <td>
                                  <apex:outputtext value="{0, date, yyyy/MM/dd HH:mm}">
                                    <apex:param value="{!con.vo.LastModifiedDate + 0.375}"></apex:param>
                                  </apex:outputtext>&nbsp;&nbsp;
                                  <apex:outputText value="{!con.vo.CreatedBy.Name}" /> </td>
                              </tr>
                            </table>
                          </div>
                        </apex:OutputPanel>
                    </apex:repeat>
                  </apex:outputpanel>
                </div>
              </div>
              <input id="idTalkTRdo" type="radio" name="nmOtherMenuTab" class="tab-othermenu-switch" /><label class="tab-othermenu-label" for="idTalkTRdo">トーク</label>
              <div class="tab-othermenu-content">
                <apex:outputText id="idTalkScriptContent" value="{!sogiTalkScript.TalkScript__c}" escape="false"/>
              </div>
              <input id="idSogishakadenRdo" type="radio" name="nmOtherMenuTab" class="tab-othermenu-switch" /><label class="tab-othermenu-label" for="idSogishakadenRdo">葬儀社架電</label>
              <div class="tab-othermenu-content">
                <div class="slds-card" style="background-color:#f4f6fe;border:#DDDBDA solid 1px;margin-bottom:5px">
                  <apex:OutputPanel id="idSogishaKaden">
                    <table cellpadding="5px" cellspacing="0" style="width:100%;margin-bottom:5px;">
                      <tr>
                        <th style="width:70px;text-align: left">葬儀社</th>
                        <td>
                          <apex:inputField value="{!sogishaKaden.KadenSogisha__c}" id="idSogishaKadenKeiyaku" style="width: 170px;" /> </td>
                      </tr>
                      <tr>
                        <th style="width:70px;text-align: left">対応不可理由</th>
                        <td>
                          <apex:inputField value="{!sogishaKaden.TaioFukaRiyu__c}" id="idTaioFukaRiyu" /> </td>
                      </tr>
                      <tr>
                        <th style="width:70px;text-align: left;vertical-align:top">対応不可理由<br/>その他</th>
                        <td>
                          <apex:inputField value="{!sogishaKaden.TaioFukaRiyuSonota__c}" id="idTaioFukaRiyuSonota" style="width: 190px;height: 100px;" /> </td>
                      </tr>
                      <tr>
                        <td style="text-align:center;padding:0"> <input type="button" class="btn" style="width:80px" value="作成" onclick="return checkSogishaKaden();" /> </td>
                        <td>
                          <apex:outputtext value="{!sogishaKadenMsg}" style="color:green" /> </td>
                      </tr>
                    </table>
                  </apex:OutputPanel>
                </div>
              </div>
              <input id="idHikitsugiTaskRdo" type="radio" name="nmOtherMenuTab" class="tab-othermenu-switch" /><label class="tab-othermenu-label" for="idHikitsugiTaskRdo">タスク</label>
              <div class="tab-othermenu-content">
                <apex:outputpanel id="idHikitsugitaskTab">
                  <apex:repeat value="{!hikitsugiList}" var="t" id="idHikitsugitasklist">
                    <div class="slds-card" style="background-color:#f4f6fe;padding:5px;border:#DDDBDA solid 1px;margin-top:5px">
                      <table>
                        <tr>
                          <td><span style="display: inline-block;width:70px;font-weight: bold;">対応開始</span></td>
                          <td><apex:outputtext value="{0, date, yyyy/MM/dd HH:mm}">
                                <apex:param value="{!t.Kijitsu__c + 0.375}"></apex:param>
                              </apex:outputtext>
                          </td>
                        </tr>
                        <tr>
                          <td width="15%"><span style="font-weight: bold;">対応者</span></td>
                          <td><apex:outputtext value="{!t.Owner.Name}"/></td>
                        </tr>
                        <tr>
                          <td width="15%"><span style="font-weight: bold;">対応状況</span></td>
                          <td><span style="font-size: 16px;font-weight: bold;color:rgb(0, 95, 178)"><apex:outputtext value="{!t.Status}"/></span></td>
                        </tr>
                        <tr>
                          <td width="15%"><span style="font-weight: bold;">優先度</span></td>
                          <td><apex:outputtext value="{!t.Priority}"/></td>
                        </tr>
                        <tr>
                          <th style="width:70px;text-align: left">コメント</th>
                          <td></td>
                        </tr>
                        <tr>
                          <td colspan="2" style="padding:0">
                            <div style="padding: 5px 5px 5px 5px; margin-bottom: 2px; border: 1px solid rgb(221, 219, 218); border-radius:.25rem;background-color: #FFFFFF; word-break: break-all;line-height: 20px;">
                              <apex:outputField value="{!t.Description}" /> </div>
                          </td>
                        </tr>
                        <tr>
                            <th style="width:70px;text-align: left">作成日</th>
                            <td>
                              <apex:outputtext value="{0, date, yyyy/MM/dd HH:mm}">
                                <apex:param value="{!t.CreatedDate + 0.375}"></apex:param>
                              </apex:outputtext>&nbsp;&nbsp;
                              <apex:outputText value="{!t.CreatedBy.Name}" /> </td>
                          </tr>
                          <tr>
                            <th style="width:70px;text-align: left">最終更新日</th>
                            <td>
                              <apex:outputtext value="{0, date, yyyy/MM/dd HH:mm}">
                                <apex:param value="{!t.LastModifiedDate + 0.375}"></apex:param>
                              </apex:outputtext>&nbsp;&nbsp;
                              <apex:outputText value="{!t.CreatedBy.Name}" /> </td>
                          </tr>
                      </table>
                    </div>
                  </apex:repeat>
                </apex:outputpanel>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </apex:form>
</apex:page>